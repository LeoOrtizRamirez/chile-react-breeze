import{r as d,j as u,a,F as _}from"./app-29dc4b11.js";import{A as q}from"./AuthenticatedLayout-d4cf468c.js";/* empty css                      */import{T as z,a as D}from"./estilos-toast-1536fd04.js";import"./font-unicolor-e01f101d.js";/* empty css                 */import"./ApplicationLogo-5601abfb.js";import"./ApplicationLogoLici-8c5999af.js";import"./transition-79cef784.js";import"./createWithBsPrefix-52c31a3c.js";import"./useTimeout-9be9c2e2.js";const ce=({auth:T,actividades_economicas:O})=>{console.log("renderize");const[B,F]=d.exports.useState(!1),[L,K]=d.exports.useState(""),[y,U]=d.exports.useState(""),[p,G]=d.exports.useState(O),[f,I]=d.exports.useState(O);d.exports.useState(!1),d.exports.useState(!1),d.exports.useState(0);const[H,$]=d.exports.useState(0),[g,b]=d.exports.useState([]),[x,v]=d.exports.useState([]);d.exports.useState({id:0,nombre:""});const[h,A]=d.exports.useState([]),[N,w]=d.exports.useState([]),[E,C]=d.exports.useState([]),j=s=>{var e=document.getElementById("sector_"+s);e.classList.toggle("expanded"),g.includes(s)?b(g.filter(i=>i!=s)):b([...g,s]);const t=new RegExp(s,"i");f.filter(function(i){if(t.test(i.id_padre_sub_categoria))return i}).forEach(i=>{if(!N.includes(i))N.push(i);else{const l=N.filter(o=>o.id_padre_sub_categoria!=s);w(l)}})},R=s=>{var e=document.getElementById("segmento_"+s);e.classList.toggle("expanded"),x.includes(s)?v(x.filter(i=>i!=s)):v([...x,s]);const t=new RegExp(s,"i");f.filter(function(i){if(t.test(i.id_padre_sub_categoria))return i}).forEach(i=>{if(!E.includes(i))E.push(i);else{const l=E.filter(o=>o.id_padre_sub_categoria!=s);C(l)}}),$(s)},S=s=>{var e=[];h.forEach(i=>{e.push(i)});var t=p.filter(i=>i.id_padre_sub_categoria==s.id&&i.id_abuelo_sub_categoria==null);if(t.length>0){if(!e.includes(s.id))e.push(s.id);else{const i=e.indexOf(s.id);i>-1&&e.splice(i,1)}t.forEach(i=>{const l=p.filter(o=>o.id_padre_sub_categoria==i.id);if(!h.includes(i.id))e.push(i.id),l.forEach(o=>{if(!h.includes(o.id))e.push(o.id);else{const m=e.indexOf(o.id);m>-1&&e.splice(m,1)}});else{const o=e.indexOf(i.id);o>-1&&e.splice(o,1),l.forEach(m=>{const k=e.indexOf(m.id);k>-1&&e.splice(k,1)})}console.log(i),A(e)})}else{var r=p.filter(i=>i.id_padre_sub_categoria==s.id);if(r.length>0){if(!e.includes(s.id))e.push(s.id);else{const i=e.indexOf(s.id);i>-1&&e.splice(i,1)}r.forEach(i=>{if(!h.includes(i.id))e.push(i.id);else{const l=e.indexOf(i.id);l>-1&&e.splice(l,1)}A(e)})}else{if(!e.includes(s.id))e.push(s.id);else{const i=e.indexOf(s.id);i>-1&&e.splice(i,1)}A(e)}}},M=s=>{if(s.target.value==""){I(p),w([]),C([]),b([]),v([]);return}if(s.key==="Enter"){const k=new RegExp(s.target.value,"i"),P=p.filter(function(c){if(k.test(c.nombre))return c});var e=[],t=[],r=[],i=[],l=[];P.forEach(c=>{c.id_abuelo_sub_categoria!=null&&c.id_padre_sub_categoria!=null&&(r.push(c),i.push(c.id_padre_sub_categoria),t.push(p.filter(n=>n.id==c.id_padre_sub_categoria)[0]),l.push(c.id_abuelo_sub_categoria)),c.id_abuelo_sub_categoria==null&&c.id_padre_sub_categoria!=null&&(t.includes(c)||(t.push(c),t.push(c)),l.includes(c.id_padre_sub_categoria)||(l.push(c.id_padre_sub_categoria),t.push(c))),c.id_abuelo_sub_categoria==null&&c.id_padre_sub_categoria==null&&e.push(c)});var o=null,m=null;r.forEach(c=>{o=p.filter(n=>n.id==c.id_abuelo_sub_categoria)[0],m=p.filter(n=>n.id==c.id_padre_sub_categoria)[0],e.includes(o)||e.push(p.filter(n=>n.id==c.id_abuelo_sub_categoria)[0]),t.includes(m)||e.push(p.filter(n=>n.id==c.id_padre_sub_categoria)[0])}),I(e),w(t),C(r),b(l),v(i),e.forEach(c=>{var n=document.getElementById("sector_"+c.id);n.classList.add("expanded")}),t.forEach(c=>{console.log(c);var n=document.getElementById("segmento_"+c.id);console.log(n),n&&n.classList.add("expanded")})}};return d.exports.useEffect(()=>{},[f]),u(q,{auth:T,children:[a(z,{position:"bottom-start",children:a(D,{onClose:()=>F(!1),show:B,delay:3e3,autohide:!0,children:u("div",{className:`notification-toast ${y=="icon-error"?"error":"success"}`,children:[a("span",{className:`toast-icon ${y=="icon-error"?"toast-danger":"toast-success"}`,children:a("span",{className:y})}),a("p",{className:"title",children:L}),a("button",{type:"button",className:"icon-close m-auto",onClick:()=>F(!1)})]})})}),a("div",{className:"contenedor-planes",children:u("div",{className:"bg-white overflow-auto w-full text-center margen-superior custom-scroll",children:[a("h2",{className:"name_section_app",children:"Crear perfil de negocio"}),a("div",{className:"perfil-guias",children:a("ul",{children:a("li",{children:u("div",{className:"perfil-guias__indicador perfil-guias__indicador--activo",children:[a("i",{className:"icon-Paso-1-click"})," ",a("span",{children:"Actividad económica"})]})})})}),a("div",{className:"container mt-4",children:a("div",{className:"tree_categorias tree_1",children:u("div",{className:"tree_categorias__busqueda mb-3 mb-md-4",children:[u("div",{className:"mx-auto",children:[a("input",{type:"text",placeholder:"Busca por actividad económica o UNSPSC",autocomplete:"off",className:"form-control",onKeyDown:M}),a("button",{type:"button",className:"icon-Buscar-click"})]}),a("br",{}),a("ul",{className:"tree-root",children:f.map(s=>a(_,{children:s.id_padre_sub_categoria==null&&u("li",{className:"tree-node has-child draggable",id:"sector_"+s.id,children:[u("div",{id:s.id,className:"tree-content mt-3 sector",children:[a("i",{className:`tree-arrow has-child ${s.childs.length>0?"bi bi-chevron-down":""}`}),a("input",{type:"checkbox",name:"actividad_economica",onChange:()=>S(s),checked:h.includes(s.id)?"checked":""}),a("span",{className:"tree-anchor",children:a("span",{className:"tree-division tree-division1",onClick:()=>j(s.id),children:a("span",{className:"tree-division__title my-auto",children:s.nombre})})})]},s.id),g.includes(s.id)&&a("ul",{className:"tree-children new-class",children:N.map((e,t)=>a(_,{children:s.id==e.id_padre_sub_categoria&&u("li",{className:"tree-node has-child draggable segmento",id:"segmento_"+e.id,children:[u("div",{className:"tree-content segmento",children:[a("i",{className:"tree-arrow has-child ltr"}),a("input",{type:"checkbox",name:"actividad_economica",onChange:()=>S(e),checked:h.includes(e.id)?"checked":""}),a("span",{className:"tree-anchor",children:a("span",{className:"tree-division tree-division1",onClick:()=>R(e.id),children:a(_,{children:t%2==0?a("span",{className:"tree-division__title my-auto",children:e.nombre}):a("span",{className:"tree-division__title-gray my-auto",children:e.nombre})})})})]}),x.includes(e.id)&&a("ul",{className:"tree-children actividad-economica",children:E.map((r,i)=>a(_,{children:e.id==r.id_padre_sub_categoria&&a("li",{className:"tree-node draggable",children:u("div",{className:"tree-content actividad-economica",onClick:()=>S(r),children:[r.id,a("input",{type:"checkbox",name:"actividad_economica",onChange:()=>S(r),checked:h.includes(r.id)?"checked":""}),a("span",{className:"tree-anchor children",children:a("span",{className:"tree-division tree-division1",children:a(_,{children:a("span",{className:"tree-division__title my-auto",children:r.nombre})})})})]})})}))})]})}))})]})}))})]})})})]})})]})};export{ce as default};
