import{r as c,j as o,a as e,H as W,F as S}from"./app-8a5067d4.js";import{A as X}from"./AuthenticatedLayout-f7444b2a.js";/* empty css                      */import{N as M,M as E}from"./Modal-9baae881.js";import{T as Y,a as Z}from"./estilos-toast-8317bf04.js";import"./font-unicolor-b26c1c6c.js";import"./ApplicationLogo-7ad14e79.js";import"./ApplicationLogoLici-91374aad.js";import"./transition-2a438354.js";import"./createWithBsPrefix-d573922b.js";import"./hasClass-82af3454.js";import"./useTimeout-ff8f4dbe.js";const he=({auth:D,tiposcompras:H})=>{const[$,m]=c.exports.useState(!1),[L,C]=c.exports.useState(""),[k,b]=c.exports.useState(""),[l,ee]=c.exports.useState(H),[w,I]=c.exports.useState(H);c.exports.useState(!1),c.exports.useState(!1),c.exports.useState(0);const[ie,q]=c.exports.useState(0),[f,v]=c.exports.useState([]),[N,_]=c.exports.useState([]),[p,R]=c.exports.useState({id:0,nombre:""}),[h,x]=c.exports.useState([]),[g,A]=c.exports.useState([]),[O,y]=c.exports.useState(!1),T=()=>y(!1),K=()=>{p.id!=0?y(!0):(C("Debes seleccionar un tipo de compra"),b("icon-error"),m(!0))},z=()=>{p.id!=0?window.location.replace("/tiposcompras/"+p.id+"/edit"):(C("Debes seleccionar un tipo de compra"),b("icon-error"),m(!0))},G=i=>{f.includes(i)?v(f.filter(a=>a!=i)):v([...f,i]);const s=new RegExp(i,"i");w.filter(function(a){if(s.test(a.id_padre_sub_categoria))return a}).forEach(a=>{if(!h.includes(a))h.push(a);else{const u=h.filter(d=>d.id_padre_sub_categoria!=i);x(u)}})},J=i=>{N.includes(i)?_(N.filter(a=>a!=i)):_([...N,i]);const s=new RegExp(i,"i");w.filter(function(a){if(s.test(a.id_padre_sub_categoria))return a}).forEach(a=>{if(!g.includes(a))g.push(a);else{const u=g.filter(d=>d.id_padre_sub_categoria!=i);A(u)}}),q(i)},F=i=>{R(i)},P=i=>{if(i.target.value==""){I(l),x([]),A([]),v([]),_([]);return}if(i.key==="Enter"){const U=new RegExp(i.target.value,"i"),V=l.filter(function(t){if(U.test(t.nombre))return t});var s=[],r=[],a=[],u=[],d=[];V.forEach(t=>{t.id_padre_sub_categoria!=null&&(a.push(t),u.push(t.id_padre_sub_categoria),r.push(l.filter(n=>n.id==t.id_padre_sub_categoria)[0]),d.push(t.id_abuelo_sub_categoria)),t.id_padre_sub_categoria!=null&&(r.includes(t)||r.push(t),d.includes(t.id_padre_sub_categoria)||d.push(t.id_padre_sub_categoria)),t.id_padre_sub_categoria==null&&s.push(t)});var j=null,B=null;a.forEach(t=>{j=l.filter(n=>n.id==t.id)[0],B=l.filter(n=>n.id==t.id_padre_sub_categoria)[0],s.includes(j)||s.push(l.filter(n=>n.id==t.id_padre_sub_categoria)[0]),r.includes(B)||s.push(l.filter(n=>n.id==t.id_padre_sub_categoria)[0])}),I(s),x(r),A(a),v(d),_(u)}},Q=()=>{fetch("/tiposcompras/"+p.id+"/delete").then(i=>i.json()).then(i=>{if(i.type=="Success"){b("icon-check");var s=h.filter(r=>r.id!=p.id);x(s),R({id:0,nombre:""})}else b("icon-error");C(i.message),m(!0),y(!1)})};return o(X,{auth:D,children:[e(W,{title:"Tipos Compras"}),e(Y,{position:"bottom-start",children:e(Z,{onClose:()=>m(!1),show:$,delay:3e3,autohide:!0,children:o("div",{className:`notification-toast ${k=="icon-error"?"error":"success"}`,children:[e("span",{className:`toast-icon ${k=="icon-error"?"toast-danger":"toast-success"}`,children:e("span",{className:k})}),e("p",{className:"title",children:L}),e("button",{type:"button",className:"icon-close m-auto",onClick:()=>m(!1)})]})})}),e("div",{className:"contenedor-planes",children:o("div",{className:"bg-white overflow-auto w-full text-center margen-superior",children:[e("h2",{className:"name_section_app",children:"Tipos Compras"}),o("div",{className:"container mt-4",children:[e("div",{className:"tree_categorias tree_1",children:e("div",{className:"tree_categorias__busqueda mb-3 mb-md-4",children:o("div",{className:"mx-auto",children:[e("input",{type:"text",placeholder:"Buscar tipo de compra",autoComplete:"off",className:"form-control m-auto",onKeyDown:P}),e("i",{className:"icon-Cancelar"}),e("button",{type:"button",className:"icon-Buscar-click",children:e("i",{className:"bi bi-search"})}),e("br",{}),o("div",{className:"botones",children:[e(M.Link,{href:route("createTiposCompras"),className:"flex  ml-4 text-probar ",children:e("i",{className:"bi bi-plus-square-fill"})}),e(M.Link,{onClick:z,className:"flex  ml-4 text-probar ",children:e("i",{className:"bi bi-pencil-fill"})}),e(M.Link,{onClick:K,className:"flex  ml-4 text-probar ",children:e("i",{className:"bi bi-trash3"})})]}),w.map(i=>e(S,{children:i.id_padre_sub_categoria==null&&o(S,{children:[o("div",{id:i.id,className:"tree-content mt-3 sector",onClick:()=>G(i.id),children:[e("i",{className:`tree-arrow has-child ${i.childs.length>0?"bi bi-chevron-down":""}`}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",children:e("span",{className:"tree-division__title my-auto",children:i.nombre})})})]},i.id),f.includes(i.id)&&e("ul",{className:"tree-children",children:h.map((s,r)=>e(S,{children:i.id==s.id_padre_sub_categoria&&o("li",{"data-id":"20504",className:"tree-node has-child expanded draggable",onClick:()=>F(s),children:[o("div",{className:"tree-content segmento",onClick:()=>J(s.id),children:[e("i",{className:"tree-arrow expanded has-child ltr"}),e("input",{type:"radio",name:"actividad_economica",onClick:()=>F(s),checked:s.id==p.id?"checked":""}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",children:e(S,{children:r%2==0?e("span",{className:"tree-division__title my-auto",children:s.nombre}):e("span",{className:"tree-division__title-gray my-auto",children:s.nombre})})})})]}),N.includes(s.id)&&e("ul",{className:"tree-children",children:g.map(a=>e("li",{className:"tree-node draggable",children:e("div",{className:"tree-content actividad-economica",onClick:()=>F(a),children:e("span",{className:"tree-anchor children",children:e("span",{className:"tree-division tree-division1",children:e("span",{className:"tree-division__title my-auto",children:a.nombre})})})})}))})]})}))})]})}))]})})}),o(E,{show:O,onHide:T,id:"removeActividadEconomica",className:"modal-dialog-centered",children:[o(E.Header,{id:"removeActividadEconomicaHeader",children:[e("h5",{className:"modal-title",children:"Eliminar"}),e("button",{type:"button",className:"btn-close btn-close-white",onClick:T})]}),e(E.Body,{id:"removeActividadEconomicaBody",children:o("p",{children:["Desea eliminar el tipo de compra"," ",p.nombre,"?"]})}),o(E.Footer,{children:[e("button",{type:"submit",className:"btn btnRadius btn-new-blue mr-2",onClick:T,children:"Cancelar"}),e("button",{onClick:Q,className:"btn btnRadius btn-new-red ml-2",children:"Eliminar"})]})]})]})]})})]})};export{he as default};
