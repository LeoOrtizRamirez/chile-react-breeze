import{r as d,j as l,F as u,a as s}from"./app-a395f59d.js";import"./AuthenticatedLayout-30f9dc1b.js";/* empty css                      */import{T as re,a as le}from"./estilos-toast-8e67c442.js";/* empty css                      *//* empty css                 */import"./transition-d627f6da.js";import"./createWithBsPrefix-6f56816e.js";import"./useTimeout-b5082d06.js";import"./CloseButton-5aff73a3.js";const Pe=({auth:ue,actividades_economicas:L,tiposcompras:R,localizacion:he})=>{const[U,q]=d.exports.useState(!1),[G,pe]=d.exports.useState(""),[y,me]=d.exports.useState(""),[h,fe]=d.exports.useState(L),[P,z]=d.exports.useState(L),[f,N]=d.exports.useState([]),[_,S]=d.exports.useState([]),[k,J]=d.exports.useState([]),[C,A]=d.exports.useState([]),[E,O]=d.exports.useState([]),Q=i=>{var e=document.getElementById("sector_"+i);e.classList.toggle("expanded"),f.includes(i)?N(f.filter(a=>a!=i)):N([...f,i]);const t=new RegExp(i,"i");P.filter(function(a){if(t.test(a.id_padre_sub_categoria))return a}).forEach(a=>{if(!C.includes(a))C.push(a);else{const r=C.filter(n=>n.id_padre_sub_categoria!=i);A(r)}})},W=i=>{var e=document.getElementById("segmento_"+i);e.classList.toggle("expanded"),_.includes(i)?S(_.filter(a=>a!=i)):S([..._,i]);const t=new RegExp(i,"i");P.filter(function(a){if(t.test(a.id_padre_sub_categoria))return a}).forEach(a=>{if(!E.includes(a))E.push(a);else{const r=E.filter(n=>n.id_padre_sub_categoria!=i);O(r)}})},T=i=>{var e=[];k.forEach(a=>{e.push(a)});var t=h.filter(a=>a.id_padre_sub_categoria==i.id&&a.id_abuelo_sub_categoria==null);if(t.length>0)e.includes(i.id)?(e=b(e,i),e=g(e,t,"segmento","remove")):(e.push(i.id),e=g(e,t,"segmento","remove"),e=g(e,t,"segmento","add"));else{var o=h.filter(a=>a.id_padre_sub_categoria==i.id);o.length>0?e.includes(i.id)?(e=b(e,i),e=g(e,o,"actividad_economica","remove")):(e.push(i.id),e=g(e,o,"actividad_economica","add")):e.includes(i.id)?e=b(e,i):e.push(i.id)}J(e)},b=(i,e)=>{const t=i.indexOf(e.id);return t>-1&&i.splice(t,1),i},g=(i,e,t=null,o)=>(e.forEach(a=>{switch(o){case"add":i.push(a.id),t=="segmento"&&h.filter(n=>n.id_padre_sub_categoria==a.id).forEach(n=>{i.push(n.id)});break;case"remove":i=b(i,a),t=="segmento"&&h.filter(n=>n.id_padre_sub_categoria==a.id).forEach(n=>{i=b(i,n)});break}}),i),X=i=>{if(i.target.value==""){z(h),A([]),O([]),N([]),S([]);return}if(i.key==="Enter"){const n=new RegExp(i.target.value,"i"),m=h.filter(function(c){if(n.test(c.nombre)||i.target.value==c.id)return c});var e=[],t=[],o=[],a=[],r=[];m.forEach(c=>{if(c.id_abuelo_sub_categoria!=null&&c.id_padre_sub_categoria!=null){o.push(c);var K=h.filter(I=>I.id==c.id_padre_sub_categoria)[0];t.includes(K)||t.push(K),a.includes(c.id_padre_sub_categoria)||a.push(c.id_padre_sub_categoria);var x=h.filter(I=>I.id==c.id_abuelo_sub_categoria)[0];e.includes(x)||e.push(x),r.includes(c.id_abuelo_sub_categoria)||r.push(c.id_abuelo_sub_categoria)}if(c.id_abuelo_sub_categoria==null&&c.id_padre_sub_categoria!=null){t.includes(c)||t.push(c),a.includes(c.id)||a.push(c.id);var x=h.filter(ne=>ne.id==c.id_padre_sub_categoria)[0];e.includes(x)||e.push(x),r.includes(c.id_padre_sub_categoria)||r.push(c.id_padre_sub_categoria)}c.id_abuelo_sub_categoria==null&&c.id_padre_sub_categoria==null&&(e.includes(c)||e.push(c),r.includes(c.id)||r.push(c.id))}),z(e),A(t),O(o),N(r),S(a)}},[F,_e]=d.exports.useState(R),[V,be]=d.exports.useState(R);d.exports.useState(!1),d.exports.useState(!1),d.exports.useState(0),d.exports.useState(0);const[v,j]=d.exports.useState([]),[Y,ge]=d.exports.useState([]);d.exports.useState({id:0,nombre:""});const[p,Z]=d.exports.useState([]),[w,ee]=d.exports.useState([]);d.exports.useState([]),d.exports.useState(!1);const M=i=>{v.includes(i)?j(v.filter(o=>o!=i)):j([...v,i]);const e=new RegExp(i,"i");V.filter(function(o){if(e.test(o.id_padre_sub_categoria))return o}).forEach(o=>{if(!w.includes(o))w.push(o);else{const a=w.filter(r=>r.id_padre_sub_categoria!=i);ee(a)}})},D=i=>{var e=[];p.forEach(a=>{e.push(a)});var t=F.filter(a=>a.id_padre_sub_categoria==i.id&&a.id_abuelo_sub_categoria==null);if(t.length>0){if(!e.includes(i.id))e.push(i.id);else{const a=e.indexOf(i.id);a>-1&&e.splice(a,1)}t.forEach(a=>{const r=F.filter(n=>n.id_padre_sub_categoria==a.id);if(!p.includes(a.id))e.push(a.id),r.forEach(n=>{if(!p.includes(n.id))e.push(n.id);else{const m=e.indexOf(n.id);m>-1&&e.splice(m,1)}});else{const n=e.indexOf(a.id);n>-1&&e.splice(n,1),r.forEach(m=>{const c=e.indexOf(m.id);c>-1&&e.splice(c,1)})}Z(e)})}else{var o=F.filter(a=>a.id_padre_sub_categoria==i.id);if(o.length>0){if(!e.includes(i.id))e.push(i.id);else{const a=e.indexOf(i.id);a>-1&&e.splice(a,1)}o.forEach(a=>{if(!p.includes(a.id))e.push(a.id);else{const r=e.indexOf(a.id);r>-1&&e.splice(r,1)}setchecksTipoCompras(e)})}else{if(!e.includes(i.id))e.push(i.id);else{const a=e.indexOf(i.id);a>-1&&e.splice(a,1)}setchecksTipoCompras(e)}}},[ie,H]=d.exports.useState(!0),[se,$]=d.exports.useState(!1),[ae,B]=d.exports.useState(!1),[ce,de]=d.exports.useState(!1);d.exports.useEffect(()=>{B(!1)},[]),d.exports.useEffect(()=>{$(!1)},[]),d.exports.useEffect(()=>{de(!1)},[]);const te=()=>{H(!1),B(!0),$(!0)},oe=()=>{H(!0),B(!1),$(!1)};return l(u,{children:[s(re,{position:"bottom-start",children:s(le,{onClose:()=>q(!1),show:U,delay:3e3,autohide:!0,children:l("div",{className:`notification-toast ${y=="icon-error"?"error":"success"}`,children:[s("span",{className:`toast-icon ${y=="icon-error"?"toast-danger":"toast-success"}`,children:s("span",{className:y})}),s("p",{className:"title",children:G}),s("button",{type:"button",className:"icon-close m-auto",onClick:()=>q(!1)})]})})}),s("div",{className:"contenedor-planes",children:l("div",{className:"bg-white overflow-auto w-full text-center margen-superior custom-scroll",children:[l("h2",{className:"perfiles-titulos crear",children:[s("span",{className:"c-verde",children:"Crea"})," tu primer perfil de negocio"]}),s("div",{className:"container mt-4",children:s("div",{className:"tree_categorias tree_1",children:l("div",{className:"tree_categorias__busqueda mb-3 mb-md-4",children:[l("div",{className:"perfil-guias__indicador perfil-guias__indicador--activo",children:[s("i",{className:"icon-Paso-1-click"})," ",s("span",{children:"Actividad económica"}),s("i",{className:"icon-Paso-2-click",id:"pleft2"})," ",s("span",{children:"Tipo de compra"}),s("i",{className:"icon-Paso-3-click",id:"pleft2"})," ",s("span",{children:"Localizaciones"})]}),l("div",{className:"mx-60 mt-30 d-flex",children:[s("button",{type:"button",className:"icon-Buscar-click"}),s("input",{type:"text",placeholder:"Busca por actividad económica o UNSPSC",autoComplete:"off",className:"form-control busqueda-input",onKeyDown:X}),l("h2",{className:"perfiles-titulos d-flex",children:[" Pais de contratación",s("img",{className:"bandera",src:"/public/images/banderas/listado_nombres/CHL.svg",alt:"Bandera Chile"})]})]}),s("br",{}),s(u,{children:ie&&s("ul",{className:"tree-root",children:P.map(i=>s(u,{children:i.id_padre_sub_categoria==null&&l("li",{className:`tree-node has-child draggable ${f.includes(i.id)?"expanded":""}`,id:"sector_"+i.id,children:[l("div",{id:i.id,className:"tree-content mt-3 sector",children:[s("i",{className:`tree-arrow has-child ${i.childs.length>0?"bi bi-chevron-down":""}`}),s("input",{type:"checkbox",name:"actividad_economica",onChange:()=>T(i),checked:k.includes(i.id)?"checked":""}),s("span",{className:"tree-anchor",children:s("span",{className:"tree-division tree-division1",onClick:()=>Q(i.id),children:s("span",{className:"tree-division__title my-auto",children:i.nombre})})})]},i.id),f.includes(i.id)&&s("ul",{className:"tree-children new-class",children:C.map((e,t)=>s(u,{children:i.id==e.id_padre_sub_categoria&&l("li",{className:`tree-node has-child draggable segmento ${_.includes(e.id)?"expanded":""}`,id:"segmento_"+e.id,children:[l("div",{className:"tree-content segmento",children:[s("i",{className:"tree-arrow has-child ltr"}),s("input",{type:"checkbox",name:"actividad_economica",onChange:()=>T(e),checked:k.includes(e.id)?"checked":""}),s("span",{className:"tree-anchor",children:s("span",{className:"tree-division tree-division1",onClick:()=>W(e.id),children:s(u,{children:t%2==0?s("span",{className:"tree-division__title my-auto",children:e.nombre}):s("span",{className:"tree-division__title-gray my-auto",children:e.nombre})})})})]}),_.includes(e.id)&&s("ul",{className:"tree-children actividad-economica",children:E.map((o,a)=>s(u,{children:e.id==o.id_padre_sub_categoria&&s("li",{className:"tree-node draggable",children:l("div",{className:"tree-content actividad-economica",onClick:()=>T(o),children:[s("input",{type:"checkbox",name:"actividad_economica",onChange:()=>T(o),checked:k.includes(o.id)?"checked":""}),s("span",{className:"tree-anchor children",children:s("span",{className:"tree-division tree-division1",children:s(u,{children:s("span",{className:"tree-division__title my-auto",children:o.nombre})})})})]})})}))})]})}))})]})}))})}),s(u,{children:ae&&s("ul",{className:"tree-root",children:V.map(i=>s(u,{children:i.id_padre_sub_categoria==null&&l("li",{className:`tree-node has-child draggable ${v.includes(i.id)?"expanded":""}`,id:"sector_"+i.id,children:[l("div",{id:i.id,className:"tree-content mt-3 sector",children:[s("i",{className:`tree-arrow has-child ${i.childs.length>0?"bi bi-chevron-down":""}`}),s("input",{type:"checkbox",name:"tipo_compras",onChange:()=>D(i),checked:p.includes(i.id)?"checked":""}),s("span",{className:"tree-anchor",children:s("span",{className:"tree-division tree-division1",onClick:()=>M(i.id),children:s("span",{className:"tree-division__title my-auto",children:i.nombre})})})]},i.id),v.includes(i.id)&&s("ul",{className:"tree-children new-class",children:w.map((e,t)=>s(u,{children:i.id==e.id_padre_sub_categoria&&s("li",{className:`tree-node has-child draggable segmento ${Y.includes(e.id)?"expanded":""}`,id:"segmento_"+e.id,children:l("div",{className:"tree-content segmento",children:[s("i",{className:"tree-arrow has-child ltr"}),s("input",{type:"checkbox",name:"actividad_economica",onChange:()=>D(e),checked:p.includes(e.id)?"checked":""}),s("span",{className:"tree-anchor",children:s("span",{className:"tree-division tree-division1",onClick:()=>M(e.id),children:s(u,{children:t%2==0?s("span",{className:"tree-division__title my-auto",children:e.nombre}):s("span",{className:"tree-division__title-gray my-auto",children:e.nombre})})})})]})})}))})]})}))})}),s(u,{children:ce&&s("ul",{className:"tree-root",children:s("p",{children:"Paso 3"})})})]})})}),l("div",{className:"perfil-bottons-footer position-relative text-center mt-4",children:[s("a",{onClick:te,className:"btn btnRadius btn-new-blue",children:s("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Siguiente"})}),s(u,{children:se&&s("a",{onClick:oe,className:"btn btnRadius btn-new-blue",children:s("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Volver"})})})]})]})})]})};export{Pe as default};
