import{r as s,u as q,j as o,a as e,H as A}from"./app-0d6b3333.js";import{A as j}from"./AuthenticatedLayout-32f69214.js";import{T as k,a as z}from"./estilos-toast-fe3a8adc.js";/* empty css                 *//* empty css                      */import{F as a}from"./Form-840ee1e8.js";import"./transition-2a85b662.js";import"./Nav-43b4168e.js";import"./useWindow-04a87982.js";import"./mergeOptionsWithPopperConfig-4e193306.js";import"./module-14843ab2.js";import"./Button-7bc3e9ed.js";import"./useTimeout-1ed88763.js";import"./useWillUnmount-9cd78d8a.js";import"./index-67732e07.js";import"./ElementChildren-d2ed8c13.js";const ee=({auth:d,actividades_economicas:u,solo_sectores:p})=>{const[h,l]=s.exports.useState(!1),[f,b]=s.exports.useState(""),{data:g,setData:n,post:N,processing:D,reset:v,errors:i}=q({id:"",nombre:"",sector:"",segmento:"",tipo_categoria:3}),[S,R]=s.exports.useState(u),[x,E]=s.exports.useState(p),[G,w]=s.exports.useState([]),[C,_]=s.exports.useState(!1),y=t=>{const r=document.querySelectorAll(".sector")[0].value;console.log(r);const c=t.currentTarget;if(_(!0),r=="Selecciona una región"){t.preventDefault(),t.stopPropagation(),document.querySelectorAll("select.sector.form-select")[0].classList.add("failed");return}c.checkValidity()===!1?(t.preventDefault(),t.stopPropagation()):(t.preventDefault(),N(route("storeLocalizacion"),{onSuccess:()=>v()}))};s.exports.useEffect(()=>{if(Object.entries(i).length>0){var t=Object.values(i),r="";t.map(c=>r+=c),b(r),l(!0)}},[i]);const L=t=>{document.querySelectorAll("select.sector.form-select")[0].classList.remove("failed"),n("sector",t.target.value);var r=t.target.value;const c=r,F=new RegExp(c,"i"),T=S.filter(function(m){if(F.test(m.id_padre_sub_categoria))return m});w(T)};return o(j,{auth:d,children:[e(A,{title:"Localización"}),e(k,{position:"bottom-start",children:e(z,{onClose:()=>l(!1),show:h,delay:3e5,autohide:!0,children:o("div",{className:"notification-toast error",children:[e("span",{className:"toast-icon toast-danger",children:e("span",{className:"icon-error"})}),e("p",{className:"title",children:f}),e("button",{type:"button",className:"icon-close m-auto",onClick:()=>l(!1)})]})})}),e("div",{className:"contenedor-planes",children:o("div",{className:"bg-white overflow-auto w-full text-center margen-superior",children:[e("h2",{className:"name_section_app",children:"Crear Localización"}),e("div",{className:"container mt-4",children:o(a,{id:"form",name:"form",noValidate:!0,validated:C,onSubmit:y,children:[o(a.Group,{className:"row",children:[e("div",{className:"col-12 col-sm-4",children:e(a.Label,{htmlFor:"",for:"validationInput",className:"bloque__registro-form-title-label",children:"Región"})}),e("div",{className:"col-12 col-sm-8",children:o(a.Select,{name:"sector",className:"sector",onChange:L,children:[e("option",{children:"Selecciona una región"}),x.map(t=>e("option",{value:t.id,children:t.nombre}))]})})]}),o(a.Group,{className:"row mt-3",children:[e("div",{className:"col-12 col-sm-4",children:e(a.Label,{htmlFor:"",for:"validationInput",className:"bloque__registro-form-title-label",children:"Nombre de la comuna o ciudad"})}),e("div",{className:"col-12 col-sm-8",children:e(a.Control,{type:"text",placeholder:"Nombre de la comuna o ciudad",value:g.nombre,onChange:t=>n("nombre",t.target.value),className:"actividad-economica",required:!0})})]}),o(a.Group,{className:"mt-4",children:[e("button",{type:"submit",className:"btn btnRadius btn-new-blue mr-2",children:"Crear"}),e("a",{href:route("indexLocalizacion"),className:"btn btnRadius btn-new-red ml-2",children:"Cancelar"})]})]})})]})})]})};export{ee as default};
