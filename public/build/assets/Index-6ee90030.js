import{r as t,j as o,a as e,F as N}from"./app-33cf679f.js";import{A as ve,N as xe,D as P}from"./AuthenticatedLayout-b02ee238.js";/* empty css                 */import{F as n,D as Se,C as r,B as f}from"./primeicons-4739f022.js";import"./OverlayTrigger-aa0350c5.js";import{A as v}from"./ActividadEconomica-0ec74ddf.js";/* empty css               */import{M as _,e as Ce}from"./Nav-f9ea1a86.js";import"./InputError-5138027e.js";import"./hasClass-a8bf9ba5.js";import"./mergeOptionsWithPopperConfig-ea7f6174.js";import"./module-91844979.js";import"./Button-697637e2.js";/* empty css                      */import"./useTimeout-97d352bf.js";const $e=({auth:B,contratos:d})=>{const[l,M]=t.exports.useState(d),[x,F]=t.exports.useState(l.last_page+1),[I,L]=t.exports.useState(0),m=(a,s)=>{axios.get(s+"&type=fetch").then(c=>{M(c.data),L(c.data.current_page-1),F(l.last_page+1)}).catch(c=>{console.log(c)})};t.exports.useState(""),t.exports.useState(d.data),t.exports.useState(!0),t.exports.useState(0);const[ye,j]=t.exports.useState(0),[we,R]=t.exports.useState(0);t.exports.useEffect(()=>{document.getElementById("div1");var a=document.getElementById("tabla");document.getElementById("wrapper1");var s=document.getElementById("scroll-table");a&&j(a.offsetWidth),s&&R(s.offsetWidth);var c=document.getElementById("wrapper1"),i=document.querySelector("#scroll-table");c&&(c.onscroll=function(){i.scrollLeft=c.scrollLeft}),i&&(i.onscroll=function(){c.scrollLeft=i.scrollLeft})}),t.exports.useState(d.to),t.exports.useState(d.from),t.exports.useState(d.total),t.exports.useState(d.next_page_url),t.exports.useState(d.prev_page_url);const[Ee,z]=t.exports.useState(""),[Te,D]=t.exports.useState("");t.exports.useState(10),d.data.length,t.exports.useRef(0),t.exports.useEffect(()=>{const a=window.location.search,s=new URLSearchParams(a),c=s.get("fecha_publicacion");c!=null&&D(c);const i=s.get("buscador_rapido");i!=null&&z(i)},[]);const[V,ke]=t.exports.useState(!1);t.exports.useState(!1);const h=t.exports.useRef(null),W=()=>{h.current&&h.current.reset()};t.exports.useState(d.data);const[S,H]=t.exports.useState({global:{value:null,matchMode:n.CONTAINS},"fuente.alias_portal":{value:null,matchMode:n.STARTS_WITH},entidad_contratante:{value:null,matchMode:n.STARTS_WITH},objeto:{value:null,matchMode:n.STARTS_WITH},valor:{value:null,matchMode:n.STARTS_WITH},modalidad:{value:null,matchMode:n.CONTAINS},codigo_proceso:{value:null,matchMode:n.EQUALS},estado_proceso:{value:null,matchMode:n.EQUALS},fecha_publicacion:{value:null,matchMode:n.EQUALS},ubicacion:{value:null,matchMode:n.EQUALS},actividad_economica:{value:null,matchMode:n.EQUALS}});t.exports.useState(["No","Si"]),t.exports.useState([{name:"editar",text:"Editar perfil",icon:"icon-Editar icon-pd-editar",modal:"modalEditarPerfil"},{name:"eliminar",text:"Eliminar perfil",icon:"icon-Eliminar icon-pd-eliminar",modal:"modalEliminarPerfil"},{name:"duplicar",text:"Duplicar perfil",icon:"icon-Duplicar icon-pd-duplicar",modal:"modalDuplicarPerfil"},{name:"leidos",text:"Marcar como leídos",icon:"icon-Leidos icon-pd-leidos",modal:"modalLeidosPerfil"},{name:"info",text:"Ver más información",icon:"icon-Informacin-click icon-pd-info",modal:"modalInformacionPerfil"}]);const q=a=>e(N,{children:e("div",{className:"VueTables__selecciones-filter-wrapper",children:e("span",{children:e("div",{className:"selecciones-nuevo-diseno",children:o("button",{id:"limpiar",type:"button",className:"icon-Limpiar-click borrador-grid",onClick:W,children:[e("span",{className:"path1"}),e("span",{className:"path2"}),e("span",{className:"path3"}),e("span",{className:"path4"}),e("span",{className:"path5"}),e("span",{className:"path6"}),e("span",{className:"path7"}),e("span",{className:"path8"})]})})})})}),[U,C]=t.exports.useState(null),y=t.exports.useRef(null),O=a=>{y.current.show({severity:"info",summary:"Product Expanded",detail:a.data.actividad_economica,life:3e3})},$=a=>{y.current.show({severity:"success",summary:"Product Collapsed",detail:a.data.actividad_economica,life:3e3})},Q=()=>{let a={};l.data.forEach(s=>a[`${s.id}`]=!0),C(a)};t.exports.useEffect(()=>{Q()},[]);const G=a=>o("span",{className:"div_iconos_functions_grid",children:[o("a",{className:"btnVerDocumentos d-inline-flex align-items-center",children:[e("i",{className:"icon-Ver-documentos"}),e("span",{children:"Ver documentos"}),e("i",{className:"icon-Siguiente1"})]}),o("div",{id:"iconos_functions_8103864",className:"iconos_functions_grid iconos_acciones_contratos",children:[e("div",{class:"custom-tooltip yellow","data-tooltip":"Agregar A Favoritos",children:e("button",{id:"btnContratosFavorito-8103864",type:"button",className:"icon-Favorito-click btn_contratos_favoritos"})}),e("div",{class:"custom-tooltip green","data-tooltip":"Agregar A Seguimientos",children:o("button",{id:"btnContratosSeguimiento-8103864",type:"button",className:"btn_contratos_seguimientos icon-Seguimientos",children:[e("span",{className:"path1"}),e("span",{className:"path2"}),e("span",{className:"path3"})]})}),e("div",{class:"custom-tooltip blue","data-tooltip":"Agregar A Carpeta(S)",children:o("button",{id:"btnContratosCarpeta-8103864",type:"button",className:"icon-Mis-carpetas btn_contratos_carpeta d-inline-flex",children:[e("span",{className:"path1"}),e("span",{className:"path2"})]})}),e("div",{class:"custom-tooltip red","data-tooltip":"Agregar A Papelera",children:e("button",{id:"btnContratosDelete-8114846",type:"button",class:"icon-Eliminar btn_contratos_delete"})}),e("div",{class:"custom-tooltip dark","data-tooltip":"Ir A La Fuente",children:e("button",{id:"btnContratosExternal-8103864",className:"icon-Ir-a-la-fuente-click btn_contratos_external"})}),e("div",{class:"custom-tooltip purple","data-tooltip":"Compartir",children:e("button",{id:"btnContratosCompartir-8103864",className:"icon-Compartir-click btn_contratos_compartir"})}),e("div",{class:"custom-tooltip gray","data-tooltip":"Crear Primer Nota",children:e("button",{id:"btnContratoNotas-8103864",className:"btn_contratos_notas custom-tooltip gray",children:e("img",{src:"/public/images/notas/nota.svg",alt:"Nota",className:"without-notes"})})})]}),o("button",{type:"button",className:"btnRadius ver-menos-detalle",style:{display:"none"},children:["Ver menos",e("i",{className:"icon-Desplegar-click"})]})]}),[K,J]=t.exports.useState(null),[X,Ae]=t.exports.useState(!0),Y=a=>e(N,{children:e("span",{className:"icon_tipo_secop",children:e("i",{className:"icono_fuente__list",children:a.fuente.alias_portal})})}),Z=a=>e("div",{className:"content_ver_mas_grid entidad_grid",children:e("p",{className:"span_grid",children:a.entidad_contratante})}),ee=a=>e("div",{className:"content_ver_mas_grid objeto_grid",children:e("p",{className:"objeto_grid_p",children:o("span",{className:"objeto_grid_span",children:[e("span",{className:"tt-uppercase",children:a.objeto}),o("a",{className:"vermas text-right mr-0 mt-0",children:["Ver más",e("i",{className:"icon-Desplegar"})]})]})})}),ae=a=>o("span",{className:"valor_range--estandar d-flex justify-content-center",children:[e("i",{className:"valor_range__moneda sin-min-width",children:"$"}),a.valor]}),te=a=>e("span",{style:{fontFamily:"Nexa-bold",color:"rgb(115, 201, 20)"},children:a.estado_proceso}),oe=a=>e("div",{className:"content_ver_mas_grid ubicaciones_grid",children:e("p",{className:"scroll_fit",children:e("span",{children:e("span",{children:a.ubicacion})})})}),b=a=>e("input",{type:"text",className:"p-inputtext p-component p-column-filter column_ver_mas columna_actividad rounded_right",placeholder:"Seleccionar",onClick:()=>ce(a.field),onInput:s=>{h.current.filter(s.target.value,"actividad_economica","contains")}}),[se,w]=t.exports.useState(!1),[p,le]=t.exports.useState(""),E=()=>w(!1),ce=a=>{le(a),w(!0)},[ie,ne]=t.exports.useState([]),[re,de]=t.exports.useState([]),[pe,ue]=t.exports.useState([]),[me,T]=t.exports.useState([]),[he,k]=t.exports.useState([]),[fe,A]=t.exports.useState([]);t.exports.useEffect(()=>{async function a(){try{const u=await(await fetch("/actividades-economicas/json")).json();ne(u)}catch(i){console.log("Solicitud fallida",i)}}a();async function s(){try{const u=await(await fetch("/localizacion/json")).json();ue(u)}catch(i){console.log("Solicitud fallida",i)}}s();async function c(){try{const u=await(await fetch("/tiposcompras/json")).json();de(u)}catch(i){console.log("Solicitud fallida",i)}}c()},[]);const g=(a,s)=>{switch(s){case"ActividadEconomica":a.length>0?T(a):T([]);break;case"Localizaciones":a.length>0?k(a):k([]);break;case"TiposCompras":a.length>0?A(a):A([]);break}},[_e,be]=t.exports.useState(""),ge=a=>{const s=a.target.value;let c={...S};c.global.value=s,H(c),be(s)},Ne=(()=>e("div",{className:"m-0 w-100",children:o("div",{className:"text-left reloadTable row",style:{margin:0+"px"},children:[e("div",{id:"top-botones",className:"mb-2 mb-lg-0",children:o("div",{className:"franja-busqueda-rapida",children:[o("div",{className:"input-busqueda-rapida",children:[e("input",{value:_e,onChange:ge,type:"text",name:"rapida",placeholder:"Búsqueda rápida",className:"form-control"}),e("button",{type:"button",className:"submit-busqueda-rapida icon-Buscar-click"})]}),e("div",{className:"select-busqueda-rapida ml-4",children:e(Ce,{id:"dropdown-filtro-nuevos",children:o(xe,{id:"dropdown-filtro",className:"nav-link pl-0",title:e(N,{children:o("span",{className:"ver-filtros",children:[e("span",{className:"mr-2 visualizar",children:"Visualizar:"}),o("span",{className:"text-ver-filtros d-inline-flex pl-3 bg-white",children:[e("span",{className:"align-self-center d-inline-flex iconOrdenamientoGrid",children:e("span",{className:"icon-Todos"})}),e("span",{className:"text-ver-filtros__text text-left",children:"Todos"})]})]})}),children:[o(P.Item,{href:"#",className:"dropdown-item",children:[e("span",{className:"icon-options-order",children:e("span",{className:"icon-Vistos-recientemente"})}),e("span",{className:"text-options-order",children:"Vistos recientemente"})]}),o(P.Item,{href:"#",className:"dropdown-item",children:[e("span",{className:"icon-options-order",children:e("span",{className:"icon-Contratos"})}),e("span",{className:"text-options-order",children:"Notas creadas"})]})]})})})]})}),e("div",{className:"col-12 col-lg-7 col-xl-6 p-0 paginacion_grid text-right text-lg-right ",children:o("span",{className:"paginator",children:[e(f,{disabled:l.prev_page_url===null,icon:"pi pi-angle-double-left",onClick:()=>m(0,l.first_page_url)}),e(f,{disabled:l.prev_page_url===null,icon:"pi pi-angle-left",onClick:()=>m(l.current_page-1,l.prev_page_url)}),e(f,{disabled:l.next_page_url===null,icon:"pi pi-angle-right",onClick:()=>m(l.current_page+1,l.next_page_url)}),e(f,{disabled:l.next_page_url===null,icon:"pi pi-angle-double-right",onClick:()=>m(5,l.last_page_url)}),e("span",{className:"p-paginator-current",children:`${l.from} - ${l.to} de ${l.total}`})]})})]})}))();return o(ve,{auth:B,page:"contratos",children:[e("div",{className:"content_not_blank_interno",children:e("div",{id:"bodycontenido",className:"col contratos_row px-0",children:o(Se,{ref:h,value:l.data,rows:x,dataKey:"id",filters:S,filterDisplay:"row",loading:V,globalFilterFields:["fuente.alias_portal","entidad_contratante","objeto","valor","modalidad","codigo_proceso","estado_proceso","fecha_publicacion","ubicacion","actividad_economica"],emptyMessage:"No se encontraron registros",expandedRows:U,onRowToggle:a=>C(a.data),onRowExpand:O,onRowCollapse:$,rowExpansionTemplate:G,header:Ne,selectionMode:X?null:"checkbox",selection:K,onSelectionChange:a=>J(a.value),first:I*x,children:[e(r,{selectionMode:"multiple",className:"columna_seleccion columna_pequena",filter:!0,filterElement:q}),e(r,{field:"fuente.alias_portal",header:"Portal",filter:!0,filterPlaceholder:"Todos",className:"rounded_left columna_tipo_secop",body:Y}),e(r,{field:"entidad_contratante",header:"Entidad",filter:!0,filterPlaceholder:"Buscar",className:"columna_entidad columna_120",body:Z}),e(r,{field:"objeto",header:"Obejto",filter:!0,filterPlaceholder:"Buscar",className:"objeto_columna",body:ee}),e(r,{field:"valor",header:"Cuantía",filter:!0,filterPlaceholder:"Buscar",className:"rangedropdown columna_120 columna_cuantia",body:ae}),e(r,{field:"modalidad",header:"Modalidad",filter:!0,filterPlaceholder:"Seleccionar",className:"columna_100 columna_modalidad",filterElement:b}),e(r,{field:"codigo_proceso",header:"Número",filter:!0,filterPlaceholder:"Buscar",className:"columna_numero"}),e(r,{field:"estado_proceso",header:"Estado",filter:!0,filterPlaceholder:"Buscar",className:"columna_estado",body:te}),e(r,{field:"fecha_publicacion",header:"Publicada",filter:!0,filterPlaceholder:"Buscar",className:"columna_fecha"}),e(r,{field:"ubicacion",header:"Ubicación",filter:!0,filterPlaceholder:"Seleccionar",className:"columna_ubicacion",body:oe,filterElement:b}),e(r,{field:"actividad_economica",header:"Actividad Económica",filter:!0,filterElement:b})]})})}),o(_,{show:se,onHide:E,id:"modal_actividades",children:[o(_.Header,{children:[p=="actividad_economica"&&e("h4",{class:"modal-title",children:"Selecciona la(s) actividad(es) económica(s) de tu interés."}),p=="modalidad"&&e("h4",{class:"modal-title",children:"Selecciona la modalidad."}),p=="ubicacion"&&e("h4",{class:"modal-title",children:"Selecciona la ubicación."}),e("button",{type:"button","aria-label":"Close",class:"close icon-Cerrar-modal",onClick:E})]}),o(_.Body,{children:[p=="actividad_economica"&&e(v,{subcategorias:ie,nameBuscador:"Busca por actividad económica o UNSPSC",onHandleSectores:g,tipo:"ActividadEconomica",checkeds:me}),p=="modalidad"&&e(v,{subcategorias:re,nameBuscador:"Buscar Tipo de Compra",onHandleSectores:g,tipo:"TiposCompras",checkeds:fe}),p=="ubicacion"&&e(v,{subcategorias:pe,nameBuscador:"Buscar Localización",onHandleSectores:g,tipo:"Localizaciones",checkeds:he})]}),e(_.Footer,{children:e("button",{type:"button",class:"btnRadius btn-new-green",children:"Seleccionar"})})]})]})};export{$e as default};
