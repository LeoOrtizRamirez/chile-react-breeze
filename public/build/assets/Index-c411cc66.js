import{r,j as o,a as e,H as W,F as v}from"./app-4ecf8c6d.js";import{A as X}from"./AuthenticatedLayout-bdf8ae71.js";/* empty css                      */import{N as M,M as g}from"./Modal-2138aab5.js";import{T as Y,a as Z}from"./estilos-toast-0141a8d3.js";import"./font-unicolor-9944fc4e.js";import"./ApplicationLogo-a09b91e4.js";import"./ApplicationLogoLici-34bcde98.js";import"./transition-e4898b18.js";import"./createWithBsPrefix-aa282c06.js";import"./hasClass-ba563d69.js";import"./useTimeout-3c99982e.js";const he=({auth:$,tiposcompras:H})=>{const[L,m]=r.exports.useState(!1),[q,T]=r.exports.useState(""),[S,b]=r.exports.useState(""),[d,ee]=r.exports.useState(H),[w,I]=r.exports.useState(H);r.exports.useState(!1),r.exports.useState(!1),r.exports.useState(0);const[ie,A]=r.exports.useState(0),[f,_]=r.exports.useState([]),[N,C]=r.exports.useState([]),[p,R]=r.exports.useState({id:0,nombre:""}),[h,x]=r.exports.useState([]),[k,y]=r.exports.useState([]),[O,E]=r.exports.useState(!1),F=()=>E(!1),K=()=>{p.id!=0?E(!0):(T("Debes seleccionar un tipo de compra"),b("icon-error"),m(!0))},z=()=>{p.id!=0?window.location.replace("/tiposcompras/"+p.id+"/edit"):(T("Debes seleccionar un tipo de compra"),b("icon-error"),m(!0))},G=i=>{f.includes(i)?_(f.filter(t=>t!=i)):_([...f,i]);const a=new RegExp(i,"i");w.filter(function(t){if(a.test(t.id_padre_sub_categoria))return t}).forEach(t=>{if(!h.includes(t))h.push(t);else{const u=h.filter(l=>l.id_padre_sub_categoria!=i);x(u)}})},J=i=>{N.includes(i)?C(N.filter(t=>t!=i)):C([...N,i]);const a=new RegExp(i,"i");w.filter(function(t){if(a.test(t.id_padre_sub_categoria))return t}).forEach(t=>{if(!k.includes(t))k.push(t);else{const u=k.filter(l=>l.id_padre_sub_categoria!=i);y(u)}}),A(i)},j=i=>{R(i)},P=i=>{if(i.target.value==""){I(d),x([]),y([]),_([]),C([]);return}if(i.key==="Enter"){const U=new RegExp(i.target.value,"i"),V=d.filter(function(s){if(U.test(s.nombre))return s});var a=[],c=[],t=[],u=[],l=[];V.forEach(s=>{s.id_padre_sub_categoria!=null&&(t.push(s),u.push(s.id_padre_sub_categoria),c.push(d.filter(n=>n.id==s.id_padre_sub_categoria)[0]),l.push(s.id_abuelo_sub_categoria)),s.id_padre_sub_categoria!=null&&(c.includes(s)||c.push(s),l.includes(s.id_padre_sub_categoria)||l.push(s.id_padre_sub_categoria)),s.id_padre_sub_categoria==null&&a.push(s)});var B=null,D=null;t.forEach(s=>{B=d.filter(n=>n.id==s.id)[0],D=d.filter(n=>n.id==s.id_padre_sub_categoria)[0],a.includes(B)||a.push(d.filter(n=>n.id==s.id_padre_sub_categoria)[0]),c.includes(D)||a.push(d.filter(n=>n.id==s.id_padre_sub_categoria)[0])}),I(a),x(c),y(t),_(l),C(u)}},Q=()=>{fetch("/tiposcompras/"+p.id+"/delete").then(i=>i.json()).then(i=>{if(i.type=="Success"){b("icon-check");var a=h.filter(c=>c.id!=p.id);x(a),R({id:0,nombre:""})}else b("icon-error");T(i.message),m(!0),E(!1)})};return o(X,{auth:$,children:[e(W,{title:"Tipos Compras"}),e(Y,{position:"bottom-start",children:e(Z,{onClose:()=>m(!1),show:L,delay:3e3,autohide:!0,children:o("div",{className:`notification-toast ${S=="icon-error"?"error":"success"}`,children:[e("span",{className:`toast-icon ${S=="icon-error"?"toast-danger":"toast-success"}`,children:e("span",{className:S})}),e("p",{className:"title",children:q}),e("button",{type:"button",className:"icon-close m-auto",onClick:()=>m(!1)})]})})}),e("div",{className:"contenedor-planes",children:o("div",{className:"bg-white overflow-auto w-full text-center margen-superior",children:[e("h2",{className:"name_section_app",children:"Tipos Compras"}),o("div",{className:"container mt-4",children:[e("div",{className:"tree_categorias tree_1",children:e("div",{className:"tree_categorias__busqueda mb-3 mb-md-4",children:o("div",{className:"mx-auto",children:[e("input",{type:"text",placeholder:"Buscar tipo de compra",autoComplete:"off",className:"form-control m-auto",onKeyDown:P}),e("i",{className:"icon-Cancelar"}),e("button",{type:"button",className:"icon-Buscar-click",children:e("i",{className:"bi bi-search"})}),e("br",{}),o("div",{className:"botones",children:[e(M.Link,{href:route("createTiposCompras"),className:"flex  ml-4 text-probar ",children:e("i",{className:"bi bi-plus-square-fill"})}),e(M.Link,{onClick:z,className:"flex  ml-4 text-probar ",children:e("i",{className:"bi bi-pencil-fill"})}),e(M.Link,{onClick:K,className:"flex  ml-4 text-probar ",children:e("i",{className:"bi bi-trash3"})})]}),w.map(i=>e(v,{children:i.id_padre_sub_categoria==null&&o(v,{children:[o("div",{id:i.id,className:"tree-content mt-3 sector",onClick:()=>G(i.id),children:[e("i",{className:`tree-arrow has-child ${i.childs.length>0?"bi bi-chevron-down":""}`}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",children:e("span",{className:"tree-division__title my-auto",children:i.nombre})})})]},i.id),f.includes(i.id)&&e("ul",{className:"tree-children",children:h.map((a,c)=>e(v,{children:i.id==a.id_padre_sub_categoria&&o("li",{"data-id":"20504",className:"tree-node has-child expanded draggable",onClick:()=>j(a),children:[o("div",{className:"tree-content segmento",onClick:()=>J(a.id),children:[e("i",{className:"tree-arrow expanded has-child ltr"}),e("input",{type:"radio",name:"tipo_compra",onClick:()=>j(a),checked:a.id==p.id?"checked":""}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",children:e(v,{children:c%2==0?e("span",{className:"tree-division__title my-auto",children:a.nombre}):e("span",{className:"tree-division__title-gray my-auto",children:a.nombre})})})})]}),N.includes(a.id)]})}))})]})}))]})})}),o(g,{show:O,onHide:F,id:"removeTipoCompra",className:"modal-dialog-centered",children:[o(g.Header,{id:"removeTipoCompraHeader",children:[e("h5",{className:"modal-title",children:"Eliminar"}),e("button",{type:"button",className:"btn-close btn-close-white",onClick:F})]}),e(g.Body,{id:"removeTipoCompraBody",children:o("p",{children:["Desea eliminar el tipo de compra"," ",p.nombre,"?"]})}),o(g.Footer,{children:[e("button",{type:"submit",className:"btn btnRadius btn-new-blue mr-2",onClick:F,children:"Cancelar"}),e("button",{onClick:Q,className:"btn btnRadius btn-new-red ml-2",children:"Eliminar"})]})]})]})]})})]})};export{he as default};
