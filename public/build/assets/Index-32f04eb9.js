import{r,a as e,F as m,j as a}from"./app-1f730a05.js";import{A as V}from"./AuthenticatedLayout-869144d1.js";/* empty css                      */import{M as h}from"./Modal-bca58fb7.js";import"./estilos-toast-596aca95.js";import{F as t,D as W,C as d,T as q,a as O}from"./primeicons-c0807543.js";import{O as Q}from"./OverlayTrigger-c965f945.js";import"./transition-073612e7.js";import"./Nav-16fbfc68.js";import"./useWindow-c8f89660.js";import"./mergeOptionsWithPopperConfig-44f7d97e.js";import"./module-eadd49c1.js";import"./Button-906e9104.js";/* empty css                 */import"./useWillUnmount-6f439dfc.js";import"./index-67732e07.js";import"./hasClass-60accf37.js";import"./useTimeout-c5cdee0b.js";const he=({auth:C,grupos:y,created_updated:_})=>{const[s,S]=r.exports.useState({}),[N,p]=r.exports.useState(1);r.exports.useState(!0);const[b,v]=r.exports.useState(_),n=()=>v(!1),[l,P]=r.exports.useState(_?"modalCreateSuccess":""),T=(i,o)=>{P(i),v(!0),S(o)},f=r.exports.useRef(null),w=()=>{f.current&&f.current.reset()},u=i=>[...i||[]].map(o=>(o.envio_alertas==1?o.envio_alertas="Si":o.envio_alertas="No",o)),[E,g]=r.exports.useState(u(y)),[M,z]=r.exports.useState({global:{value:null,matchMode:t.CONTAINS},nombre_filtro:{value:null,matchMode:t.STARTS_WITH},descripcion_filtro:{value:null,matchMode:t.STARTS_WITH},limite_inferior_cuantia:{value:null,matchMode:t.STARTS_WITH},limite_superior_cuantia:{value:null,matchMode:t.STARTS_WITH},historico:{value:null,matchMode:t.CONTAINS},envio_alertas:{value:null,matchMode:t.EQUALS},status:{value:null,matchMode:t.EQUALS}}),[D,G]=r.exports.useState(!1),[R]=r.exports.useState(["No","Si"]),F=i=>a(m,{children:[e("div",{class:"columna_nombre--content-img",children:e("div",{class:"columna_nombre--img",children:e("img",{src:`${i.imagen_filtro}`})})}),e("span",{children:i.nombre_filtro})]}),[I,U]=r.exports.useState([{name:"editar",text:"Editar perfil",icon:"icon-Editar icon-pd-editar",modal:"modalEditarPerfil"},{name:"eliminar",text:"Eliminar perfil",icon:"icon-Eliminar icon-pd-eliminar",modal:"modalEliminarPerfil"},{name:"duplicar",text:"Duplicar perfil",icon:"icon-Duplicar icon-pd-duplicar",modal:"modalDuplicarPerfil"},{name:"leidos",text:"Marcar como leídos",icon:"icon-Leidos icon-pd-leidos",modal:"modalLeidosPerfil"},{name:"info",text:"Ver más información",icon:"icon-Informacin-click icon-pd-info",modal:"modalInformacionPerfil"}]),A=i=>e("div",{className:"iconos_functions_grid",children:I.map((o,c)=>e(Q,{rootClose:!0,overlay:e(q,{id:`tooltip-${o.name}-${i.id}`,className:`tooltip tooltip-${o.name}`,children:o.text}),children:e("button",{type:"button",id:`${o.name}-btn${i.id}`,className:`${o.icon}`,onClick:()=>T(o.modal,i)})},c))}),$=i=>e(O,{value:i.value,options:R,onChange:o=>i.filterApplyCallback(o.value),placeholder:"Seleccionar Notificaciones",className:"p-column-filter",showEditModalClear:!0}),B=i=>e("div",{className:"VueTables__selecciones-filter-wrapper",children:e("span",{children:e("div",{className:"selecciones-nuevo-diseno",children:a("button",{id:"limpiar",type:"button",className:"icon-Limpiar-click borrador-grid",onClick:w,children:[e("span",{className:"path1"}),e("span",{className:"path2"}),e("span",{className:"path3"}),e("span",{className:"path4"}),e("span",{className:"path5"}),e("span",{className:"path6"}),e("span",{className:"path7"}),e("span",{className:"path8"})]})})})}),L=r.exports.useRef(""),[k,x]=r.exports.useState(s.nombre_filtro);r.exports.useEffect(()=>{l=="modalDuplicarPerfil"&&(console.log("cargo modal"),x(s.nombre_filtro))},[b]);const j=()=>{var i={perfil:s.id,nombre_filtro:k},o=document.querySelector('meta[name="csrf-token"]');axios.post("/cliente/grupo/duplicar",{data:i},{headers:{Authorization:`Bearer ${o.content}`}}).then(c=>{g(u(c.data)),n()}).catch(c=>{console.log(c)})},H=()=>{var i={perfil:s.id},o=document.querySelector('meta[name="csrf-token"]');axios.post("/cliente/grupo/destroy",{data:i},{headers:{Authorization:`Bearer ${o.content}`}}).then(c=>{g(u(c.data)),n()}).catch(c=>{console.log(c)})};return e(m,{children:a(V,{auth:C,page:"grupos",children:[a("div",{className:"content_blank_interno margin_left_layout",children:[e("div",{className:"col",children:e("h2",{className:"name_seccion_app",children:"Administrar perfil (es) de negocio"})}),e("div",{className:"col",children:a("div",{id:"perfil-list",className:"",children:[a("div",{className:"tablescoop position-relative tablebordeada",children:[e("div",{className:"cargando_tables",style:{display:"none"},children:a("div",{className:"col",children:[e("img",{src:"https://col.licitaciones.info/img/loading.gif",className:"img-col"}),e("p",{children:"Cargando"})]})}),e("div",{className:"befor_table"}),a("div",{className:"VueTables VueTables--server",children:[e("div",{className:"row",children:a("div",{className:"col-md-12",children:[e("div",{className:"form-group form-inline float-left VueTables__search"}),e("div",{className:"form-group form-inline float-right VueTables__limit",children:e("div",{className:"m-0 w-100",children:a("div",{className:"text-left reloadTable row",style:{margin:0+"px !important;"},children:[a("div",{id:"top-botones",className:"mb-2 mb-lg-0",children:[e("a",{role:"button"}),a("a",{href:"/cliente/grupo/crear",role:"button",className:"btn btn-new-green btnRadius",children:[e("span",{className:"icon-Crear volver_icon"})," Crear perfil "]})]}),e("div",{className:"col-12 col-lg-7 col-xl-6 p-0 paginacion_grid text-center text-lg-right "})]})})})]})}),e("div",{className:"table-responsive",children:a(W,{ref:f,value:E,paginator:!0,rows:10,dataKey:"id",filters:M,filterDisplay:"row",loading:D,globalFilterFields:["name","representative.name","status"],emptyMessage:"No se encontraron registros",children:[e(d,{style:{maxWidth:600+"px"},filter:!0,className:"columna_seleccion columna_pequena",filterElement:B}),e(d,{field:"nombre_filtro",body:F,header:"Nombre",filter:!0,filterPlaceholder:"Buscar",className:"columna_nombre"}),e(d,{field:"descripcion_filtro",header:"Descripción",filter:!0,filterPlaceholder:"Buscar",className:"columna_grande"}),e(d,{field:"limite_inferior_cuantia",header:"Cuantia inferior",filter:!0,filterPlaceholder:"Buscar",className:"columna_promedio"}),e(d,{field:"limite_superior_cuantia",header:"Cuantia superior",filter:!0,filterPlaceholder:"Buscar",className:"columna_promedio"}),e(d,{field:"historico",header:"Histórico",filter:!0,filterPlaceholder:"Buscar",className:"columna_promedio"}),e(d,{field:"envio_alertas",header:"Notificaciones",showFilterMenu:!1,filter:!0,filterElement:$,className:"columna_notificaciones"}),e(d,{body:A,filter:!0,className:"v-hidden columna_acciones"})]})}),e("div",{className:"paginacion_grid"})]})]}),e("div",{})]})})]}),a(h,{show:b,onHide:n,animation:!0,id:l,centered:!0,children:[a(h.Header,{children:[l=="modalEditarPerfil"&&a("h4",{class:"modal-title title-dinamico",children:["¿ Qué paso(s) desea(s) ",e("span",{children:"editar"})," en tu perfil ?"]}),l=="modalEliminarPerfil"&&a("h4",{class:"modal-title",children:["¿Deseas ",e("b",{class:"text-rojo",children:"eliminar"})," el perfil de negocio?"]}),l=="modalDuplicarPerfil"&&a("h4",{class:"modal-title texto-dinamico",children:["¿Deseas ",e("span",{class:"color-blue",children:"duplicar"})," el perfil de negocio?"]}),l=="modalLeidosPerfil"&&e("h4",{class:"modal-title",children:"¿Deseas marcar como leídos los procesos de este perfil?"}),l=="modalInformacionPerfil"&&e("h4",{class:"modal-title",children:"Información general"}),l=="modalCreateSuccess"&&a(m,{children:[e("div",{class:"modal-save__img",children:e("img",{src:"https://col.licitaciones.info/img/usuario/perfiles/perfil-creado.png"})}),e("h4",{class:"modal-title",children:"Estamos configurando tu perfil de negocio."})]}),a("button",{type:"button","aria-label":"Close",class:"close icon-Cerrar-modal icon-Cerrar-modal-click",onClick:n,children:[e("span",{class:"path1"}),e("span",{class:"path2"})]})]}),a(h.Body,{children:[l=="modalEditarPerfil"&&a("div",{children:[e("label",{className:"perfil-checks",children:a("div",{className:"centrador",children:[e("i",{className:"perfil-checks__iconos icon-Paso-1-click"}),e("span",{className:"perfil-checks__title",children:"Editar actividad económica"}),e("input",{type:"radio",name:"radio",onChange:()=>p(1),checked:N==1}),e("span",{className:"perfil-checks__mark"})]})}),e("label",{className:"perfil-checks",children:a("div",{className:"centrador",children:[e("i",{className:"perfil-checks__iconos icon-Paso-2-click"}),e("span",{className:"perfil-checks__title",children:"Editar modalidad"}),e("input",{type:"radio",name:"radio",onChange:()=>p(2)}),e("span",{className:"perfil-checks__mark"})]})}),e("label",{className:"perfil-checks",children:a("div",{className:"centrador",children:[e("i",{className:"perfil-checks__iconos icon-Paso-3-click"}),e("span",{className:"perfil-checks__title",children:"Editar ubicación"}),e("input",{type:"radio",name:"radio",onChange:()=>p(3)}),e("span",{className:"perfil-checks__mark"})]})}),e("label",{className:"perfil-checks",children:a("div",{className:"centrador",children:[e("i",{className:"perfil-checks__iconos icon-Paso-4-click"}),e("span",{className:"perfil-checks__title",children:"Editar rangos de cuantía"}),e("input",{type:"radio",name:"radio",onChange:()=>p(4)}),e("span",{className:"perfil-checks__mark"})]})}),e("label",{className:"perfil-checks",children:a("div",{className:"centrador",children:[e("i",{className:"perfil-checks__iconos icon-Paso-5-click"}),e("span",{className:"perfil-checks__title",children:"Preferencias del perfil"}),e("input",{type:"radio",name:"radio",onChange:()=>p(5)}),e("span",{className:"perfil-checks__mark"})]})}),e("label",{className:"perfil-checks"})]}),l=="modalEliminarPerfil"&&a(m,{children:[e("p",{class:"modal-message",children:"Al aceptar esto el perfil se eliminará junto con el siguiente contenido, el cuál no se podrá recuperar:"}),e("hr",{}),a("div",{id:"modal-perfil",class:"d-flex",children:[a("div",{class:"info-sub principal",children:[e("h5",{children:"Información del perfil"}),a("div",{class:"contenedor",children:[e("img",{src:s.imagen_filtro,id:"img-perfil"}),e("span",{class:"nombreWeb",children:s.nombre_filtro})]})]}),a("div",{class:"info-sub secundario",children:[e("h5",{children:"Procesos almacenados"}),e("p",{class:"text-rojo",children:"0"})]})]})]}),l=="modalDuplicarPerfil"&&a("div",{class:"form-group modal-duplicar__input",children:[e("label",{class:"modal_save--label",children:" Dale un nombre a tu nuevo perfil:"}),e("input",{ref:L,type:"text",name:"nombre_duplicado",class:"form-control inputs_form padd-peq",value:k,onChange:i=>x(i.target.value)})]}),l=="modalLeidosPerfil"&&a("p",{class:"modal-message",children:["Todos los procesos contenidos en este perfil se marcarán como ",e("span",{class:"text-color",children:"leídos"}),"."]}),l=="modalInformacionPerfil"&&a(m,{children:[a("div",{className:"row modal-info__inicio text-center pb-3",children:[e("div",{className:"modal-info__logo",children:e("img",{src:s.imagen_filtro})}),e("div",{className:"modal-info__nombre",children:e("label",{children:s.nombre_filtro})})]}),a("div",{className:"row py-4",children:[e("div",{className:"col-7 col-md-6 modal-info__info",children:e("label",{children:"Fecha de creación:"})}),e("div",{className:"col-5 col-md-6 modal-info__info text-right",children:e("div",{className:"modal-info__data my-1",children:e("span",{children:new Date(s.created_at).toLocaleDateString("en-GB")})})}),e("div",{className:"col-5 modal-info__info",children:e("label",{children:"Número de actividades económicas:"})}),e("div",{className:"col-7 ml-auto modal-info__info text-right row",children:a("div",{className:"modal-info_tags",children:[e("img",{src:"https://col.licitaciones.info/img/filtros/asesorias.svg",className:"modal-info__icon"}),e("p",{className:"modal-info__counter",children:"0"})]})}),e("div",{className:"col-7 col-md-6 modal-info__info",children:e("label",{children:"Número de procesos contenidos:"})}),e("div",{className:"col-5 col-md-6 modal-info__info text-right",children:a("div",{className:"modal-info__data my-1",children:[e("span",{className:"modal-info__data--green",children:"0"})," ",e("span",{children:"procesos"})]})}),e("div",{className:"col-7 col-md-6 modal-info__info",children:e("label",{children:"Procesos no leídos:"})}),e("div",{className:"col-5 col-md-6 modal-info__info text-right",children:a("div",{className:"modal-info__data my-1",children:[e("span",{className:"modal-info__data--blue",children:"0"})," ",e("span",{children:"procesos"})]})}),e("div",{className:"col-7 col-md-6 modal-info__info mb-0",children:e("label",{children:"Procesos eliminados:"})}),e("div",{className:"col-5 col-md-6 modal-info__info text-right",children:a("div",{className:"modal-info__data my-1",children:[e("span",{className:"modal-info__data--red",children:"0"})," ",e("span",{children:"procesos"})]})})]})]}),l=="modalCreateSuccess"&&e("div",{children:e("label",{class:"modal-save__label",children:" Este proceso dependerá de la complejidad del perfil, te notificaremos por medio de la campana cuando todo este listo."})})]}),a(h.Footer,{children:[l=="modalEditarPerfil"&&a("div",{children:[e("button",{class:"btnRadius btn-new-gray",onClick:n,children:"Atrás"}),e("a",{href:`/cliente/grupo/editar/${s.id}?paso=${N}`,class:"btnRadius btn-new-blue",children:"Editar perfil"})]}),l=="modalEliminarPerfil"&&e("button",{class:"btnRadius btn-new-danger",onClick:H,children:"Eliminar"}),l=="modalDuplicarPerfil"&&a(m,{children:[e("button",{class:"btnRadius btn-new-green",onClick:j,children:"Duplicar"}),e("button",{class:"btnRadius btn-new-danger",onClick:n,children:"Cancelar"})]}),l=="modalLeidosPerfil"&&a(m,{children:[e("button",{class:"btnRadius btn-action btn-new-danger",onClick:n,children:"Cancelar"}),e("button",{class:"btnRadius btn-new-green",children:"Marcar"})]}),l=="modalInformacionPerfil"&&a("button",{class:"btnRadius btn-new-blue",children:[e("i",{class:"icon-Resumen"}),"Ver resumen"]}),l=="modalCreateSuccess"&&e("button",{class:"btnRadius btn-new-green",onClick:n,children:"Entendido"})]})]})]})})};export{he as default};
