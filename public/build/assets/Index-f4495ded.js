import{r as a,j as i,a as e,H as P,F as m}from"./app-376426d4.js";import{A as Q}from"./AuthenticatedLayout-196de58c.js";/* empty css                      */import{N as g,M as u}from"./Modal-e6b92b49.js";import{T as U,a as V}from"./estilos-toast-62e935e4.js";import"./font-unicolor-7d418a37.js";import"./ApplicationLogo-4d37b71f.js";import"./ApplicationLogoLici-af98a394.js";import"./transition-c425293f.js";import"./createWithBsPrefix-c3e4bc91.js";import"./hasClass-1a5eddd6.js";import"./useTimeout-35f436b9.js";const de=({auth:E,tiposcompras:v})=>{const[H,c]=a.exports.useState(!1),[I,h]=a.exports.useState(""),[b,d]=a.exports.useState(""),[R,W]=a.exports.useState(v),[f,j]=a.exports.useState(v);a.exports.useState(!1);const[B,$]=a.exports.useState(!1);a.exports.useState(0);const[X,D]=a.exports.useState(0),[p,w]=a.exports.useState([]),[C,k]=a.exports.useState([]),[r,y]=a.exports.useState({id:0,nombre:""}),[l,F]=a.exports.useState([]),[N,L]=a.exports.useState([]),[q,x]=a.exports.useState(!1),T=()=>x(!1),A=()=>{r.id!=0?x(!0):(h("Debes seleccionar uno"),d("icon-error"),c(!0))},O=()=>{r.id!=0?window.location.replace("/tiposcompras/"+r.id+"/edit"):(h("Debes seleccionar uno"),d("icon-error"),c(!0))},z=s=>{p.includes(s)?w(p.filter(t=>t!=s)):w([...p,s]);const o=new RegExp(s,"i");f.filter(function(t){if(o.test(t.id_padre_sub_categoria))return t}).forEach(t=>{if(!l.includes(t))l.push(t);else{const _=l.filter(S=>S.id_padre_sub_categoria!=s);F(_)}})},G=s=>{C.includes(s)?k(C.filter(t=>t!=s)):k([...C,s]);const o=new RegExp(s,"i");f.filter(function(t){if(o.test(t.id_padre_sub_categoria))return t}).forEach(t=>{if(!N.includes(t))N.push(t);else{const _=N.filter(S=>S.id_padre_sub_categoria!=s);L(_)}}),D(s)},M=s=>{y(s)},J=s=>{const o=new RegExp(s.target.value,"i"),n=R.filter(function(t){if(o.test(t.nombre))return t});j(n),$(!B)},K=()=>{fetch("/tiposcompras/"+r.id+"/delete").then(s=>s.json()).then(s=>{if(s.type=="Success"){d("icon-check");var o=l.filter(n=>n.id!=r.id);F(o),y({id:0,nombre:""})}else d("icon-error");h(s.message),c(!0),x(!1)})};return i(Q,{auth:E,children:[e(P,{title:"Tipos Compras"}),e(U,{position:"bottom-start",children:e(V,{onClose:()=>c(!1),show:H,delay:3e3,autohide:!0,children:i("div",{className:`notification-toast ${b=="icon-error"?"error":"success"}`,children:[e("span",{className:`toast-icon ${b=="icon-error"?"toast-danger":"toast-success"}`,children:e("span",{className:b})}),e("p",{className:"title",children:I}),e("button",{type:"button",className:"icon-close m-auto",onClick:()=>c(!1)})]})})}),e("div",{className:"contenedor-planes",children:i("div",{className:"bg-white overflow-auto w-full text-center margen-superior",children:[e("h2",{className:"name_section_app",children:"Tipos Compras"}),i("div",{className:"container mt-4",children:[e("div",{className:"tree_categorias tree_1",children:e("div",{className:"tree_categorias__busqueda mb-3 mb-md-4",children:i("div",{className:"mx-auto",children:[e("input",{type:"text",placeholder:"Buscar tipo compra",autoComplete:"off",className:"form-control m-auto",onChange:J}),e("i",{className:"icon-Cancelar"}),e("button",{type:"button",className:"icon-Buscar-click",children:e("i",{className:"bi bi-search"})}),e("br",{}),i("div",{className:"botones",children:[e(g.Link,{href:route("createTiposCompras"),className:"flex  ml-4 text-probar ",children:e("i",{className:"bi bi-plus-square-fill"})}),e(g.Link,{onClick:O,className:"flex  ml-4 text-probar ",children:e("i",{className:"bi bi-pencil-fill"})}),e(g.Link,{onClick:A,className:"flex  ml-4 text-probar ",children:e("i",{className:"bi bi-trash3"})})]}),f.map(s=>e(m,{children:s.id_padre_sub_categoria==null&&i(m,{children:[i("div",{id:s.id,className:"tree-content mt-3 sector ",onClick:()=>z(s.id),children:[e("i",{className:`tree-arrow has-child ${s.childs.length>0?"bi bi-chevron-down":""}`}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",children:e("span",{className:"tree-division__title my-auto",children:s.nombre})})})]},s.id),p.includes(s.id)&&e("ul",{className:"tree-children",children:l.map((o,n)=>e(m,{children:s.id==o.id_padre_sub_categoria&&e("li",{"data-id":"20504",className:"tree-node has-child expanded draggable",onClick:()=>M(o),children:i("div",{className:"tree-content segmento",onClick:()=>G(o.id),children:[e("i",{className:"tree-arrow expanded has-child ltr"}),e("input",{type:"radio",name:"actividad_economica",onClick:()=>M(o),checked:o.id==r.id?"checked":""}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",children:e(m,{children:n%2==0?e("span",{className:"tree-division__title my-auto",children:o.nombre}):e("span",{className:"tree-division__title-gray my-auto",children:o.nombre})})})})]})})}))})]})}))]})})}),i(u,{show:q,onHide:T,id:"removeTipoCompra",className:"modal-dialog-centered",children:[i(u.Header,{id:"removeTipoCompraHeader",children:[e("h5",{className:"modal-title",children:"Eliminar"}),e("button",{type:"button",className:"btn-close btn-close-white",onClick:T})]}),e(u.Body,{id:"removeTipoCompraBody",children:i("p",{children:["Desea eliminar la comuna"," ",r.nombre,"?"]})}),i(u.Footer,{children:[e("button",{type:"submit",className:"btn btnRadius btn-new-blue mr-2",onClick:T,children:"Cancelar"}),e("button",{onClick:K,className:"btn btnRadius btn-new-red ml-2",children:"Eliminar"})]})]})]})]})})]})};export{de as default};
