import{r as s,a as e,F as m,j as a}from"./app-95034df8.js";import{A as G}from"./AuthenticatedLayout-b098b97f.js";/* empty css                      */import{M as h}from"./Nav-7e01d0f6.js";import{R as U}from"./ResumenPerfil-439883f2.js";import"./estilos-toast-9d14e63a.js";import{F as t,D as K,C as d,T as J,a as X}from"./primeicons-7db46b6b.js";import{O as Y}from"./OverlayTrigger-cf3e4a84.js";import"./InputError-e5bc4df9.js";import"./hasClass-13bba8a1.js";import"./mergeOptionsWithPopperConfig-ceecfe4c.js";import"./module-b22afce8.js";import"./Button-42b0916d.js";/* empty css                 */import"./Accordion-00c3853e.js";import"./Collapse-da3427d4.js";import"./useTimeout-134ed531.js";const ve=({auth:S,grupos:y,created_updated:N})=>{const[r,T]=s.exports.useState({}),[b,p]=s.exports.useState(1);s.exports.useState(!0);const[v,f]=s.exports.useState(N),c=()=>f(!1),[i,g]=s.exports.useState(N?"modalCreateSuccess":""),w=(l,o)=>{g(l),f(!0),T(o)},[M,k]=s.exports.useState(!1),[E,R]=s.exports.useState([]),D=()=>{c(),axios.get(`/cliente/grupo/subcategorias/${r.id}`).then(l=>{R(l.data)}).catch(l=>{console.log(l)}),k(!0)},F=()=>{g("modalInformacionPerfil"),f(!0),k(!1)},u=s.exports.useRef(null),I=()=>{u.current&&u.current.reset()},_=l=>[...l||[]].map(o=>(o.envio_alertas==1?o.envio_alertas="Si":o.envio_alertas="No",o)),[A,x]=s.exports.useState(_(y)),[$,Z]=s.exports.useState({global:{value:null,matchMode:t.CONTAINS},nombre_filtro:{value:null,matchMode:t.STARTS_WITH},descripcion_filtro:{value:null,matchMode:t.STARTS_WITH},limite_inferior_cuantia:{value:null,matchMode:t.STARTS_WITH},limite_superior_cuantia:{value:null,matchMode:t.STARTS_WITH},historico:{value:null,matchMode:t.CONTAINS},envio_alertas:{value:null,matchMode:t.EQUALS},status:{value:null,matchMode:t.EQUALS}}),[B,ee]=s.exports.useState(!1),[L]=s.exports.useState(["No","Si"]),j=l=>a(m,{children:[e("div",{class:"columna_nombre--content-img",children:e("div",{class:"columna_nombre--img",children:e("img",{src:`${l.imagen_filtro}`})})}),e("span",{children:l.nombre_filtro})]}),[H,ae]=s.exports.useState([{name:"editar",text:"Editar perfil",icon:"icon-Editar icon-pd-editar",modal:"modalEditarPerfil"},{name:"eliminar",text:"Eliminar perfil",icon:"icon-Eliminar icon-pd-eliminar",modal:"modalEliminarPerfil"},{name:"duplicar",text:"Duplicar perfil",icon:"icon-Duplicar icon-pd-duplicar",modal:"modalDuplicarPerfil"},{name:"leidos",text:"Marcar como leídos",icon:"icon-Leidos icon-pd-leidos",modal:"modalLeidosPerfil"},{name:"info",text:"Ver más información",icon:"icon-Informacin-click icon-pd-info",modal:"modalInformacionPerfil"}]),V=l=>e("div",{className:"iconos_functions_grid",children:H.map((o,n)=>e(Y,{rootClose:!0,overlay:e(J,{id:`tooltip-${o.name}-${l.id}`,className:`tooltip tooltip-${o.name}`,children:o.text}),children:e("button",{type:"button",id:`${o.name}-btn${l.id}`,className:`${o.icon}`,onClick:()=>w(o.modal,l)})},n))}),W=l=>e(X,{value:l.value,options:L,onChange:o=>l.filterApplyCallback(o.value),placeholder:"Seleccionar Notificaciones",className:"p-column-filter",showEditModalClear:!0}),O=l=>e("div",{className:"VueTables__selecciones-filter-wrapper",children:e("span",{children:e("div",{className:"selecciones-nuevo-diseno",children:a("button",{id:"limpiar",type:"button",className:"icon-Limpiar-click borrador-grid",onClick:I,children:[e("span",{className:"path1"}),e("span",{className:"path2"}),e("span",{className:"path3"}),e("span",{className:"path4"}),e("span",{className:"path5"}),e("span",{className:"path6"}),e("span",{className:"path7"}),e("span",{className:"path8"})]})})})}),q=s.exports.useRef(""),[C,P]=s.exports.useState(r.nombre_filtro);s.exports.useEffect(()=>{i=="modalDuplicarPerfil"&&(console.log("cargo modal"),P(r.nombre_filtro))},[v]);const Q=()=>{var l={perfil:r.id,nombre_filtro:C},o=document.querySelector('meta[name="csrf-token"]');axios.post("/cliente/grupo/duplicar",{data:l},{headers:{Authorization:`Bearer ${o.content}`}}).then(n=>{x(_(n.data)),c()}).catch(n=>{console.log(n)})},z=()=>{var l={perfil:r.id},o=document.querySelector('meta[name="csrf-token"]');axios.post("/cliente/grupo/destroy",{data:l},{headers:{Authorization:`Bearer ${o.content}`}}).then(n=>{x(_(n.data)),c()}).catch(n=>{console.log(n)})};return e(m,{children:a(G,{auth:S,page:"grupos",children:[a("div",{className:"content_blank_interno margin_left_layout",children:[e("div",{className:"col",children:e("h2",{className:"name_seccion_app",children:"Administrar perfil (es) de negocio"})}),e("div",{className:"col",children:a("div",{id:"perfil-list",className:"",children:[a("div",{className:"tablescoop position-relative tablebordeada",children:[e("div",{className:"cargando_tables",style:{display:"none"},children:a("div",{className:"col",children:[e("img",{src:"https://col.licitaciones.info/img/loading.gif",className:"img-col"}),e("p",{children:"Cargando"})]})}),e("div",{className:"befor_table"}),a("div",{className:"VueTables VueTables--server",children:[e("div",{className:"row",children:a("div",{className:"col-md-12",children:[e("div",{className:"form-group form-inline float-left VueTables__search"}),e("div",{className:"form-group form-inline float-right VueTables__limit",children:e("div",{className:"m-0 w-100",children:a("div",{className:"text-left reloadTable row",style:{margin:0+"px !important;"},children:[a("div",{id:"top-botones",className:"mb-2 mb-lg-0",children:[e("a",{role:"button"}),a("a",{href:"/cliente/grupo/crear",role:"button",className:"btn btn-new-green btnRadius",children:[e("span",{className:"icon-Crear volver_icon"})," Crear perfil "]})]}),e("div",{className:"col-12 col-lg-7 col-xl-6 p-0 paginacion_grid text-center text-lg-right "})]})})})]})}),e("div",{className:"table-responsive",children:a(K,{ref:u,value:A,paginator:!0,rows:10,dataKey:"id",filters:$,filterDisplay:"row",loading:B,globalFilterFields:["name","representative.name","status"],emptyMessage:"No se encontraron registros",children:[e(d,{style:{maxWidth:600+"px"},filter:!0,className:"columna_seleccion columna_pequena",filterElement:O}),e(d,{field:"nombre_filtro",body:j,header:"Nombre",filter:!0,filterPlaceholder:"Buscar",className:"columna_nombre"}),e(d,{field:"descripcion_filtro",header:"Descripción",filter:!0,filterPlaceholder:"Buscar",className:"columna_grande"}),e(d,{field:"limite_inferior_cuantia",header:"Cuantia inferior",filter:!0,filterPlaceholder:"Buscar",className:"columna_promedio"}),e(d,{field:"limite_superior_cuantia",header:"Cuantia superior",filter:!0,filterPlaceholder:"Buscar",className:"columna_promedio"}),e(d,{field:"historico",header:"Histórico",filter:!0,filterPlaceholder:"Buscar",className:"columna_promedio"}),e(d,{field:"envio_alertas",header:"Notificaciones",showFilterMenu:!1,filter:!0,filterElement:W,className:"columna_notificaciones"}),e(d,{body:V,filter:!0,className:"v-hidden columna_acciones"})]})}),e("div",{className:"paginacion_grid"})]})]}),e("div",{})]})})]}),a(h,{show:v,onHide:c,animation:!0,id:i,centered:!0,children:[a(h.Header,{children:[i=="modalEditarPerfil"&&a("h4",{class:"modal-title title-dinamico",children:["¿ Qué paso(s) desea(s) ",e("span",{children:"editar"})," en tu perfil ?"]}),i=="modalEliminarPerfil"&&a("h4",{class:"modal-title",children:["¿Deseas ",e("b",{class:"text-rojo",children:"eliminar"})," el perfil de negocio?"]}),i=="modalDuplicarPerfil"&&a("h4",{class:"modal-title texto-dinamico",children:["¿Deseas ",e("span",{class:"color-blue",children:"duplicar"})," el perfil de negocio?"]}),i=="modalLeidosPerfil"&&e("h4",{class:"modal-title",children:"¿Deseas marcar como leídos los procesos de este perfil?"}),i=="modalInformacionPerfil"&&e("h4",{class:"modal-title",children:"Información general"}),i=="modalCreateSuccess"&&a(m,{children:[e("div",{class:"modal-save__img",children:e("img",{src:"https://col.licitaciones.info/img/usuario/perfiles/perfil-creado.png"})}),e("h4",{class:"modal-title",children:"Estamos configurando tu perfil de negocio."})]}),a("button",{type:"button","aria-label":"Close",class:"close icon-Cerrar-modal icon-Cerrar-modal-click",onClick:c,children:[e("span",{class:"path1"}),e("span",{class:"path2"})]})]}),a(h.Body,{children:[i=="modalEditarPerfil"&&a("div",{children:[e("label",{className:"perfil-checks",children:a("div",{className:"centrador",children:[e("i",{className:"perfil-checks__iconos icon-Paso-1-click"}),e("span",{className:"perfil-checks__title",children:"Editar actividad económica"}),e("input",{type:"radio",name:"radio",onChange:()=>p(1),checked:b==1}),e("span",{className:"perfil-checks__mark"})]})}),e("label",{className:"perfil-checks",children:a("div",{className:"centrador",children:[e("i",{className:"perfil-checks__iconos icon-Paso-2-click"}),e("span",{className:"perfil-checks__title",children:"Editar modalidad"}),e("input",{type:"radio",name:"radio",onChange:()=>p(2)}),e("span",{className:"perfil-checks__mark"})]})}),e("label",{className:"perfil-checks",children:a("div",{className:"centrador",children:[e("i",{className:"perfil-checks__iconos icon-Paso-3-click"}),e("span",{className:"perfil-checks__title",children:"Editar ubicación"}),e("input",{type:"radio",name:"radio",onChange:()=>p(3)}),e("span",{className:"perfil-checks__mark"})]})}),e("label",{className:"perfil-checks",children:a("div",{className:"centrador",children:[e("i",{className:"perfil-checks__iconos icon-Paso-4-click"}),e("span",{className:"perfil-checks__title",children:"Editar rangos de cuantía"}),e("input",{type:"radio",name:"radio",onChange:()=>p(4)}),e("span",{className:"perfil-checks__mark"})]})}),e("label",{className:"perfil-checks",children:a("div",{className:"centrador",children:[e("i",{className:"perfil-checks__iconos icon-Paso-5-click"}),e("span",{className:"perfil-checks__title",children:"Preferencias del perfil"}),e("input",{type:"radio",name:"radio",onChange:()=>p(5)}),e("span",{className:"perfil-checks__mark"})]})}),e("label",{className:"perfil-checks"})]}),i=="modalEliminarPerfil"&&a(m,{children:[e("p",{class:"modal-message",children:"Al aceptar esto el perfil se eliminará junto con el siguiente contenido, el cuál no se podrá recuperar:"}),e("hr",{}),a("div",{id:"modal-perfil",class:"d-flex",children:[a("div",{class:"info-sub principal",children:[e("h5",{children:"Información del perfil"}),a("div",{class:"contenedor",children:[e("img",{src:r.imagen_filtro,id:"img-perfil"}),e("span",{class:"nombreWeb",children:r.nombre_filtro})]})]}),a("div",{class:"info-sub secundario",children:[e("h5",{children:"Procesos almacenados"}),e("p",{class:"text-rojo",children:"0"})]})]})]}),i=="modalDuplicarPerfil"&&a("div",{class:"form-group modal-duplicar__input",children:[e("label",{class:"modal_save--label",children:" Dale un nombre a tu nuevo perfil:"}),e("input",{ref:q,type:"text",name:"nombre_duplicado",class:"form-control inputs_form padd-peq",value:C,onChange:l=>P(l.target.value)})]}),i=="modalLeidosPerfil"&&a("p",{class:"modal-message",children:["Todos los procesos contenidos en este perfil se marcarán como ",e("span",{class:"text-color",children:"leídos"}),"."]}),i=="modalInformacionPerfil"&&a(m,{children:[a("div",{className:"row modal-info__inicio text-center pb-3",children:[e("div",{className:"modal-info__logo",children:e("img",{src:r.imagen_filtro})}),e("div",{className:"modal-info__nombre",children:e("label",{children:r.nombre_filtro})})]}),a("div",{className:"row py-4",children:[e("div",{className:"col-7 col-md-6 modal-info__info",children:e("label",{children:"Fecha de creación:"})}),e("div",{className:"col-5 col-md-6 modal-info__info text-right",children:e("div",{className:"modal-info__data my-1",children:e("span",{children:new Date(r.created_at).toLocaleDateString("en-GB")})})}),e("div",{className:"col-5 modal-info__info",children:e("label",{children:"Número de actividades económicas:"})}),e("div",{className:"col-7 ml-auto modal-info__info text-right row",children:a("div",{className:"modal-info_tags",children:[e("img",{src:"https://col.licitaciones.info/img/filtros/asesorias.svg",className:"modal-info__icon"}),e("p",{className:"modal-info__counter",children:"0"})]})}),e("div",{className:"col-7 col-md-6 modal-info__info",children:e("label",{children:"Número de procesos contenidos:"})}),e("div",{className:"col-5 col-md-6 modal-info__info text-right",children:a("div",{className:"modal-info__data my-1",children:[e("span",{className:"modal-info__data--green",children:"0"})," ",e("span",{children:"procesos"})]})}),e("div",{className:"col-7 col-md-6 modal-info__info",children:e("label",{children:"Procesos no leídos:"})}),e("div",{className:"col-5 col-md-6 modal-info__info text-right",children:a("div",{className:"modal-info__data my-1",children:[e("span",{className:"modal-info__data--blue",children:"0"})," ",e("span",{children:"procesos"})]})}),e("div",{className:"col-7 col-md-6 modal-info__info mb-0",children:e("label",{children:"Procesos eliminados:"})}),e("div",{className:"col-5 col-md-6 modal-info__info text-right",children:a("div",{className:"modal-info__data my-1",children:[e("span",{className:"modal-info__data--red",children:"0"})," ",e("span",{children:"procesos"})]})})]})]}),i=="modalCreateSuccess"&&e("div",{children:e("label",{class:"modal-save__label",children:" Este proceso dependerá de la complejidad del perfil, te notificaremos por medio de la campana cuando todo este listo."})})]}),a(h.Footer,{children:[i=="modalEditarPerfil"&&a("div",{children:[e("button",{class:"btnRadius btn-new-gray",onClick:c,children:"Atrás"}),e("a",{href:`/cliente/grupo/editar/${r.id}?paso=${b}`,class:"btnRadius btn-new-blue",children:"Editar perfil"})]}),i=="modalEliminarPerfil"&&e("button",{class:"btnRadius btn-new-danger",onClick:z,children:"Eliminar"}),i=="modalDuplicarPerfil"&&a(m,{children:[e("button",{class:"btnRadius btn-new-green",onClick:Q,children:"Duplicar"}),e("button",{class:"btnRadius btn-new-danger",onClick:c,children:"Cancelar"})]}),i=="modalLeidosPerfil"&&a(m,{children:[e("button",{class:"btnRadius btn-action btn-new-danger",onClick:c,children:"Cancelar"}),e("button",{class:"btnRadius btn-new-green",children:"Marcar"})]}),i=="modalInformacionPerfil"&&a("button",{class:"btnRadius btn-new-blue",onClick:D,children:[e("i",{class:"icon-Resumen"}),"Ver resumen"]}),i=="modalCreateSuccess"&&e("button",{class:"btnRadius btn-new-green",onClick:c,children:"Entendido"})]})]}),e(U,{showModal:M,handleCloseModal:F,data:E})]})})};export{ve as default};
