import{r as t,j as r,a as e,H as W,F as C}from"./app-1e769053.js";import{A as X}from"./AuthenticatedLayout-03b1b7a4.js";/* empty css                      */import{N as M,M as v}from"./Modal-47962d22.js";import{T as Y,a as Z}from"./estilos-toast-882eff34.js";import"./font-unicolor-2935c474.js";import"./ApplicationLogo-a26f1364.js";import"./ApplicationLogoLici-71859a41.js";import"./transition-5578fa27.js";import"./createWithBsPrefix-0d39c925.js";import"./hasClass-ed8f205c.js";import"./useTimeout-87cf47d6.js";const he=({auth:D,tiposcompras:H})=>{const[L,m]=t.exports.useState(!1),[q,x]=t.exports.useState(""),[T,b]=t.exports.useState(""),[d,ee]=t.exports.useState(H),[S,I]=t.exports.useState(H);t.exports.useState(!1),t.exports.useState(!1),t.exports.useState(0);const[ae,A]=t.exports.useState(0),[_,f]=t.exports.useState([]),[k,N]=t.exports.useState([]),[p,R]=t.exports.useState({id:0,nombre:""}),[h,g]=t.exports.useState([]),[w,y]=t.exports.useState([]),[O,E]=t.exports.useState(!1),F=()=>E(!1),z=()=>{p.id!=0?E(!0):(x("Debes seleccionar uno"),b("icon-error"),m(!0))},G=()=>{p.id!=0?window.location.replace("/tiposcompras/"+p.id+"/edit"):(x("Debes seleccionar uno"),b("icon-error"),m(!0))},J=a=>{_.includes(a)?f(_.filter(o=>o!=a)):f([..._,a]);const s=new RegExp(a,"i");S.filter(function(o){if(s.test(o.id_padre_sub_categoria))return o}).forEach(o=>{if(!h.includes(o))h.push(o);else{const u=h.filter(n=>n.id_padre_sub_categoria!=a);g(u)}})},K=a=>{k.includes(a)?N(k.filter(o=>o!=a)):N([...k,a]);const s=new RegExp(a,"i");S.filter(function(o){if(s.test(o.id_padre_sub_categoria))return o}).forEach(o=>{if(!w.includes(o))w.push(o);else{const u=w.filter(n=>n.id_padre_sub_categoria!=a);y(u)}}),A(a)},j=a=>{R(a)},P=a=>{if(a.target.value==""){console.log("primer if"),console.log(a.target.value),I(d),g([]),y([]),f([]),N([]);return}if(a.key==="Enter"){console.log("enter"),console.log(a.key);const U=new RegExp(a.target.value,"i"),V=d.filter(function(i){if(U.test(i.nombre))return i});var s=[],c=[],o=[],u=[],n=[];V.forEach(i=>{i.id_abuelo_sub_categoria!=null&&i.id_padre_sub_categoria!=null&&(o.push(i),u.push(i.id_padre_sub_categoria),c.push(d.filter(l=>l.id==i.id_padre_sub_categoria)[0]),n.push(i.id_abuelo_sub_categoria)),i.id_abuelo_sub_categoria==null&&i.id_padre_sub_categoria!=null&&(c.includes(i)||c.push(i),n.includes(i.id_padre_sub_categoria)||n.push(i.id_padre_sub_categoria)),i.id_abuelo_sub_categoria==null&&i.id_padre_sub_categoria==null&&s.push(i)});var B=null,$=null;o.forEach(i=>{B=d.filter(l=>l.id==i.id_abuelo_sub_categoria)[0],$=d.filter(l=>l.id==i.id_padre_sub_categoria)[0],s.includes(B)||s.push(d.filter(l=>l.id==i.id_abuelo_sub_categoria)[0]),c.includes($)||s.push(d.filter(l=>l.id==i.id_padre_sub_categoria)[0])}),I(s),g(c),y(o),f(n),N(u)}},Q=()=>{fetch("/tiposcompras/"+p.id+"/delete").then(a=>a.json()).then(a=>{if(a.type=="Success"){b("icon-check");var s=h.filter(c=>c.id!=p.id);g(s),R({id:0,nombre:""})}else b("icon-error");x(a.message),m(!0),E(!1)})};return r(X,{auth:D,children:[e(W,{title:"Tipos Compras"}),e(Y,{position:"bottom-start",children:e(Z,{onClose:()=>m(!1),show:L,delay:3e3,autohide:!0,children:r("div",{className:`notification-toast ${T=="icon-error"?"error":"success"}`,children:[e("span",{className:`toast-icon ${T=="icon-error"?"toast-danger":"toast-success"}`,children:e("span",{className:T})}),e("p",{className:"title",children:q}),e("button",{type:"button",className:"icon-close m-auto",onClick:()=>m(!1)})]})})}),e("div",{className:"contenedor-planes",children:r("div",{className:"bg-white overflow-auto w-full text-center margen-superior",children:[e("h2",{className:"name_section_app",children:"Tipos Compras"}),r("div",{className:"container mt-4",children:[e("div",{className:"tree_categorias tree_1",children:e("div",{className:"tree_categorias__busqueda mb-3 mb-md-4",children:r("div",{className:"mx-auto",children:[e("input",{type:"text",placeholder:"Buscar tipo compra",autoComplete:"off",className:"form-control m-auto",onChange:P}),e("i",{className:"icon-Cancelar"}),e("button",{type:"button",className:"icon-Buscar-click",children:e("i",{className:"bi bi-search"})}),e("br",{}),r("div",{className:"botones",children:[e(M.Link,{href:route("createTiposCompras"),className:"flex  ml-4 text-probar ",children:e("i",{className:"bi bi-plus-square-fill"})}),e(M.Link,{onClick:G,className:"flex  ml-4 text-probar ",children:e("i",{className:"bi bi-pencil-fill"})}),e(M.Link,{onClick:z,className:"flex  ml-4 text-probar ",children:e("i",{className:"bi bi-trash3"})})]}),S.map(a=>e(C,{children:a.id_padre_sub_categoria==null&&r(C,{children:[r("div",{id:a.id,className:"tree-content mt-3 sector ",onClick:()=>J(a.id),children:[e("i",{className:`tree-arrow has-child ${a.childs.length>0?"bi bi-chevron-down":""}`}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",children:e("span",{className:"tree-division__title my-auto",children:a.nombre})})})]},a.id),_.includes(a.id)&&e("ul",{className:"tree-children",children:h.map((s,c)=>e(C,{children:a.id==s.id_padre_sub_categoria&&e("li",{"data-id":"20504",className:"tree-node has-child expanded draggable",onClick:()=>j(s),children:r("div",{className:"tree-content segmento",onClick:()=>K(s.id),children:[e("i",{className:"tree-arrow expanded has-child ltr"}),e("input",{type:"radio",name:"actividad_economica",onClick:()=>j(s),checked:s.id==p.id?"checked":""}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",children:e(C,{children:c%2==0?e("span",{className:"tree-division__title my-auto",children:s.nombre}):e("span",{className:"tree-division__title-gray my-auto",children:s.nombre})})})})]})})}))})]})}))]})})}),r(v,{show:O,onHide:F,id:"removeTipoCompra",className:"modal-dialog-centered",children:[r(v.Header,{id:"removeTipoCompraHeader",children:[e("h5",{className:"modal-title",children:"Eliminar"}),e("button",{type:"button",className:"btn-close btn-close-white",onClick:F})]}),e(v.Body,{id:"removeTipoCompraBody",children:r("p",{children:["Desea eliminar la comuna"," ",p.nombre,"?"]})}),r(v.Footer,{children:[e("button",{type:"submit",className:"btn btnRadius btn-new-blue mr-2",onClick:F,children:"Cancelar"}),e("button",{onClick:Q,className:"btn btnRadius btn-new-red ml-2",children:"Eliminar"})]})]})]})]})})]})};export{he as default};
