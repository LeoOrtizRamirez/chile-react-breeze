import{r as c,j as d,F as l,a as e}from"./app-62fe4d7a.js";import"./AuthenticatedLayout-5b6b26e3.js";/* empty css                      */import{T as Te,a as ye}from"./estilos-toast-dad1bb56.js";/* empty css                      *//* empty css                 */import"./transition-46989420.js";import"./createWithBsPrefix-21080a5c.js";import"./useTimeout-541b01af.js";import"./CloseButton-ad2fcd5e.js";const Je=({auth:Pe,actividades_economicas:j,tiposcompras:O,localizacion:Ae})=>{const[Y,q]=c.exports.useState(!1),[Z,Be]=c.exports.useState(""),[y,Fe]=c.exports.useState(""),[p,$e]=c.exports.useState(j),[P,D]=c.exports.useState(j),[h,g]=c.exports.useState([]),[m,v]=c.exports.useState([]),[N,ee]=c.exports.useState([]),[x,A]=c.exports.useState([]),[C,B]=c.exports.useState([]),ae=a=>{var i=document.getElementById("sector_"+a);i.classList.toggle("expanded"),h.includes(a)?g(h.filter(s=>s!=a)):g([...h,a]);const o=new RegExp(a,"i");P.filter(function(s){if(o.test(s.id_padre_sub_categoria))return s}).forEach(s=>{if(!x.includes(s))x.push(s);else{const u=x.filter(r=>r.id_padre_sub_categoria!=a);A(u)}})},ie=a=>{var i=document.getElementById("segmento_"+a);i.classList.toggle("expanded"),m.includes(a)?v(m.filter(s=>s!=a)):v([...m,a]);const o=new RegExp(a,"i");P.filter(function(s){if(o.test(s.id_padre_sub_categoria))return s}).forEach(s=>{if(!C.includes(s))C.push(s);else{const u=C.filter(r=>r.id_padre_sub_categoria!=a);B(u)}})},S=a=>{var i=[];N.forEach(s=>{i.push(s)});var o=p.filter(s=>s.id_padre_sub_categoria==a.id&&s.id_abuelo_sub_categoria==null);if(o.length>0)i.includes(a.id)?(i=_(i,a),i=f(i,o,"segmento","remove")):(i.push(a.id),i=f(i,o,"segmento","remove"),i=f(i,o,"segmento","add"));else{var n=p.filter(s=>s.id_padre_sub_categoria==a.id);n.length>0?i.includes(a.id)?(i=_(i,a),i=f(i,n,"actividad_economica","remove")):(i.push(a.id),i=f(i,n,"actividad_economica","add")):i.includes(a.id)?i=_(i,a):i.push(a.id)}ee(i)},_=(a,i)=>{const o=a.indexOf(i.id);return o>-1&&a.splice(o,1),a},f=(a,i,o=null,n)=>(i.forEach(s=>{switch(n){case"add":a.push(s.id),o=="segmento"&&p.filter(r=>r.id_padre_sub_categoria==s.id).forEach(r=>{a.push(r.id)});break;case"remove":a=_(a,s),o=="segmento"&&p.filter(r=>r.id_padre_sub_categoria==s.id).forEach(r=>{a=_(a,r)});break}}),a),se=a=>{if(a.target.value==""){D(p),A([]),B([]),g([]),v([]);return}if(a.key==="Enter"){const r=new RegExp(a.target.value,"i"),z=p.filter(function(t){if(r.test(t.nombre)||a.target.value==t.id)return t});var i=[],o=[],n=[],s=[],u=[];z.forEach(t=>{if(t.id_abuelo_sub_categoria!=null&&t.id_padre_sub_categoria!=null){n.push(t);var X=p.filter(V=>V.id==t.id_padre_sub_categoria)[0];o.includes(X)||o.push(X),s.includes(t.id_padre_sub_categoria)||s.push(t.id_padre_sub_categoria);var b=p.filter(V=>V.id==t.id_abuelo_sub_categoria)[0];i.includes(b)||i.push(b),u.includes(t.id_abuelo_sub_categoria)||u.push(t.id_abuelo_sub_categoria)}if(t.id_abuelo_sub_categoria==null&&t.id_padre_sub_categoria!=null){o.includes(t)||o.push(t),s.includes(t.id)||s.push(t.id);var b=p.filter(we=>we.id==t.id_padre_sub_categoria)[0];i.includes(b)||i.push(b),u.includes(t.id_padre_sub_categoria)||u.push(t.id_padre_sub_categoria)}t.id_abuelo_sub_categoria==null&&t.id_padre_sub_categoria==null&&(i.includes(t)||i.push(t),u.includes(t.id)||u.push(t.id))}),D(i),A(o),B(n),g(u),v(s)}},[k,Ie]=c.exports.useState(O),[H,K]=c.exports.useState(O),[E,w]=c.exports.useState([]),[Le,ce]=c.exports.useState([]),[te,oe]=c.exports.useState({id:0,nombre:""}),[T,F]=c.exports.useState([]),[Re,ne]=c.exports.useState([]),re=a=>{E.includes(a)?w(E.filter(n=>n!=a)):w([...E,a]);const i=new RegExp(a,"i");H.filter(function(n){if(i.test(n.id_padre_sub_categoria))return n}).forEach(n=>{if(!T.includes(n))T.push(n);else{const s=T.filter(u=>u.id_padre_sub_categoria!=a);F(s)}})},M=a=>{oe(a)},de=a=>{if(a.target.value==""){K(k),F([]),ne([]),w([]),ce([]);return}if(a.key==="Enter"){const s=new RegExp(a.target.value,"i"),u=k.filter(function(r){if(s.test(r.nombre))return r});var i=[],o=[],n=[];u.forEach(r=>{r.id_padre_sub_categoria!=null?o.includes(r)||o.push(r):(i.includes(r)||i.push(r),n.includes(r.id_padre_sub_categoria)||n.push(r.id_padre_sub_categoria))}),o.forEach(r=>{var z=k.filter(t=>t.id==r.id_padre_sub_categoria)[0];i.includes(z)||i.push(k.filter(t=>t.id==r.id_padre_sub_categoria)[0]),n.includes(r.id_padre_sub_categoria)||n.push(r.id_padre_sub_categoria)}),K(i),F(o),w(n)}},[le,U]=c.exports.useState(!1),[ue,$]=c.exports.useState(!1),[pe,I]=c.exports.useState(!1),[he,me]=c.exports.useState(!1),[_e,ze]=c.exports.useState(!0),[fe,L]=c.exports.useState(!0),[be,R]=c.exports.useState(!1),[ge,ve]=c.exports.useState(!1);c.exports.useEffect(()=>{I(!1)},[]),c.exports.useEffect(()=>{$(!1)},[]),c.exports.useEffect(()=>{me(!1)},[]),c.exports.useEffect(()=>{L(!0)},[]),c.exports.useEffect(()=>{R(!1)},[]),c.exports.useEffect(()=>{ve(!1)},[]);const Ne=()=>{U(!1),I(!0),$(!0),L(!1),R(!0)},xe=()=>{U(!0),I(!1),$(!1),L(!0),R(!1)},[G,Ce]=c.exports.useState(0),[Se,J]=c.exports.useState(!1),[Q,ke]=c.exports.useState(!0),W=a=>{var i=a.target.value;i=Ee(i),Ce("$ "+new Intl.NumberFormat().format(i))},Ee=a=>(a=a.replace(" ",""),a=a.replace("$",""),a=a.replace(",",""),a=a.replace(".",""),a==""?(a=0,J(!1)):J(!0),parseInt(a));return d(l,{children:[e(Te,{position:"bottom-start",children:e(ye,{onClose:()=>q(!1),show:Y,delay:3e3,autohide:!0,children:d("div",{className:`notification-toast ${y=="icon-error"?"error":"success"}`,children:[e("span",{className:`toast-icon ${y=="icon-error"?"toast-danger":"toast-success"}`,children:e("span",{className:y})}),e("p",{className:"title",children:Z}),e("button",{type:"button",className:"icon-close m-auto",onClick:()=>q(!1)})]})})}),e("div",{className:"contenedor-planes",children:d("div",{className:"bg-white overflow-auto w-full text-center margen-superior custom-scroll",children:[d("h2",{className:"perfiles-titulos crear",children:[e("span",{className:"c-verde",children:"Crea"})," tu primer perfil de negocio"]}),e("div",{className:"container mt-4",children:e("div",{className:"tree_categorias tree_1",children:d("div",{className:"tree_categorias__busqueda mb-3 mb-md-4",children:[d("div",{className:"perfil-guias__indicador perfil-guias__indicador--activo",children:[e("i",{className:"icon-Paso-1-click",children:"            "})," ",e("span",{children:"Actividad económica"}),e("i",{className:"icon-Paso-2-click",id:"pleft2"})," ",e("span",{children:"Tipo de compra"}),e("i",{className:"icon-Paso-3-click",id:"pleft2"})," ",e("span",{children:"Localizaciones"}),e("i",{className:"icon-Paso-4-click",id:"pleft2"})," ",e("span",{children:"Rango de Cuantía"})]}),d("div",{className:"mx-60 mt-30 d-flex",children:[fe&&d(l,{children:[e("button",{button:!0,type:"button",className:"icon-Buscar-click"}),e("input",{type:"text",placeholder:"Busca por actividad económica o UNSPSC",autoComplete:"off",className:"form-control busqueda-input",onKeyDown:se})]}),be&&e(l,{children:e("input",{type:"text",placeholder:"Buscar tipo de compra",autoComplete:"off",className:"form-control m-auto",onKeyDown:de})}),ge&&e(l,{children:e("p",{children:" poner buscador localizaciones"})}),d("h2",{className:"perfiles-titulos d-flex",children:[" Pais de contratación",e("img",{className:"bandera",src:"/public/images/banderas/listado_nombres/CHL.svg",alt:"Bandera Chile"})]})]}),e("br",{}),e(l,{children:le&&e("ul",{className:"tree-root",children:P.map(a=>e(l,{children:a.id_padre_sub_categoria==null&&d("li",{className:`tree-node has-child draggable ${h.includes(a.id)?"expanded":""}`,id:"sector_"+a.id,children:[d("div",{id:a.id,className:"tree-content mt-3 sector",children:[e("i",{className:`tree-arrow has-child ${a.childs.length>0?"bi bi-chevron-down":""}`}),e("input",{type:"checkbox",name:"actividad_economica",onChange:()=>S(a),checked:N.includes(a.id)?"checked":""}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",onClick:()=>ae(a.id),children:e("span",{className:"tree-division__title my-auto",children:a.nombre})})})]},a.id),h.includes(a.id)&&e("ul",{className:"tree-children new-class",children:x.map((i,o)=>e(l,{children:a.id==i.id_padre_sub_categoria&&d("li",{className:`tree-node has-child draggable segmento ${m.includes(i.id)?"expanded":""}`,id:"segmento_"+i.id,children:[d("div",{className:"tree-content segmento",children:[e("i",{className:"tree-arrow has-child ltr"}),e("input",{type:"checkbox",name:"actividad_economica",onChange:()=>S(i),checked:N.includes(i.id)?"checked":""}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",onClick:()=>ie(i.id),children:e(l,{children:o%2==0?e("span",{className:"tree-division__title my-auto",children:i.nombre}):e("span",{className:"tree-division__title-gray my-auto",children:i.nombre})})})})]}),m.includes(i.id)&&e("ul",{className:"tree-children actividad-economica",children:C.map((n,s)=>e(l,{children:i.id==n.id_padre_sub_categoria&&e("li",{className:"tree-node draggable",children:d("div",{className:"tree-content actividad-economica",onClick:()=>S(n),children:[e("input",{type:"checkbox",name:"actividad_economica",onChange:()=>S(n),checked:N.includes(n.id)?"checked":""}),e("span",{className:"tree-anchor children",children:e("span",{className:"tree-division tree-division1",children:e(l,{children:e("span",{className:"tree-division__title my-auto",children:n.nombre})})})})]})})}))})]})}))})]})}))})}),e(l,{children:pe&&e("ul",{className:"tree-root",children:H.map(a=>e(l,{children:a.id_padre_sub_categoria==null&&d(l,{children:[d("div",{id:a.id,className:"tree-content mt-3 sector",onClick:()=>re(a.id),children:[e("i",{className:`tree-arrow has-child ${a.childs.length>0?"bi bi-chevron-down":""}`}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",children:e("span",{className:"tree-division__title my-auto",children:a.nombre})})})]},a.id),E.includes(a.id)&&e("ul",{className:"tree-children",children:T.map((i,o)=>e(l,{children:a.id==i.id_padre_sub_categoria&&e("li",{"data-id":"20504",className:"tree-node has-child expanded draggable",onClick:()=>M(i),children:d("div",{className:"tree-content segmento",children:[e("i",{className:"tree-arrow expanded has-child ltr"}),e("input",{type:"radio",name:"tipo_compra",onClick:()=>M(i),checked:i.id==te.id?"checked":""}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",children:e(l,{children:o%2==0?e("span",{className:"tree-division__title my-auto",children:i.nombre}):e("span",{className:"tree-division__title-gray my-auto",children:i.nombre})})})})]})})}))})]})}))})}),e(l,{children:he&&e("ul",{className:"tree-root",children:e("p",{children:"Paso 3"})})}),e(l,{children:_e&&d("div",{className:"perfil-cuantias",children:[d("div",{id:"campos-cuantias",className:"justify-content-center pt-2 pb-5 py-md-5 row",children:[e("div",{className:"col-10 col-sm-8 col-lg-4 col-md-5",children:d("div",{className:"form-group mb-5 mb-md-1 campos-cuantias__form",children:[d("span",{className:"icon-Cuantia campos-cuantias__icon",children:[e("span",{className:"path1"}),e("span",{className:"path2"}),e("span",{className:"path3"}),e("span",{className:"path4"})]}),e("label",{children:"Cuantía desde:"}),e("input",{value:G,onChange:W,type:"text",id:"cuantia_desde",name:"cuantia_desde",placeholder:"$",className:"form-control inputs_form"})]})}),e("div",{className:"col-10 col-sm-8 col-lg-4 col-md-5",children:d("div",{className:"form-group campos-cuantias__form",children:[d("span",{className:"icon-Cuantia-2 campos-cuantias__icon",children:[e("span",{className:"path1"}),e("span",{className:"path2"}),e("span",{className:"path3"}),e("span",{className:"path4"})]}),e("label",{id:"descripcion",children:"Cuantía hasta:"}),e("input",{value:G,onChange:W,type:"text",id:"cuantia_hasta",name:"cuantia_hasta",placeholder:"Sin limite superior",className:"form-control inputs_form"})]})})]}),Se&&d("div",{class:"align-items-center col-11 col-lg-8 col-md-9 col-sm-10 justify-content-between campos-cuantias__block row",children:[e("div",{class:"col-8 p-0",children:d("p",{children:["¿Deseas incluir contratos ",e("span",{class:"text_color",children:"sin presupuesto asignado"})," o con cuantía de ",e("span",{class:"text_color",children:"$0"})," en este perfil?"]})}),e("div",{class:"col-3 text-center",children:d("label",{class:"switch",children:[e("input",{type:"checkbox",checked:Q,onClick:()=>ke(!Q)}),e("span",{class:"slider round"})]})})]})]})})]})})}),d("div",{className:"perfil-bottons-footer position-relative text-center mt-4",children:[e("a",{onClick:Ne,className:"btn btnRadius btn-new-blue",children:e("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Siguiente"})}),e(l,{children:ue&&e("a",{onClick:xe,className:"btn btnRadius btn-new-blue",children:e("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Volver"})})})]})]})})]})};export{Je as default};
