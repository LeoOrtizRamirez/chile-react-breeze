import{r as s,j as o,a as e,H as X,F as u}from"./app-f8957487.js";import{A as Y}from"./AuthenticatedLayout-c585de5d.js";/* empty css                      */import{N as T}from"./Nav-161ec88c.js";import{M as E}from"./Modal-e8d936a4.js";import{T as Z,a as ee}from"./estilos-toast-aa50c478.js";/* empty css                      */import"./ApplicationLogo-80d7de10.js";import"./ApplicationLogoLici-c09e60c6.js";import"./AuthenticatedLayout-24a63e65.js";import"./transition-ec0fe8d4.js";import"./createWithBsPrefix-8cd53e5f.js";import"./hook-0e536619.js";import"./CloseButton-fbfdd2c3.js";import"./hasClass-b07eeb63.js";import"./useTimeout-533af191.js";const Ne=({auth:D,actividades_economicas:H})=>{const[$,m]=s.exports.useState(!1),[L,A]=s.exports.useState(""),[w,_]=s.exports.useState(""),[h,ie]=s.exports.useState(H),[k,I]=s.exports.useState(H);s.exports.useState(!1),s.exports.useState(!1),s.exports.useState(0);const[ae,q]=s.exports.useState(0),[v,f]=s.exports.useState([]),[N,g]=s.exports.useState([]),[l,R]=s.exports.useState({id:0,nombre:""}),[x,y]=s.exports.useState([]),[p,S]=s.exports.useState([]),[O,C]=s.exports.useState(!1),F=()=>C(!1),K=()=>{l.id!=0?C(!0):(A("Debes seleccionar una Actividad Ecónomica"),_("icon-error"),m(!0))},z=()=>{l.id!=0?window.location.replace("/actividades-economicas/"+l.id+"/edit"):(A("Debes seleccionar una Actividad Ecónomica"),_("icon-error"),m(!0))},G=i=>{v.includes(i)?f(v.filter(c=>c!=i)):f([...v,i]);const t=new RegExp(i,"i");k.filter(function(c){if(t.test(c.id_padre_sub_categoria))return c}).forEach(c=>{if(!x.includes(c))x.push(c);else{const n=x.filter(d=>d.id_padre_sub_categoria!=i);y(n)}})},J=i=>{N.includes(i)?g(N.filter(c=>c!=i)):g([...N,i]);const t=new RegExp(i,"i");k.filter(function(c){if(t.test(c.id_padre_sub_categoria))return c}).forEach(c=>{if(!p.includes(c))p.push(c);else{const n=p.filter(d=>d.id_padre_sub_categoria!=i);S(n)}}),q(i)},j=i=>{R(i)},P=i=>{if(i.target.value==""){I(h),y([]),S([]),f([]),g([]);return}if(i.key==="Enter"){const U=new RegExp(i.target.value,"i"),V=h.filter(function(a){if(U.test(a.nombre)||i.target.value==a.id)return a});var t=[],r=[],c=[],n=[],d=[];V.forEach(a=>{if(a.id_abuelo_sub_categoria!=null&&a.id_padre_sub_categoria!=null){c.push(a),n.push(a.id_padre_sub_categoria);var B=h.filter(M=>M.id==a.id_padre_sub_categoria)[0];r.includes(B)||r.push(B),n.includes(a.id_padre_sub_categoria)||n.push(a.id_padre_sub_categoria);var b=h.filter(M=>M.id==a.id_abuelo_sub_categoria)[0];t.includes(b)||t.push(b),d.includes(a.id_abuelo_sub_categoria)||d.push(a.id_abuelo_sub_categoria)}if(a.id_abuelo_sub_categoria==null&&a.id_padre_sub_categoria!=null){r.includes(a)||r.push(a),d.includes(a.id_padre_sub_categoria)||d.push(a.id_padre_sub_categoria);var b=h.filter(W=>W.id==a.id_padre_sub_categoria)[0];t.includes(b)||t.push(b),d.includes(a.id_padre_sub_categoria)||d.push(a.id_padre_sub_categoria)}a.id_abuelo_sub_categoria==null&&a.id_padre_sub_categoria==null&&(t.includes(a)||t.push(a))}),I(t),y(r),S(c),f(d),g(n)}},Q=()=>{fetch("/actividades-economicas/"+l.id+"/delete").then(i=>i.json()).then(i=>{if(i.type=="Success"){_("icon-check");var t=p.filter(r=>r.id!=l.id);S(t),R({id:0,nombre:""})}else _("icon-error");A(i.message),m(!0),C(!1)})};return o(Y,{auth:D,children:[e(X,{title:"Actividades económicas"}),e(Z,{position:"bottom-start",children:e(ee,{onClose:()=>m(!1),show:$,delay:3e3,autohide:!0,children:o("div",{className:`notification-toast ${w=="icon-error"?"error":"success"}`,children:[e("span",{className:`toast-icon ${w=="icon-error"?"toast-danger":"toast-success"}`,children:e("span",{className:w})}),e("p",{className:"title",children:L}),e("button",{type:"button",className:"icon-close m-auto",onClick:()=>m(!1)})]})})}),e("div",{className:"contenedor-planes",children:o("div",{className:"bg-white overflow-auto w-full text-center margen-superior custom-scroll",children:[e("h2",{className:"name_section_app",children:"Actividad económica"}),o("div",{className:"container mt-4",children:[e("div",{className:"tree_categorias tree_1",children:e("div",{className:"tree_categorias__busqueda mb-3 mb-md-4",children:o("div",{className:"mx-auto",children:[e("input",{type:"text",placeholder:"Busca por actividad económica",autoComplete:"off",className:"form-control m-auto",onKeyDown:P}),e("i",{className:"icon-Cancelar"}),e("button",{type:"button",className:"icon-Buscar-click",children:e("i",{className:"bi bi-search"})}),e("br",{}),o("div",{className:"botones",children:[e(T.Link,{href:route("actividades-economicas.create"),className:"flex  ml-4 text-probar ",children:e("i",{className:"bi bi-plus-square-fill"})}),e(T.Link,{onClick:z,className:"flex  ml-4 text-probar ",children:e("i",{className:"bi bi-pencil-fill"})}),e(T.Link,{onClick:K,className:"flex  ml-4 text-probar ",children:e("i",{className:"bi bi-trash3"})})]}),k.map(i=>e(u,{children:i.id_padre_sub_categoria==null&&o(u,{children:[o("div",{id:i.id,className:"tree-content mt-3 sector",onClick:()=>G(i.id),children:[e("i",{className:`tree-arrow has-child ${i.childs.length>0?"bi bi-chevron-down":""}`}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",children:e("span",{className:"tree-division__title my-auto",children:i.nombre})})})]},i.id),v.includes(i.id)&&e("ul",{className:"tree-children new-class",children:x.map((t,r)=>e(u,{children:i.id==t.id_padre_sub_categoria&&o("li",{"data-id":"20504",className:"tree-node has-child expanded draggable",children:[o("div",{className:"tree-content segmento",onClick:()=>J(t.id),children:[e("i",{className:"tree-arrow expanded has-child ltr"}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",children:e(u,{children:r%2==0?e("span",{className:"tree-division__title my-auto",children:t.nombre}):e("span",{className:"tree-division__title-gray my-auto",children:t.nombre})})})})]}),N.includes(t.id)&&e("ul",{className:"tree-children",children:p.map((c,n)=>e(u,{children:t.id==c.id_padre_sub_categoria&&e("li",{className:"tree-node draggable",children:o("div",{className:"tree-content actividad-economica",onClick:()=>j(c),children:[e("input",{type:"radio",name:"actividad_economica",onChange:()=>j(c),checked:c.id==l.id?"checked":""}),e("span",{className:"tree-anchor children",children:e("span",{className:"tree-division tree-division1",children:e(u,{children:e("span",{className:"tree-division__title my-auto",children:c.nombre})})})})]})})}))})]})}))})]})}))]})})}),o(E,{show:O,onHide:F,id:"removeActividadEconomica",className:"modal-dialog-centered",children:[o(E.Header,{id:"removeActividadEconomicaHeader",children:[e("h5",{className:"modal-title",children:"Eliminar"}),e("button",{type:"button",className:"btn-close btn-close-white",onClick:F})]}),e(E.Body,{id:"removeActividadEconomicaBody",children:o("p",{children:["Desea eliminar la actividad económica (",l.id,")"," ",l.nombre,"?"]})}),o(E.Footer,{children:[e("button",{type:"submit",className:"btn btnRadius btn-new-blue mr-2",onClick:F,children:"Cancelar"}),e("button",{onClick:Q,className:"btn btnRadius btn-new-red ml-2",children:"Eliminar"})]})]})]})]})})]})};export{Ne as default};
