import{r as t,j as l,F as u,a as s}from"./app-5cea950d.js";import"./AuthenticatedLayout-b7461c18.js";/* empty css                      */import{T as le,a as ue}from"./estilos-toast-fb5b13a1.js";/* empty css                      *//* empty css                 */import"./transition-8415206d.js";import"./createWithBsPrefix-209fd44c.js";import"./useTimeout-9ea07acb.js";import"./CloseButton-69590af8.js";const Oe=({auth:pe,actividades_economicas:R,tiposcompras:I,localizacion:he})=>{t.exports.useRef([]);const[U,L]=t.exports.useState(!1),[G,me]=t.exports.useState(""),[w,_e]=t.exports.useState(""),[p,fe]=t.exports.useState(R),[y,q]=t.exports.useState(R);t.exports.useState(!1),t.exports.useState(!1),t.exports.useState(0);const[ge,J]=t.exports.useState(0),[_,x]=t.exports.useState([]),[z,N]=t.exports.useState([]);t.exports.useState({id:0,nombre:""});const[S,Q]=t.exports.useState([]),[k,A]=t.exports.useState([]),[C,P]=t.exports.useState([]),W=i=>{var e=document.getElementById("sector_"+i);e.classList.toggle("expanded"),_.includes(i)?x(_.filter(a=>a!=i)):x([..._,i]);const d=new RegExp(i,"i");y.filter(function(a){if(d.test(a.id_padre_sub_categoria))return a}).forEach(a=>{if(!k.includes(a))k.push(a);else{const r=k.filter(n=>n.id_padre_sub_categoria!=i);A(r)}})},X=i=>{var e=document.getElementById("segmento_"+i);e.classList.toggle("expanded"),opeSegmentos.includes(i)?N(opeSegmentos.filter(a=>a!=i)):N([...opeSegmentos,i]);const d=new RegExp(i,"i");y.filter(function(a){if(d.test(a.id_padre_sub_categoria))return a}).forEach(a=>{if(!C.includes(a))C.push(a);else{const r=C.filter(n=>n.id_padre_sub_categoria!=i);P(r)}}),J(i)},E=i=>{var e=[];S.forEach(a=>{e.push(a)});var d=p.filter(a=>a.id_padre_sub_categoria==i.id&&a.id_abuelo_sub_categoria==null);if(d.length>0)e.includes(i.id)?(e=f(e,i),e=g(e,d,"segmento","remove")):(e.push(i.id),e=g(e,d,"segmento","remove"),e=g(e,d,"segmento","add"));else{var o=p.filter(a=>a.id_padre_sub_categoria==i.id);o.length>0?e.includes(i.id)?(e=f(e,i),e=g(e,o,"actividad_economica","remove")):(e.push(i.id),e=g(e,o,"actividad_economica","add")):e.includes(i.id)?e=f(e,i):e.push(i.id)}Q(e)},f=(i,e)=>{const d=i.indexOf(e.id);return d>-1&&i.splice(d,1),i},g=(i,e,d=null,o)=>(e.forEach(a=>{switch(o){case"add":i.push(a.id),d=="segmento"&&p.filter(n=>n.id_padre_sub_categoria==a.id).forEach(n=>{i.push(n.id)});break;case"remove":i=f(i,a),d=="segmento"&&p.filter(n=>n.id_padre_sub_categoria==a.id).forEach(n=>{i=f(i,n)});break}}),i),Y=i=>{if(i.target.value==""){q(p),A([]),P([]),x([]),N([]);return}if(i.key==="Enter"){const n=new RegExp(i.target.value,"i"),m=p.filter(function(c){if(n.test(c.nombre)||i.target.value==c.id)return c});var e=[],d=[],o=[],a=[],r=[];m.forEach(c=>{if(c.id_abuelo_sub_categoria!=null&&c.id_padre_sub_categoria!=null){o.push(c),a.push(c.id_padre_sub_categoria);var K=p.filter(B=>B.id==c.id_padre_sub_categoria)[0];d.includes(K)||d.push(K),a.includes(c.id_padre_sub_categoria)||a.push(c.id_padre_sub_categoria);var v=p.filter(B=>B.id==c.id_abuelo_sub_categoria)[0];e.includes(v)||e.push(v),r.includes(c.id_abuelo_sub_categoria)||r.push(c.id_abuelo_sub_categoria)}if(c.id_abuelo_sub_categoria==null&&c.id_padre_sub_categoria!=null){d.includes(c)||d.push(c),r.includes(c.id_padre_sub_categoria)||r.push(c.id_padre_sub_categoria);var v=p.filter(re=>re.id==c.id_padre_sub_categoria)[0];e.includes(v)||e.push(v),r.includes(c.id_padre_sub_categoria)||r.push(c.id_padre_sub_categoria)}c.id_abuelo_sub_categoria==null&&c.id_padre_sub_categoria==null&&(e.includes(c)||e.push(c))}),q(e),A(d),P(o),x(r),N(a)}},[O,be]=t.exports.useState(I),[V,ve]=t.exports.useState(I);t.exports.useState(!1),t.exports.useState(!1),t.exports.useState(0),t.exports.useState(0);const[b,j]=t.exports.useState([]),[Z,xe]=t.exports.useState([]);t.exports.useState({id:0,nombre:""});const[h,ee]=t.exports.useState([]),[T,ie]=t.exports.useState([]);t.exports.useState([]),t.exports.useState(!1);const M=i=>{b.includes(i)?j(b.filter(o=>o!=i)):j([...b,i]);const e=new RegExp(i,"i");V.filter(function(o){if(e.test(o.id_padre_sub_categoria))return o}).forEach(o=>{if(!T.includes(o))T.push(o);else{const a=T.filter(r=>r.id_padre_sub_categoria!=i);ie(a)}})},D=i=>{var e=[];h.forEach(a=>{e.push(a)});var d=O.filter(a=>a.id_padre_sub_categoria==i.id&&a.id_abuelo_sub_categoria==null);if(d.length>0){if(!e.includes(i.id))e.push(i.id);else{const a=e.indexOf(i.id);a>-1&&e.splice(a,1)}d.forEach(a=>{const r=O.filter(n=>n.id_padre_sub_categoria==a.id);if(!h.includes(a.id))e.push(a.id),r.forEach(n=>{if(!h.includes(n.id))e.push(n.id);else{const m=e.indexOf(n.id);m>-1&&e.splice(m,1)}});else{const n=e.indexOf(a.id);n>-1&&e.splice(n,1),r.forEach(m=>{const c=e.indexOf(m.id);c>-1&&e.splice(c,1)})}ee(e)})}else{var o=O.filter(a=>a.id_padre_sub_categoria==i.id);if(o.length>0){if(!e.includes(i.id))e.push(i.id);else{const a=e.indexOf(i.id);a>-1&&e.splice(a,1)}o.forEach(a=>{if(!h.includes(a.id))e.push(a.id);else{const r=e.indexOf(a.id);r>-1&&e.splice(r,1)}setchecksTipoCompras(e)})}else{if(!e.includes(i.id))e.push(i.id);else{const a=e.indexOf(i.id);a>-1&&e.splice(a,1)}setchecksTipoCompras(e)}}},[se,H]=t.exports.useState(!0),[ae,F]=t.exports.useState(!1),[te,$]=t.exports.useState(!1),[ce,de]=t.exports.useState(!1);t.exports.useEffect(()=>{$(!1)},[]),t.exports.useEffect(()=>{F(!1)},[]),t.exports.useEffect(()=>{de(!1)},[]);const oe=()=>{console.log("paso 2"),H(!1),$(!0),F(!0)},ne=()=>{H(!0),$(!1),F(!1)};return l(u,{children:[s(le,{position:"bottom-start",children:s(ue,{onClose:()=>L(!1),show:U,delay:3e3,autohide:!0,children:l("div",{className:`notification-toast ${w=="icon-error"?"error":"success"}`,children:[s("span",{className:`toast-icon ${w=="icon-error"?"toast-danger":"toast-success"}`,children:s("span",{className:w})}),s("p",{className:"title",children:G}),s("button",{type:"button",className:"icon-close m-auto",onClick:()=>L(!1)})]})})}),s("div",{className:"contenedor-planes",children:l("div",{className:"bg-white overflow-auto w-full text-center margen-superior custom-scroll",children:[l("h2",{className:"perfiles-titulos crear",children:[s("span",{className:"c-verde",children:"Crea"})," tu primer perfil de negocio"]}),s("div",{className:"container mt-4",children:s("div",{className:"tree_categorias tree_1",children:l("div",{className:"tree_categorias__busqueda mb-3 mb-md-4",children:[l("div",{className:"perfil-guias__indicador perfil-guias__indicador--activo",children:[s("i",{className:"icon-Paso-1-click"})," ",s("span",{children:"Actividad económica"}),s("i",{className:"icon-Paso-2-click",id:"pleft2"})," ",s("span",{children:"Tipo de compra"}),s("i",{className:"icon-Paso-3-click",id:"pleft2"})," ",s("span",{children:"Localizaciones"})]}),l("div",{className:"mx-60 mt-30 d-flex",children:[s("button",{type:"button",className:"icon-Buscar-click"}),s("input",{type:"text",placeholder:"Busca por actividad económica o UNSPSC",autoComplete:"off",className:"form-control busqueda-input",onKeyDown:Y}),l("h2",{className:"perfiles-titulos d-flex",children:[" Pais de contratación",s("img",{className:"bandera",src:"/public/images/banderas/listado_nombres/CHL.svg",alt:"Bandera Chile"})]})]}),s("br",{}),s(u,{children:se&&s("ul",{className:"tree-root",children:y.map(i=>s(u,{children:i.id_padre_sub_categoria==null&&l("li",{className:`tree-node has-child draggable ${_.includes(i.id)?"expanded":""}`,id:"sector_"+i.id,children:[l("div",{id:i.id,className:"tree-content mt-3 sector",children:[s("i",{className:`tree-arrow has-child ${i.childs.length>0?"bi bi-chevron-down":""}`}),s("input",{type:"checkbox",name:"actividad_economica",onChange:()=>E(i),checked:S.includes(i.id)?"checked":""}),s("span",{className:"tree-anchor",children:s("span",{className:"tree-division tree-division1",onClick:()=>W(i.id),children:s("span",{className:"tree-division__title my-auto",children:i.nombre})})})]},i.id),_.includes(i.id)&&s("ul",{className:"tree-children new-class",children:k.map((e,d)=>s(u,{children:i.id==e.id_padre_sub_categoria&&l("li",{className:`tree-node has-child draggable segmento ${z.includes(e.id)?"expanded":""}`,id:"segmento_"+e.id,children:[l("div",{className:"tree-content segmento",children:[s("i",{className:"tree-arrow has-child ltr"}),s("input",{type:"checkbox",name:"actividad_economica",onChange:()=>E(e),checked:S.includes(e.id)?"checked":""}),s("span",{className:"tree-anchor",children:s("span",{className:"tree-division tree-division1",onClick:()=>X(e.id),children:s(u,{children:d%2==0?s("span",{className:"tree-division__title my-auto",children:e.nombre}):s("span",{className:"tree-division__title-gray my-auto",children:e.nombre})})})})]}),z.includes(e.id)&&s("ul",{className:"tree-children actividad-economica",children:C.map((o,a)=>s(u,{children:e.id==o.id_padre_sub_categoria&&s("li",{className:"tree-node draggable",children:l("div",{className:"tree-content actividad-economica",onClick:()=>E(o),children:[s("input",{type:"checkbox",name:"actividad_economica",onChange:()=>E(o),checked:S.includes(o.id)?"checked":""}),s("span",{className:"tree-anchor children",children:s("span",{className:"tree-division tree-division1",children:s(u,{children:s("span",{className:"tree-division__title my-auto",children:o.nombre})})})})]})})}))})]})}))})]})}))})}),s(u,{children:te&&s("ul",{className:"tree-root",children:V.map(i=>s(u,{children:i.id_padre_sub_categoria==null&&l("li",{className:`tree-node has-child draggable ${b.includes(i.id)?"expanded":""}`,id:"sector_"+i.id,children:[l("div",{id:i.id,className:"tree-content mt-3 sector",children:[s("i",{className:`tree-arrow has-child ${i.childs.length>0?"bi bi-chevron-down":""}`}),s("input",{type:"checkbox",name:"tipo_compras",onChange:()=>D(i),checked:h.includes(i.id)?"checked":""}),s("span",{className:"tree-anchor",children:s("span",{className:"tree-division tree-division1",onClick:()=>M(i.id),children:s("span",{className:"tree-division__title my-auto",children:i.nombre})})})]},i.id),b.includes(i.id)&&s("ul",{className:"tree-children new-class",children:T.map((e,d)=>s(u,{children:i.id==e.id_padre_sub_categoria&&s("li",{className:`tree-node has-child draggable segmento ${Z.includes(e.id)?"expanded":""}`,id:"segmento_"+e.id,children:l("div",{className:"tree-content segmento",children:[s("i",{className:"tree-arrow has-child ltr"}),s("input",{type:"checkbox",name:"actividad_economica",onChange:()=>D(e),checked:h.includes(e.id)?"checked":""}),s("span",{className:"tree-anchor",children:s("span",{className:"tree-division tree-division1",onClick:()=>M(e.id),children:s(u,{children:d%2==0?s("span",{className:"tree-division__title my-auto",children:e.nombre}):s("span",{className:"tree-division__title-gray my-auto",children:e.nombre})})})})]})})}))})]})}))})}),s(u,{children:ce&&s("ul",{className:"tree-root",children:s("p",{children:"Paso 3"})})})]})})}),l("div",{className:"perfil-bottons-footer position-relative text-center mt-4",children:[s("a",{onClick:oe,className:"btn btnRadius btn-new-blue",children:s("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Siguiente"})}),s(u,{children:ae&&s("a",{onClick:ne,className:"btn btnRadius btn-new-blue",children:s("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Volver"})})})]})]})})]})};export{Oe as default};
