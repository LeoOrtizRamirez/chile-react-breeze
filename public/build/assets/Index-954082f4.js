import{j as r,a as e,r as i,F as T}from"./app-fefff5b5.js";import{A as O}from"./AuthenticatedLayout-eeccacf1.js";import{A as Q}from"./MenuOpciones-a40e585b.js";import{$ as m,P as G}from"./jquery-cd0caed6.js";/* empty css              */import"./estilos-capa-autentificacion-e622f142.js";import"./ApplicationLogoLici-2621a9b3.js";import"./transition-cb6d3134.js";function J({type:d="submit",className:n="",processing:o,children:c,onClick:l}){return r("button",{style:{backgroundColor:"#57C700"},type:d,onClick:l,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${o&&"opacity-25"} `+n,disabled:o,children:[c,e("i",{className:"bi bi-share text-gray-500 iconos-tamano-margen"})]})}function K({type:d="submit",className:n="",processing:o,children:c,onClick:l}){return r("button",{style:{backgroundColor:"#57C700"},type:d,onClick:l,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${o&&"opacity-25"} `+n,disabled:o,children:[c,e("i",{className:"bi bi-folder-minus text-gray-500 iconos-tamano-margen"})]})}const X=d=>e("a",{href:d.url,target:"_blank",children:e("button",{style:{backgroundColor:"#57C700"},className:"boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ",children:e("i",{className:"bi bi-upload text-gray-500 iconos-tamano-margen"})})});function Y({type:d="submit",className:n="",processing:o,children:c,onClick:l}){return r("button",{style:{backgroundColor:"#57C700"},type:d,onClick:l,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${o&&"opacity-25"} `+n,disabled:o,children:[c,e("i",{className:"bi bi-star text-gray-500 iconos-tamano-margen"})]})}function Z({type:d="submit",className:n="",processing:o,children:c,onClick:l}){return r("button",{style:{backgroundColor:"#57C700"},type:d,onClick:l,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${o&&"opacity-25"} `+n,disabled:o,children:[c,e("i",{className:"bi bi-filetype-pdf text-gray-500 iconos-tamano-margen"})]})}function ee({type:d="submit",className:n="",processing:o,children:c,onClick:l}){return r("button",{style:{backgroundColor:"#57C700"},type:d,onClick:l,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${o&&"opacity-25"} `+n,disabled:o,children:[c,e("i",{className:"bi bi-eye text-gray-500 iconos-tamano-margen"})]})}const le=({auth:d,contratos:n})=>{const[o,c]=i.exports.useState(n.data);m("th").click(function(){var t=m(this).parents("table").eq(0),s=t.find("tr:gt(0)").toArray().sort(l(m(this).index()));this.asc=!this.asc,this.asc||(s=s.reverse());for(var a=0;a<s.length;a++)t.append(s[a]);_(m(this),this.asc)});function l(t){return function(s,a){var u=h(s,t),p=h(a,t);return m.isNumeric(u)&&m.isNumeric(p)?u-p:u.localeCompare(p)}}function h(t,s){return m(t).children("td").eq(s).html()}function _(t,s){m("th").each(function(a){m(this).removeClass("sorting"),m(this).removeClass("asc"),m(this).removeClass("desc")}),t.addClass("sorting"),s?t.addClass("asc"):t.addClass("desc")}const[S,te]=i.exports.useState(!0),[b,g]=i.exports.useState(0),k=t=>{g(t.id)},P=()=>{g(0)},[f,E]=i.exports.useState(0),[x,q]=i.exports.useState(0);i.exports.useEffect(()=>{document.getElementById("div1");var t=document.getElementById("tabla");document.getElementById("wrapper1");var s=document.getElementById("scroll-table");E(t.offsetWidth),q(s.offsetWidth);var a=document.getElementById("wrapper1"),u=document.querySelector("#scroll-table");a.onscroll=function(){u.scrollLeft=a.scrollLeft},u.onscroll=function(){a.scrollLeft=u.scrollLeft}});const[I,$]=i.exports.useState(n.to),[j,L]=i.exports.useState(n.from),[B,A]=i.exports.useState(n.total),[F,D]=i.exports.useState(n.next_page_url),[W,z]=i.exports.useState(n.prev_page_url),[R,y]=i.exports.useState(""),[U,V]=i.exports.useState(""),N=()=>{var t=document.getElementById("form_busqueda_rapida");let s=new FormData(t),a={};return s.forEach(function(p,M){a[M]=p}),H(a)},H=t=>{const s=[];for(let a in t)s.push(encodeURIComponent(a)+"="+encodeURIComponent(t[a]));return s.join("&")},v=t=>{if(t==null)return;const s=N();fetch(t+"&"+s).then(a=>a.json()).then(a=>{C(a)})},w=i.exports.useRef(0);i.exports.useEffect(()=>{w.current.addEventListener("keypress",function(t){if(t.key==="Enter"){t.preventDefault();const s=N();fetch("/contratos/?"+s).then(a=>a.json()).then(a=>{C(a)})}})},[]);const C=t=>{c(t.data),$(t.to),L(t.from),A(t.total),D(t.next_page_url),z(t.prev_page_url)};return i.exports.useEffect(()=>{const t=window.location.search,s=new URLSearchParams(t),a=s.get("fecha_publicacion");a!=null&&V(a);const u=s.get("buscador_rapido");u!=null&&y(u)},[]),r(O,{auth:d,children:[e("link",{rel:"shortcut icon",href:"#"}),r("div",{children:[r("div",{className:"contenedor-filtros",children:[r("div",{className:"",children:[r("form",{method:"get",name:"form_busqueda_rapida",id:"form_busqueda_rapida",children:[e("input",{ref:w,id:"buscador_rapido",className:"buscador_rapido",name:"buscador_rapido",type:"text",value:R,placeholder:"Búsqueda rápida",onChange:t=>y(t.target.value)}),e("input",{name:"fecha_publicacion",type:"hidden",value:U}),e("input",{name:"type",type:"hidden",value:"fetch"})]}),e("span",{className:"material-symbols-outlined posicion-lupa-contratos",children:"search"})]}),e("div",{className:"",children:r("button",{className:"buscador_avanzado mb-3",children:[e("span",{className:"material-symbols-outlined",children:"list"}),e("span",{className:"color-texto",children:"Búsqueda avanzada"})]})}),r("div",{className:"input-filtro-estado",children:[e("span",{className:"input-filtro-estado-span",children:"Visualizar:"}),r("select",{className:"input-visualizar",children:[e("option",{value:"",children:"todos"}),e("option",{value:"",children:"Vistos recientemente"}),e("option",{value:"",children:"No Leidos"})]})]}),e("div",{children:e(G,{nextHandler:()=>v(F),prevHandler:()=>v(W),currentPage:j,totalPaginas:I,totalElementos:B})})]}),r("div",{className:"contenedor-contratos",children:[e("div",{className:"contenedor-opciones-usuarios",children:e(Q,{})}),r("div",{className:"alto-tabla bg-white overflow-auto ",id:"scroll-table",children:[e("div",{id:"wrapper1",style:{width:x>0?x:0+"px"},children:e("div",{id:"div1",style:{width:f>0?f:0+"px"}})}),r("table",{id:"tabla",className:"w-full bg-white border tabla table-hover",children:[e("thead",{className:"cabecera-tabla",style:{backgroundColor:"#00a1c9"},children:r("tr",{className:"bg-paginador text-white uppercase leading-normal",children:[e("th",{style:{padding:"0px 0px"},children:"Acciones"}),e("th",{style:{padding:"0px 5px"},children:"Portal"}),e("th",{style:{padding:"0px 80px"},children:"Entidad"}),e("th",{style:{padding:"0px 80px"},children:"Objeto"}),e("th",{style:{padding:"0px 35px"},children:"Cuantía"}),e("th",{style:{padding:"0px 80px"},children:"Modalidad"}),e("th",{style:{padding:"0px 30px"},children:"Número"}),e("th",{style:{padding:"0px 0px"},children:"Estado"}),e("th",{style:{padding:"0px 35px"},children:"Publicada"}),e("th",{style:{padding:"0px 35px"},children:"Ubicación"}),e("th",{style:{padding:"0px 80px"},children:"Contratista"}),e("th",{style:{padding:"0px 80px"},children:"Actividad económica"})]})}),e("tbody",{children:o.map(t=>r("tr",{className:"tr-users",children:[e("td",{className:"border border-gray-200 text-left mw-90",children:r("div",{className:"iconos-horizontal width-columna-acciones",children:[r("div",{children:[e(Z,{}),e(X,{url:t.link}),e(Y,{})]}),r("div",{className:"",children:[e(J,{}),e(K,{}),e(ee,{})]})]})}),e("td",{className:"border border-gray-200 text-left margen-textos",children:e("span",{className:"circulo",children:t.fuente.alias_portal})}),e("td",{className:"border border-gray-200 text-left margen-textos",children:e("span",{className:"data-text width-columna-menor",children:t.entidad_contratante})}),r("td",{className:"border border-gray-200 text-left margen-textos mw-200",children:[S&&e(T,{children:b!=t.id&&r("span",{className:"data-text",children:[t.objeto.substr(0,40),"..."," ",e("a",{className:"text-primary",onClick:()=>k(t),children:"Ver más"})]})}),b==t.id&&e("div",{className:"showmore",children:r("span",{className:"data-text",children:[t.objeto,e("a",{className:"text-primary",onClick:()=>P(),children:"Ver menos"})]})})]}),e("td",{className:"border border-gray-200 text-left margen-textos width-columna-menor",children:t.valor>0?"$"+t.valor.toLocaleString("ch-CH"):t.valor_texto}),e("td",{className:"border border-gray-200 text-left margen-textos mw-200",children:e("span",{className:"data-text ",children:t.modalidad})}),e("td",{className:"border border-gray-200 text-left margen-textos ",children:e("span",{className:"data-text ",children:t.codigo_proceso})}),e("td",{className:"border border-gray-200 text-left color-estado margen-textos width-columna-menor",children:e("span",{className:"data-text ",children:t.estado_proceso})}),e("td",{className:"border border-gray-200 text-left margen-textos",children:e("span",{className:"data-text width-columna-menor",children:t.fecha_publicacion})}),e("td",{className:"border border-gray-200 text-left margen-textos width-columna-menor",children:e("span",{className:"data-text ",children:t.ubicacion})}),e("td",{className:"border border-gray-200 text-left margen-textos mw-200",children:e("span",{className:"data-text ",children:t.contratista})}),e("td",{className:"border border-gray-200 text-left margen-textos",children:e("span",{className:"data-text ",children:t.actividad_economica})})]},t.id))})]})]})]})]})]})};export{le as default};
