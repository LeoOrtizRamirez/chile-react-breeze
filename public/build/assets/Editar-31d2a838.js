import{r as s,a as e,F as n,j as i}from"./app-544b1e78.js";import{A as qe}from"./AuthenticatedLayout-bdf870f4.js";import{T as We,a as Le}from"./estilos-toast-d0a3be22.js";import{A as E}from"./ActividadEconomica-c3785eda.js";import"./HeaderLite-82f8ccef.js";import{M as u}from"./Nav-0c8ab4fe.js";import{R as Be}from"./ResumenPerfil-02030c4c.js";import{C as Me}from"./Calendar-6e11a45d.js";/* empty css              */import"./InputError-7c5552d3.js";import"./hasClass-1499dd39.js";import"./mergeOptionsWithPopperConfig-ec84f0d3.js";import"./module-187f1185.js";import"./Button-df070e66.js";/* empty css                      *//* empty css                 */import"./ApplicationLogoLici-fd8db22f.js";import"./ModalLoginSesion-5491e0e4.js";import"./Collapse-94133472.js";import"./TextInput-d8f4093b.js";/* empty css              */import"./Accordion-d04c0fce.js";const ui=({auth:ie,actividades_economicas:ae,tiposcompras:z,localizaciones:I,actividades_economicas_actuales:se,tiposcompras_actuales:ce,localizaciones_actuales:ne,perfil:r,pasos_seleccionados:re,paso_actual:j})=>{const[le,x]=s.exports.useState(!1),[te,oe]=s.exports.useState(""),[w,de]=s.exports.useState(""),[q,Oe]=s.exports.useState(ae),[_,W]=s.exports.useState(se),[S,L]=s.exports.useState(ne),[P,B]=s.exports.useState(ce),y=(a,t)=>{switch(t){case"ActividadEconomica":a.length>0?W(a):W([]);break;case"Localizaciones":a.length>0?L(a):L([]);break;case"TiposCompras":a.length>0?B(a):B([]);break}};console.log("paso_actual",j);const[c,me]=s.exports.useState(j),[f,pe]=s.exports.useState(re),l=a=>{a==2&&_.length==0?(oe("Debes seleccionar mínimo una actividad económica"),de("icon-error"),x(!0)):(me(a),pe([...f,a]))},M=s.exports.useRef(""),[R,O]=s.exports.useState(r.limite_superior_cuantia),[$,ue]=s.exports.useState(r.limite_inferior_cuantia),[he,V]=s.exports.useState(!1),[v,fe]=s.exports.useState(r.sin_presupuesto==1),G=(a,t)=>{var o=a.target.value;o=be(o),t=="desde"?(ge(o),ue("$"+new Intl.NumberFormat().format(o))):o==0?(O(""),M.current.setAttribute("placeholder","Sin limite superior")):O("$"+new Intl.NumberFormat().format(o))},ge=a=>{a==0?V(!1):V(!0)},be=a=>(a=a.replace(" ",""),a=a.replace("$",""),a=a.replace(",",""),a=a.replace(".",""),a==""&&(a=0),parseInt(a)),[U,_e]=s.exports.useState(r.historico!=null),[N,ve]=s.exports.useState(r.envio_alertas==1),T=s.exports.useRef(""),D=s.exports.useRef(""),J=(a,t)=>(a.setDate(a.getDate()-t),a),Ne=a=>{a.target.checked?(D.current.style.visibility="visible",T.current.classList.remove("disabled"),g(k.toISOString().split("T")[0])):(D.current.style.visibility="hidden",T.current.classList.add("disabled"),g("Sin Historico"))},[h,Ce]=s.exports.useState(r.nombre_filtro),[A,ke]=s.exports.useState(r.descripcion_filtro),[C,g]=s.exports.useState(r.historico==null?"Sin Historico":r.historico),K=a=>{h.current&&!h.current.contains(a.target)&&(h.current.value==""?h.current.classList.add("is-invalid"):h.current.classList.remove("is-invalid"))};s.exports.useEffect(()=>(document.addEventListener("click",K,!0),()=>{document.removeEventListener("click",K,!0)}),[]);const xe=()=>{var a={perfil:r.id,actividades_economicas:_,tipos_compras:P,localizaciones:S,limite_inferior_cuantia:$,limite_superior_cuantia:R,nombre_filtro:h,descripcion_filtro:A,sin_presupuesto:v,historico_contratacion:C,envio_alertas:N,imagen_filtro:F},t=document.querySelector('meta[name="csrf-token"]');axios.post("/cliente/grupo/update",{data:a},{headers:{Authorization:`Bearer ${t.content}`}}).then(o=>{console.log(o),window.location.href="/cliente/grupo?create=success"}).catch(o=>{console.log("error")})},[we,Q]=s.exports.useState(!1),X=()=>Q(!1),Se=()=>Q(!0),[k,Y]=s.exports.useState(J(new Date,91));s.exports.useEffect(()=>{g(k.toISOString().split("T")[0])},[k]),s.exports.useEffect(()=>{r.historico==null?g("Sin Historico"):(g(r.historico),Y(J(new Date(r.historico),0)))},[]);const[Pe,Z]=s.exports.useState(!1),H=()=>Z(!1),ye=()=>Z(!0),[m,Re]=s.exports.useState("Por defecto"),[$e,Te]=s.exports.useState(""),[F,De]=s.exports.useState(r.imagen_filtro),p=(a,t)=>{Re(a),Te(t)},Ae=()=>{De($e),H()},[He,ee]=s.exports.useState(!1),[Fe,Ee]=s.exports.useState([]),ze=()=>{const a=q.filter(function(d){return _.some(function(b){return d.id===b})}).map(function(d){return d.nombre}),t=z.filter(function(d){return P.some(function(b){return d.id===b})}).map(function(d){return d.nombre}),o=I.filter(function(d){return S.some(function(b){return d.id===b})}).map(function(d){return d.nombre});var je={actividades_economicas:a,tiposcompras:t,localizaciones:o,perfil:{limite_inferior_cuantia:$,limite_superior_cuantia:R,nombre_filtro:h,descripcion_filtro:A,sin_presupuesto:v,historico_contratacion:C,envio_alertas:N,imagen_filtro:F}};Ee(je),ee(!0)},Ie=()=>{ee(!1)};return e(n,{children:i(qe,{auth:ie,page:"perfiles",children:[i("div",{className:"content_blank_interno margin_left_layout",children:[e("div",{class:"col",children:e("h2",{class:"name_seccion_app",children:"Crear perfil de negocio"})}),i("div",{id:"container-grupo",children:[i("div",{id:"perfil-user",children:[e("a",{href:"/cliente/grupo",id:"btn-cancelar-global-perfiles",class:"btn btn-new-danger btnRadius",children:"Cancelar"}),e("div",{className:"perfil-guias",children:i("ul",{children:[e("li",{children:i("div",{className:`perfil-guias__indicador ${c==1?"perfil-guias__indicador--activo":""}`,onClick:()=>l(1),children:[e("i",{id:"icon1",className:`icon-Paso-1-click ${c==1?"c-activo-iconos":""}`,children:" "})," ",e("span",{id:"span1",className:`${c==1?"c-activo-texto-iconos":""}`,children:"Actividad económica"})]})}),f.includes(2)&&e("li",{children:i("div",{className:`perfil-guias__indicador ${c==2?"perfil-guias__indicador--activo":""}`,onClick:()=>l(2),children:[e("i",{id:"icon2",className:`icon-Paso-2-click ${c==2?"c-activo-iconos":""}`})," ",e("span",{id:"span2",className:`${c==2?"c-activo-texto-iconos":""}`,children:"Tipo de compra"})]})}),f.includes(3)&&e("li",{children:i("div",{className:`perfil-guias__indicador ${c==3?"perfil-guias__indicador--activo":""}`,onClick:()=>l(3),children:[e("i",{id:"icon3",className:`icon-Paso-3-click ${c==3?"c-activo-iconos":""}`})," ",e("span",{id:"span3",className:`${c==3?"c-activo-texto-iconos":""}`,children:"Localizaciones"})]})}),f.includes(4)&&e("li",{children:i("div",{className:`perfil-guias__indicador ${c==4?"perfil-guias__indicador--activo":""}`,onClick:()=>l(4),children:[e("i",{id:"icon4",className:`icon-Paso-4-click ${c==4?"c-activo-iconos":""}`})," ",e("span",{id:"span4",className:`${c==4?"c-activo-texto-iconos":""}`,children:"Rango de Cuantía"})]})}),f.includes(5)&&e("li",{children:i("div",{className:`perfil-guias__indicador ${c==5?"perfil-guias__indicador--activo":""}`,onClick:()=>l(5),children:[e("i",{id:"icon5",className:`icon-Paso-5-click ${c==5?"c-activo-iconos":""}`})," ",e("span",{id:"span5",className:`${c==5?"c-activo-texto-iconos":""}`,children:"Preferencias"})]})})]})}),e("div",{className:"perfil-contenido",children:e("div",{className:"tree_categorias tree_1",children:i("div",{className:"tree_categorias__busqueda mb-3 mb-md-4",children:[e(n,{children:c==1&&e(E,{subcategorias:q,nameBuscador:"Busca por actividad económica o UNSPSC",onHandleSectores:y,tipo:"ActividadEconomica",checkeds:_})}),i(n,{children:[" ",c==2&&e(E,{subcategorias:z,nameBuscador:"Buscar Tipo de Compra",onHandleSectores:y,tipo:"TiposCompras",checkeds:P})]}),e(n,{children:c==3&&e(E,{subcategorias:I,nameBuscador:"Buscar Localización",onHandleSectores:y,tipo:"Localizaciones",checkeds:S})}),e(n,{children:c==4&&i("div",{className:"perfil-cuantias",children:[i("div",{id:"campos-cuantias",className:"justify-content-center pt-2 pb-5 py-md-5 row",children:[e("div",{className:"col-10 col-sm-8 col-lg-4 col-md-5",children:i("div",{className:"form-group mb-5 mb-md-1 campos-cuantias__form",children:[i("span",{className:"icon-Cuantia campos-cuantias__icon",children:[e("span",{className:"path1"}),e("span",{className:"path2"}),e("span",{className:"path3"}),e("span",{className:"path4"})]}),e("label",{children:"Cuantía desde:"}),e("input",{value:$,onChange:a=>G(a,"desde"),type:"text",id:"cuantia_desde",name:"cuantia_desde",placeholder:"$",className:"form-control inputs_form"})]})}),e("div",{className:"col-10 col-sm-8 col-lg-4 col-md-5",children:i("div",{className:"form-group campos-cuantias__form",children:[i("span",{className:"icon-Cuantia-2 campos-cuantias__icon",children:[e("span",{className:"path1"}),e("span",{className:"path2"}),e("span",{className:"path3"}),e("span",{className:"path4"})]}),e("label",{id:"descripcion",children:"Cuantía hasta:"}),e("input",{ref:M,value:R,onChange:a=>G(a,"hasta"),type:"text",id:"cuantia_hasta",name:"cuantia_hasta",placeholder:"Sin limite superior",className:"form-control inputs_form"})]})})]}),he&&i("div",{className:"align-items-center col-11 col-lg-8 col-md-9 col-sm-10 justify-content-between campos-cuantias__block row",children:[e("div",{className:"col-8 p-0",children:i("p",{children:["¿Deseas incluir contratos"," ",e("span",{className:"text_color",children:"sin presupuesto asignado"})," ","o con cuantía de"," ",e("span",{className:"text_color",children:"$0"})," ","en este perfil?"]})}),e("div",{className:"col-3 text-center",children:i("label",{className:"switch",children:[e("input",{type:"checkbox",checked:v,onClick:()=>fe(!v)}),e("span",{className:"slider round"})]})})]})]})}),i(n,{children:[" ",c==5&&e("div",{className:"perfil-preferencia",children:i("div",{className:"row pt-3 justify-content-center pb-lg-4",children:[i("div",{className:"col-xs-12 col-sm-12 col-xl-6 px-4 contenedor-general row",children:[e("div",{className:"col-3 col-md-3 col-xl-3",children:i("div",{className:"imagen",children:[e("img",{src:F,alt:"Avatar",className:"imagen__avatar"}),e("button",{className:"imagen__cambiar-avatar-button",onClick:ye,children:e("span",{className:"icon-Editar"})})]})}),e("div",{className:"col-9 col-md-9 col-xl-9",children:i("div",{className:"perfil-preferencia__form1",children:[e("label",{id:"nombre",className:"perfil-preferencia__labels",children:"Dale un nombre a tu perfil:"}),e("input",{value:h,onChange:a=>Ce(a.target.value),type:"text",name:"nombre",className:"form-control inputs_form padd-peq mb-0",required:!0}),e("div",{className:"invalid-feedback mb-3",children:"El campo nombre perfil es obligatorio."}),e("label",{id:"descripcion",className:"perfil-preferencia__labels",children:"Descripción del perfil (opcional):"}),e("textarea",{value:A,onChange:a=>ke(a.target.value),type:"text",name:"descripcion",rows:"3",className:"form-control inputs_form"})]})})]}),i("div",{className:"col-xs-12 col-sm-12 col-xl-6 px-4 contenedor-general__derecha",children:[i("div",{className:"perfil-preferencia__historico pb-4 pb-lg-0 px-3 px-md-0",children:[i("div",{className:"align-items-center d-flex justify-content-between perfil-preferencia__historico-row mb-3",children:[i("div",{className:"perfil-preferencia__historico-row__icon d-flex",children:[e("img",{src:"/public/images/Web/icon-Historico.svg",alt:"",width:30}),e("label",{children:"Histórico de procesos de contratación:"})]}),e("div",{className:"perfil-preferencia__historico-row__toggleb",children:i("label",{className:"switch",children:[e("input",{type:"checkbox",checked:U,onClick:()=>_e(!U),onChange:Ne}),e("span",{className:"slider round"})]})})]}),i("div",{className:"align-items-center d-flex perfil-preferencia__historico-row mb-3",children:[e("div",{className:"perfil-preferencia__historico-row__span",children:e("span",{className:"perfil-preferencia__fecha-historico from-label",children:"Desde: "})}),i("div",{className:"perfil-preferencia__historico-row__input d-flex",children:[e("input",{disabled:!0,ref:T,value:C,name:"fecha_historico",className:"perfil-preferencia__fecha-historico_input"}),i("button",{ref:D,className:"btn btnRadius btn-new-blue button_change_date",onClick:Se,style:{visibility:r.historico==null?"hidden":"visible"},children:[e("img",{src:"/public/images/Web/icon-Cambiar.svg",alt:"icon-Cambiar",className:"margin-right-5"})," Cambiar fecha"]})]})]})]}),i("div",{className:"perfil-preferencia__form1",children:[i("div",{className:"align-items-center d-flex justify-content-between perfil-preferencia__historico-row mb-3",children:[i("div",{className:"perfil-preferencia__historico-row__icon d-flex",children:[e("img",{src:"/public/images/Web/icon-Email-noti.svg",alt:"",width:30}),e("label",{children:"Notificaciones a tu email:"})]}),e("div",{className:"perfil-preferencia__historico-row__toggleb",children:i("label",{className:"switch",children:[e("input",{className:"Activado",type:"checkbox",checked:N,onClick:()=>ve(!N)}),e("span",{className:"slider round"})]})})]}),e("div",{className:"alineamiento-label d-flex pb-3 pb-lg-0 px-3 px-md-0",children:i("p",{className:"mr5 text-justify",children:["Te notificaríamos en tu ",e("span",{className:"text_color",children:"correo"})," cuando encontremos una oportunidad que coincida con este perfil."]})})]})]})]})})]})]})})}),i("div",{className:"perfil-bottons-footer position-relative text-center mt-4",children:[e(n,{children:c==2&&e("a",{onClick:()=>l(1),className:"btn btnRadius btn-new-gray",id:"btn-return-tc",children:e("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Atrás"})})}),e(n,{children:c==3&&e("a",{onClick:()=>l(2),className:"btn btnRadius btn-new-gray",id:"btn-return-lc",children:e("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Atrás"})})}),e(n,{children:c==4&&e("a",{onClick:()=>l(3),className:"btn btnRadius btn-new-gray",id:"btn-return-cu",children:e("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Atrás"})})}),e(n,{children:c==5&&e(n,{children:e("a",{onClick:()=>l(4),className:"btn btnRadius btn-new-gray",id:"btn-return-te",children:e("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Atrás"})})})}),e(n,{children:c==1&&e("a",{onClick:()=>l(2),className:"btn btnRadius btn-new-blue",id:"btn-next-ac",children:e("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Siguiente"})})}),e(n,{children:c==2&&e("a",{onClick:()=>l(3),className:"btn btnRadius btn-new-blue",id:"btn-next-tc",children:e("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Siguiente"})})}),e(n,{children:c==3&&e("a",{onClick:()=>l(4),className:"btn btnRadius btn-new-blue",id:"btn-next-lc",children:e("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Siguiente"})})}),e(n,{children:c==4&&e("a",{onClick:()=>l(5),className:"btn btnRadius btn-new-blue",id:"btn-next-cu",children:e("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Siguiente"})})}),e(n,{children:c==5&&i(n,{children:[e("a",{onClick:xe,className:"btn btnRadius btn-new-green",id:"btn-next-cu",children:e("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Editar perfil de negocio"})}),i("button",{type:"button",class:"btn btnRadius btn-new-blue",onClick:ze,children:[e("i",{class:"icon-Resumen"})," Ver resumen"]})]})})]})]}),i(u,{show:we,onHide:X,backdrop:"static",keyboard:!1,size:"lg",id:"calendar",children:[e(u.Header,{closeButton:!0,children:e(u.Title,{id:"modal-calendar-title",children:"Selecciona la fecha de inicio para el histórico"})}),i(u.Body,{children:[e(Me,{onChange:Y,value:k,selectRange:!1,maxDate:new Date}),e("div",{id:"resultados",className:"row",children:i("div",{className:"col text-center",children:[e("span",{children:"Desde :"})," ",e("span",{children:C})]})}),e("div",{className:"mt-5 text-center",children:e("button",{type:"button",className:"btn-new-green btnRadius text-center bg-transparent px-5",onClick:X,children:"Filtrar"})})]}),e(u.Footer,{})]}),i(u,{show:Pe,onHide:H,backdrop:"static",keyboard:!1,size:"lg",id:"filter",children:[e(u.Header,{closeButton:!0,children:e(u.Title,{id:"modal-filter-title",children:"Selecciona la imagen de tu perfil de negocio"})}),e(u.Body,{children:i("div",{className:"justify-content-center row",children:[e("div",{className:"perfil-imagenes__element-img",children:i("div",{className:"perfil-imagenes__img position-relative",onClick:()=>p("Por defecto","/public/images/perfiles/perfil-invisible.svg"),children:[e("img",{src:"/public/images/perfiles/perfil-invisible.svg",alt:"Por defecto img"}),m=="Por defecto"&&e("img",{src:"/public/images/Web/icon-Check.svg",alt:"icon-Check",className:"icon-Check"})]})}),e("div",{className:"perfil-imagenes__element-img",children:i("div",{className:"perfil-imagenes__img position-relative",onClick:()=>p("Perfil amarillo","/public/images/perfiles/perfil-amarillo.svg"),children:[e("img",{src:"/public/images/perfiles/perfil-amarillo.svg",alt:"Perfil amarillo img"}),m=="Perfil amarillo"&&e("img",{src:"/public/images/Web/icon-Check.svg",alt:"icon-Check",className:"icon-Check"})]})}),e("div",{className:"perfil-imagenes__element-img",children:i("div",{className:"perfil-imagenes__img position-relative",onClick:()=>p("Perfil azul","/public/images/perfiles/perfil-azul.svg"),children:[e("img",{src:"/public/images/perfiles/perfil-azul.svg",alt:"Perfil azul img"}),m=="Perfil azul"&&e("img",{src:"/public/images/Web/icon-Check.svg",alt:"icon-Check",className:"icon-Check"})]})}),e("div",{className:"perfil-imagenes__element-img",children:i("div",{className:"perfil-imagenes__img position-relative",onClick:()=>p("Perfil gris","/public/images/perfiles/perfil-gris.svg"),children:[e("img",{src:"/public/images/perfiles/perfil-gris.svg",alt:"Perfil gris img"}),m=="Perfil gris"&&e("img",{src:"/public/images/Web/icon-Check.svg",alt:"icon-Check",className:"icon-Check"})]})}),e("div",{className:"perfil-imagenes__element-img",children:i("div",{className:"perfil-imagenes__img position-relative",onClick:()=>p("Perfil morado","/public/images/perfiles/perfil-morado.svg"),children:[e("img",{src:"/public/images/perfiles/perfil-morado.svg",alt:"Perfil morado img"}),m=="Perfil morado"&&e("img",{src:"/public/images/Web/icon-Check.svg",alt:"icon-Check",className:"icon-Check"})]})}),e("div",{className:"perfil-imagenes__element-img",children:i("div",{className:"perfil-imagenes__img position-relative",onClick:()=>p("Perfil negro","/public/images/perfiles/perfil-negro.svg"),children:[e("img",{src:"/public/images/perfiles/perfil-negro.svg",alt:"Perfil negro img"}),m=="Perfil negro"&&e("img",{src:"/public/images/Web/icon-Check.svg",alt:"icon-Check",className:"icon-Check"})]})}),e("div",{className:"perfil-imagenes__element-img",children:i("div",{className:"perfil-imagenes__img position-relative",onClick:()=>p("Perfil rojo","/public/images/perfiles/perfil-rojo.svg"),children:[e("img",{src:"/public/images/perfiles/perfil-rojo.svg",alt:"Perfil rojo img"}),m=="Perfil rojo"&&e("img",{src:"/public/images/Web/icon-Check.svg",alt:"icon-Check",className:"icon-Check"})]})}),e("div",{className:"perfil-imagenes__element-img",children:i("div",{className:"perfil-imagenes__img position-relative",onClick:()=>p("Perfil rosado","/public/images/perfiles/perfil-rosado.svg"),children:[e("img",{src:"/public/images/perfiles/perfil-rosado.svg",alt:"Perfil rosado img"}),m=="Perfil rosado"&&e("img",{src:"/public/images/Web/icon-Check.svg",alt:"icon-Check",className:"icon-Check"})]})}),e("div",{className:"perfil-imagenes__element-img",children:i("div",{className:"perfil-imagenes__img position-relative",onClick:()=>p("Perfil verde","/public/images/perfiles/perfil-verde.svg"),children:[e("img",{src:"/public/images/perfiles/perfil-verde.svg",alt:"Perfil verde img"}),m=="Perfil verde"&&e("img",{src:"/public/images/Web/icon-Check.svg",alt:"icon-Check",className:"icon-Check"})]})}),e("div",{className:"perfil-imagenes__element-img",children:i("div",{className:"perfil-imagenes__img position-relative",onClick:()=>p("Perfil violeta","/public/images/perfiles/perfil-violeta.svg"),children:[e("img",{src:"/public/images/perfiles/perfil-violeta.svg",alt:"Perfil violeta img"}),m=="Perfil violeta"&&e("img",{src:"/public/images/Web/icon-Check.svg",alt:"icon-Check",className:"icon-Check"})]})})]})}),i(u.Footer,{class:"modal-footer buttons-footer",children:[e("button",{class:"btnRadius btn-new-gray",onClick:H,children:"Atrás"}),e("button",{class:"btnRadius btn-new-green",onClick:Ae,children:"Seleccionar"})]})]}),e(Be,{showModal:He,handleCloseModal:Ie,data:Fe})]})]}),e(We,{position:"bottom-start",children:e(Le,{onClose:()=>x(!1),show:le,delay:3e3,autohide:!0,children:i("div",{className:`notification-toast ${w=="icon-error"?"error":"success"}`,children:[e("span",{className:`toast-icon ${w=="icon-error"?"toast-danger":"toast-success"}`,children:e("span",{className:w})}),e("p",{className:"title",children:te}),e("button",{type:"button",className:"icon-close m-auto",onClick:()=>x(!1)})]})})})]})})};export{ui as default};
