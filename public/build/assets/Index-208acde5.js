import{r as c,j as l,F as m,a}from"./app-0fe4422a.js";import"./AuthenticatedLayout-e351db19.js";/* empty css                      */import{T as q,a as M}from"./estilos-toast-37ae3085.js";/* empty css                      *//* empty css                 */import"./transition-92f72311.js";import"./createWithBsPrefix-24a184bc.js";import"./useTimeout-8703bd9a.js";import"./CloseButton-04a2c01e.js";const se=({auth:D,actividades_economicas:O})=>{c.exports.useRef([]);const[I,F]=c.exports.useState(!1),[$,H]=c.exports.useState(""),[y,K]=c.exports.useState(""),[u,U]=c.exports.useState(O),[g,T]=c.exports.useState(O);c.exports.useState(!1),c.exports.useState(!1),c.exports.useState(0);const[z,B]=c.exports.useState(0),[_,x]=c.exports.useState([]),[b,v]=c.exports.useState([]);c.exports.useState({id:0,nombre:""});const[h,w]=c.exports.useState([]),[N,C]=c.exports.useState([]),[S,A]=c.exports.useState([]),R=s=>{var e=document.getElementById("sector_"+s);e.classList.toggle("expanded"),_.includes(s)?x(_.filter(i=>i!=s)):x([..._,s]);const d=new RegExp(s,"i");g.filter(function(i){if(d.test(i.id_padre_sub_categoria))return i}).forEach(i=>{if(!N.includes(i))N.push(i);else{const o=N.filter(r=>r.id_padre_sub_categoria!=s);C(o)}})},j=s=>{var e=document.getElementById("segmento_"+s);e.classList.toggle("expanded"),b.includes(s)?v(b.filter(i=>i!=s)):v([...b,s]);const d=new RegExp(s,"i");g.filter(function(i){if(d.test(i.id_padre_sub_categoria))return i}).forEach(i=>{if(!S.includes(i))S.push(i);else{const o=S.filter(r=>r.id_padre_sub_categoria!=s);A(o)}}),B(s)},E=s=>{var e=[];h.forEach(i=>{e.push(i)});var d=u.filter(i=>i.id_padre_sub_categoria==s.id&&i.id_abuelo_sub_categoria==null);if(d.length>0){if(!e.includes(s.id))e.push(s.id);else{const i=e.indexOf(s.id);i>-1&&e.splice(i,1)}d.forEach(i=>{const o=u.filter(r=>r.id_padre_sub_categoria==i.id);if(!h.includes(i.id))e.push(i.id),o.forEach(r=>{if(!h.includes(r.id))e.push(r.id);else{const f=e.indexOf(r.id);f>-1&&e.splice(f,1)}});else{const r=e.indexOf(i.id);r>-1&&e.splice(r,1),o.forEach(f=>{const k=e.indexOf(f.id);k>-1&&e.splice(k,1)})}w(e)})}else{var n=u.filter(i=>i.id_padre_sub_categoria==s.id);if(n.length>0){if(!e.includes(s.id))e.push(s.id);else{const i=e.indexOf(s.id);i>-1&&e.splice(i,1)}n.forEach(i=>{if(!h.includes(i.id))e.push(i.id);else{const o=e.indexOf(i.id);o>-1&&e.splice(o,1)}w(e)})}else{if(!e.includes(s.id))e.push(s.id);else{const i=e.indexOf(s.id);i>-1&&e.splice(i,1)}w(e)}}},L=s=>{if(s.target.value==""){T(u),C([]),A([]),x([]),v([]);return}if(s.key==="Enter"){const k=new RegExp(s.target.value,"i"),P=u.filter(function(t){if(k.test(t.nombre))return t});var e=[],d=[],n=[],i=[],o=[];P.forEach(t=>{t.id_abuelo_sub_categoria!=null&&t.id_padre_sub_categoria!=null&&(n.push(t),i.push(t.id_padre_sub_categoria),d.push(u.filter(p=>p.id==t.id_padre_sub_categoria)[0]),o.push(t.id_abuelo_sub_categoria)),t.id_abuelo_sub_categoria==null&&t.id_padre_sub_categoria!=null&&(d.includes(t)||(d.push(t),d.push(t)),o.includes(t.id_padre_sub_categoria)||(o.push(t.id_padre_sub_categoria),d.push(t))),t.id_abuelo_sub_categoria==null&&t.id_padre_sub_categoria==null&&e.push(t)});var r=null,f=null;n.forEach(t=>{r=u.filter(p=>p.id==t.id_abuelo_sub_categoria)[0],f=u.filter(p=>p.id==t.id_padre_sub_categoria)[0],e.includes(r)||e.push(u.filter(p=>p.id==t.id_abuelo_sub_categoria)[0]),d.includes(f)||e.push(u.filter(p=>p.id==t.id_padre_sub_categoria)[0])}),T(e),C(d),A(n),x(o),v(i)}};return c.exports.useEffect(()=>{},[g]),l(m,{children:[a(q,{position:"bottom-start",children:a(M,{onClose:()=>F(!1),show:I,delay:3e3,autohide:!0,children:l("div",{className:`notification-toast ${y=="icon-error"?"error":"success"}`,children:[a("span",{className:`toast-icon ${y=="icon-error"?"toast-danger":"toast-success"}`,children:a("span",{className:y})}),a("p",{className:"title",children:$}),a("button",{type:"button",className:"icon-close m-auto",onClick:()=>F(!1)})]})})}),a("div",{className:"contenedor-planes",children:l("div",{className:"bg-white overflow-auto w-full text-center margen-superior custom-scroll",children:[l("h2",{className:"perfiles-titulos crear",children:[a("span",{className:"c-verde",children:"Crea"})," tu primer perfil de negocio"]}),a("div",{className:"container mt-4",children:a("div",{className:"tree_categorias tree_1",children:l("div",{className:"tree_categorias__busqueda mb-3 mb-md-4",children:[l("div",{className:"perfil-guias__indicador perfil-guias__indicador--activo",children:[a("i",{className:"icon-Paso-1-click"})," ",a("span",{children:"Actividad económica"})]}),l("div",{className:"mx-60 mt-30 d-flex",children:[a("button",{type:"button",className:"icon-Buscar-click"}),a("input",{type:"text",placeholder:"Busca por actividad económica o UNSPSC",autoComplete:"off",className:"form-control busqueda-input",onKeyDown:L}),l("h2",{className:"perfiles-titulos d-flex",children:[" Pais de contratación",a("img",{class:"bandera",src:"/public/images/banderas/listado_nombres/CHL.svg",alt:"Bandera Chile"})]})]}),a("br",{}),a("ul",{className:"tree-root",children:g.map(s=>a(m,{children:s.id_padre_sub_categoria==null&&l("li",{className:`tree-node has-child draggable ${_.includes(s.id)?"expanded":""}`,id:"sector_"+s.id,children:[l("div",{id:s.id,className:"tree-content mt-3 sector",children:[a("i",{className:`tree-arrow has-child ${s.childs.length>0?"bi bi-chevron-down":""}`}),a("input",{type:"checkbox",name:"actividad_economica",onChange:()=>E(s),checked:h.includes(s.id)?"checked":""}),a("span",{className:"tree-anchor",children:a("span",{className:"tree-division tree-division1",onClick:()=>R(s.id),children:a("span",{className:"tree-division__title my-auto",children:s.nombre})})})]},s.id),_.includes(s.id)&&a("ul",{className:"tree-children new-class",children:N.map((e,d)=>a(m,{children:s.id==e.id_padre_sub_categoria&&l("li",{className:`tree-node has-child draggable segmento ${b.includes(e.id)?"expanded":""}`,id:"segmento_"+e.id,children:[l("div",{className:"tree-content segmento",children:[a("i",{className:"tree-arrow has-child ltr"}),a("input",{type:"checkbox",name:"actividad_economica",onChange:()=>E(e),checked:h.includes(e.id)?"checked":""}),a("span",{className:"tree-anchor",children:a("span",{className:"tree-division tree-division1",onClick:()=>j(e.id),children:a(m,{children:d%2==0?a("span",{className:"tree-division__title my-auto",children:e.nombre}):a("span",{className:"tree-division__title-gray my-auto",children:e.nombre})})})})]}),b.includes(e.id)&&a("ul",{className:"tree-children actividad-economica",children:S.map((n,i)=>a(m,{children:e.id==n.id_padre_sub_categoria&&a("li",{className:"tree-node draggable",children:l("div",{className:"tree-content actividad-economica",onClick:()=>E(n),children:[a("input",{type:"checkbox",name:"actividad_economica",onChange:()=>E(n),checked:h.includes(n.id)?"checked":""}),a("span",{className:"tree-anchor children",children:a("span",{className:"tree-division tree-division1",children:a(m,{children:a("span",{className:"tree-division__title my-auto",children:n.nombre})})})})]})})}))})]})}))})]})}))})]})})}),a("div",{className:"perfil-bottons-footer position-relative text-center mt-4",children:a("button",{type:"button",className:"btn btnRadius btn-new-blue",children:"Siguiente"})})]})})]})};export{se as default};
