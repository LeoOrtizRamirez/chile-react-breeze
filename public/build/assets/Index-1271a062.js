import{j as t,a as e,H as J,r as n,F as z}from"./app-0fe4422a.js";import{A as ee}from"./AuthenticatedLayout-0ba0de9a.js";import{$ as D,P as ae,L as ie}from"./Loader-799fd21c.js";import{M as T}from"./Modal-cd652932.js";import{F as E}from"./Form-eb10bd68.js";/* empty css                      *//* empty css                 *//* empty css              */import"./ApplicationLogo-84c5c84e.js";import"./ApplicationLogoLici-f3434a45.js";import"./AuthenticatedLayout-e351db19.js";import"./transition-92f72311.js";import"./createWithBsPrefix-24a184bc.js";import"./CloseButton-04a2c01e.js";import"./hasClass-24afb745.js";import"./ElementChildren-3fa913ae.js";function se({type:S="submit",className:x="",processing:o,children:k,onClick:m}){return t("button",{style:{backgroundColor:"#57C700"},type:S,onClick:m,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${o&&"opacity-25"} `+x,disabled:o,children:[k,e("i",{className:"bi bi-share text-gray-500 iconos-tamano-margen"})]})}function te({type:S="submit",className:x="",processing:o,children:k,onClick:m}){return t("button",{style:{backgroundColor:"#57C700"},type:S,onClick:m,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${o&&"opacity-25"} `+x,disabled:o,children:[k,e("i",{className:"bi bi-folder-minus text-gray-500 iconos-tamano-margen"})]})}const ne=S=>e("a",{href:S.url,target:"_blank",children:e("button",{style:{backgroundColor:"#57C700"},className:"boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ",children:e("i",{className:"bi bi-upload text-gray-500 iconos-tamano-margen"})})});function ce({type:S="submit",className:x="",processing:o,children:k,onClick:m}){return t("button",{style:{backgroundColor:"#57C700"},type:S,onClick:m,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${o&&"opacity-25"} `+x,disabled:o,children:[k,e("i",{className:"bi bi-star text-gray-500 iconos-tamano-margen"})]})}function de({type:S="submit",className:x="",processing:o,children:k,onClick:m}){return t("button",{style:{backgroundColor:"#57C700"},type:S,onClick:m,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${o&&"opacity-25"} `+x,disabled:o,children:[k,e("i",{className:"bi bi-filetype-pdf text-gray-500 iconos-tamano-margen"})]})}function oe({type:S="submit",className:x="",processing:o,children:k,onClick:m}){return t("button",{style:{backgroundColor:"#57C700"},type:S,onClick:m,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${o&&"opacity-25"} `+x,disabled:o,children:[k,e("i",{className:"bi bi-eye text-gray-500 iconos-tamano-margen"})]})}const re=({showBusquedaEstado:S,handleCloseBusquedaEstado:x})=>t(T,{size:"md",dialogClassName:"",contentClassName:"",backdropClassName:"",className:"",centered:!0,show:S,onHide:x,id:"BusquedaEstado",children:[t(T.Header,{closeButton:!0,children:[e(J,{title:"Busqueda estado"}),e("div",{className:"titulo",children:e("span",{children:"Seleciona el estado"})})]}),e(T.Body,{children:t("div",{className:"busqueda-estado",children:[e("div",{children:e("input",{type:"text",className:"buscador",placeholder:"Buscar estado"})}),e("div",{children:e(E,{children:t("div",{className:"form",children:[t(E.Group,{children:[t(E.Check,{className:"todos",children:[e(E.Check.Label,{children:"Seleciona todos los estados"}),e(E.Check.Input,{"aria-label":"todos"})]}),e("hr",{}),t(E.Check,{children:[e(E.Check.Label,{children:"Convocatoria"}),e(E.Check.Input,{"aria-label":"convocatoria"})]}),e("hr",{}),t(E.Check,{children:[e(E.Check.Label,{children:"En evaluacion"}),e(E.Check.Input,{"aria-label":"evaluacion"})]}),e("hr",{}),t(E.Check,{children:[e(E.Check.Label,{children:"Adjudicado"}),e(E.Check.Input,{"aria-label":"adjudicado"})]}),e("hr",{}),t(E.Check,{children:[e(E.Check.Label,{children:"Liquidado"}),e(E.Check.Input,{"aria-label":"liquidado"})]}),e("hr",{}),t(E.Check,{children:[e(E.Check.Label,{children:"Terminado anormalmente o descartado"}),e(E.Check.Input,{"aria-label":"terminado"})]}),e("hr",{})]}),e("button",{type:"submit",className:"boton",children:"Seleccionar"})]})})})]})})]});const le=({showBusquedaUbicacion:S,handleCloseBusquedaUbicacion:x})=>{n.exports.useEffect(()=>{fetch("/localizacion/json").then(s=>s.json()).then(s=>A(s)).catch(s=>console.log("Solicitud fallida",s))},[]),n.exports.useState(!1),n.exports.useState(""),n.exports.useState("");const[o,k]=n.exports.useState([]),[m,A]=n.exports.useState([]);n.exports.useState(!1),n.exports.useState(!1),n.exports.useState(0),n.exports.useState(0);const[I,w]=n.exports.useState([]),[$,j]=n.exports.useState([]);n.exports.useState({id:0,nombre:""});const[y,B]=n.exports.useState([]),[C,q]=n.exports.useState([]),[R,O]=n.exports.useState([]),F=s=>{var i=document.getElementById("sector_"+s);i.classList.toggle("expanded"),I.includes(s)?w(I.filter(a=>a!=s)):w([...I,s]);const b=new RegExp(s,"i");m.filter(function(a){if(b.test(a.id_padre_sub_categoria))return a}).forEach(a=>{if(!C.includes(a))C.push(a);else{const h=C.filter(u=>u.id_padre_sub_categoria!=s);q(h)}})},L=s=>{var i=[];y.forEach(a=>{i.push(a)});var b=o.filter(a=>a.id_padre_sub_categoria==s.id&&a.id_abuelo_sub_categoria==null);if(b.length>0){if(!i.includes(s.id))i.push(s.id);else{const a=i.indexOf(s.id);a>-1&&i.splice(a,1)}b.forEach(a=>{const h=o.filter(u=>u.id_padre_sub_categoria==a.id);if(!y.includes(a.id))i.push(a.id),h.forEach(u=>{if(!y.includes(u.id))i.push(u.id);else{const r=i.indexOf(u.id);r>-1&&i.splice(r,1)}});else{const u=i.indexOf(a.id);u>-1&&i.splice(u,1),h.forEach(r=>{const f=i.indexOf(r.id);f>-1&&i.splice(f,1)})}console.log(a),B(i)})}else{var d=o.filter(a=>a.id_padre_sub_categoria==s.id);if(d.length>0){if(!i.includes(s.id))i.push(s.id);else{const a=i.indexOf(s.id);a>-1&&i.splice(a,1)}d.forEach(a=>{if(!y.includes(a.id))i.push(a.id);else{const h=i.indexOf(a.id);h>-1&&i.splice(h,1)}B(i)})}else{if(!i.includes(s.id))i.push(s.id);else{const a=i.indexOf(s.id);a>-1&&i.splice(a,1)}B(i)}}},U=s=>{if(s.target.value==""){A(o),q([]),O([]),w([]),j([]);return}if(s.key==="Enter"){const f=new RegExp(s.target.value,"i"),_=o.filter(function(c){if(f.test(c.nombre))return c});var i=[],b=[],d=[],a=[],h=[];_.forEach(c=>{c.id_abuelo_sub_categoria!=null&&c.id_padre_sub_categoria!=null&&(d.push(c),a.push(c.id_padre_sub_categoria),b.push(o.filter(p=>p.id==c.id_padre_sub_categoria)[0]),h.push(c.id_abuelo_sub_categoria)),c.id_abuelo_sub_categoria==null&&c.id_padre_sub_categoria!=null&&(b.includes(c)||(b.push(c),b.push(c)),h.includes(c.id_padre_sub_categoria)||(h.push(c.id_padre_sub_categoria),b.push(c))),c.id_abuelo_sub_categoria==null&&c.id_padre_sub_categoria==null&&i.push(c)});var u=null,r=null;d.forEach(c=>{u=o.filter(p=>p.id==c.id_abuelo_sub_categoria)[0],r=o.filter(p=>p.id==c.id_padre_sub_categoria)[0],i.includes(u)||i.push(o.filter(p=>p.id==c.id_abuelo_sub_categoria)[0]),b.includes(r)||i.push(o.filter(p=>p.id==c.id_padre_sub_categoria)[0])}),A(i),q(b),O(d),w(h),j(a),i.forEach(c=>{var p=document.getElementById("sector_"+c.id);p.classList.add("expanded")}),b.forEach(c=>{console.log(c);var p=document.getElementById("segmento_"+c.id);console.log(p),p&&p.classList.add("expanded")})}};return n.exports.useEffect(()=>{},[m]),e(T,{size:"xl",dialogClassName:"",contentClassName:"",backdropClassName:"",className:"",centered:!0,show:S,onHide:x,id:"BusquedaUbicacion",children:e(z,{children:e("div",{className:"contenedor-planes",children:t("div",{className:"bg-white overflow-auto w-full text-center margen-superior custom-scroll",children:[e("h2",{className:"name_section_app",children:"Seleccione la ubicacion"}),e("div",{className:"container mt-4",children:e("div",{className:"tree_categorias tree_1",children:t("div",{className:"tree_categorias__busqueda mb-3 mb-md-4",children:[e("div",{className:"mx-60 mt-30 d-flex justify-content-center",children:e("input",{type:"text",placeholder:"Buscar por ubicacion",autoComplete:"off",className:"form-control busqueda-input",onKeyDown:U})}),e("br",{}),e("ul",{className:"tree-root",children:m.map(s=>e(z,{children:s.id_padre_sub_categoria==null&&t("li",{className:"tree-node has-child draggable",id:"sector_"+s.id,children:[t("div",{id:s.id,className:"tree-content mt-3 sector",children:[e("i",{className:`tree-arrow has-child ${s.childs.length>0?"bi bi-chevron-down":""}`}),e("input",{type:"checkbox",name:"actividad_economica",onChange:()=>L(s),checked:y.includes(s.id)?"checked":""}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",onClick:()=>F(s.id),children:e("span",{className:"tree-division__title my-auto",children:s.nombre})})})]},s.id),I.includes(s.id)&&e("ul",{className:"tree-children new-class",children:C.map((i,b)=>e(z,{children:s.id==i.id_padre_sub_categoria&&e("li",{className:"tree-node has-child draggable segmento",id:"segmento_"+i.id,children:t("div",{className:"tree-content segmento",children:[e("i",{className:"tree-arrow has-child ltr"}),e("input",{type:"checkbox",name:"actividad_economica",onChange:()=>L(i),checked:y.includes(i.id)?"checked":""}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",children:e(z,{children:b%2==0?e("span",{className:"tree-division__title my-auto",children:i.nombre}):e("span",{className:"tree-division__title-gray my-auto",children:i.nombre})})})})]})})}))})]})}))})]})})}),e("div",{className:"perfil-bottons-footer position-relative text-center mt-4",children:e("button",{type:"button",className:"btn btnRadius btn-new-blue",children:"Siguiente"})})]})})})})};const ue=({showBusquedaActividad:S,handleCloseBusquedaActividad:x})=>{n.exports.useEffect(()=>{fetch("/actividades-economicas/json").then(d=>d.json()).then(d=>A(d)).catch(d=>console.log("Solicitud fallida",d))},[]),n.exports.useState(!1),n.exports.useState(""),n.exports.useState("");const[o,k]=n.exports.useState([]),[m,A]=n.exports.useState([]);n.exports.useState(!1),n.exports.useState(!1),n.exports.useState(0);const[I,w]=n.exports.useState(0),[$,j]=n.exports.useState([]),[y,B]=n.exports.useState([]);n.exports.useState({id:0,nombre:""});const[C,q]=n.exports.useState([]),[R,O]=n.exports.useState([]),[F,L]=n.exports.useState([]),U=d=>{var a=document.getElementById("sector_"+d);a.classList.toggle("expanded"),$.includes(d)?j($.filter(r=>r!=d)):j([...$,d]);const h=new RegExp(d,"i");m.filter(function(r){if(h.test(r.id_padre_sub_categoria))return r}).forEach(r=>{if(!R.includes(r))R.push(r);else{const f=R.filter(_=>_.id_padre_sub_categoria!=d);O(f)}})},s=d=>{var a=document.getElementById("segmento_"+d);a.classList.toggle("expanded"),y.includes(d)?B(y.filter(r=>r!=d)):B([...y,d]);const h=new RegExp(d,"i");m.filter(function(r){if(h.test(r.id_padre_sub_categoria))return r}).forEach(r=>{if(!F.includes(r))F.push(r);else{const f=F.filter(_=>_.id_padre_sub_categoria!=d);L(f)}}),w(d)},i=d=>{var a=[];C.forEach(r=>{a.push(r)});var h=o.filter(r=>r.id_padre_sub_categoria==d.id&&r.id_abuelo_sub_categoria==null);if(h.length>0){if(!a.includes(d.id))a.push(d.id);else{const r=a.indexOf(d.id);r>-1&&a.splice(r,1)}h.forEach(r=>{const f=o.filter(_=>_.id_padre_sub_categoria==r.id);if(!C.includes(r.id))a.push(r.id),f.forEach(_=>{if(!C.includes(_.id))a.push(_.id);else{const c=a.indexOf(_.id);c>-1&&a.splice(c,1)}});else{const _=a.indexOf(r.id);_>-1&&a.splice(_,1),f.forEach(c=>{const p=a.indexOf(c.id);p>-1&&a.splice(p,1)})}q(a)})}else{var u=o.filter(r=>r.id_padre_sub_categoria==d.id);if(u.length>0){if(!a.includes(d.id))a.push(d.id);else{const r=a.indexOf(d.id);r>-1&&a.splice(r,1)}u.forEach(r=>{if(!C.includes(r.id))a.push(r.id);else{const f=a.indexOf(r.id);f>-1&&a.splice(f,1)}q(a)})}else{if(!a.includes(d.id))a.push(d.id);else{const r=a.indexOf(d.id);r>-1&&a.splice(r,1)}q(a)}}},b=d=>{if(d.target.value==""){A(o),O([]),L([]),j([]),B([]);return}if(d.key==="Enter"){const p=new RegExp(d.target.value,"i"),V=o.filter(function(v){if(p.test(v.nombre))return v});var a=[],h=[],u=[],r=[],f=[];V.forEach(v=>{v.id_abuelo_sub_categoria!=null&&v.id_padre_sub_categoria!=null&&(u.push(v),r.push(v.id_padre_sub_categoria),h.push(o.filter(P=>P.id==v.id_padre_sub_categoria)[0]),f.push(v.id_abuelo_sub_categoria)),v.id_abuelo_sub_categoria==null&&v.id_padre_sub_categoria!=null&&(h.includes(v)||(h.push(v),h.push(v)),f.includes(v.id_padre_sub_categoria)||(f.push(v.id_padre_sub_categoria),h.push(v))),v.id_abuelo_sub_categoria==null&&v.id_padre_sub_categoria==null&&a.push(v)});var _=null,c=null;u.forEach(v=>{_=o.filter(P=>P.id==v.id_abuelo_sub_categoria)[0],c=o.filter(P=>P.id==v.id_padre_sub_categoria)[0],a.includes(_)||a.push(o.filter(P=>P.id==v.id_abuelo_sub_categoria)[0]),h.includes(c)||a.push(o.filter(P=>P.id==v.id_padre_sub_categoria)[0])}),A(a),O(h),L(u),j(f),B(r)}};return n.exports.useEffect(()=>{},[m]),console.log("sectores:",m),e(T,{size:"xl",dialogClassName:"",contentClassName:"",backdropClassName:"",className:"",centered:!0,show:S,onHide:x,id:"BusquedaActividad",children:e(z,{children:e("div",{className:"contenedor-planes",children:t("div",{className:"bg-white overflow-auto w-full text-center margen-superior custom-scroll",children:[t("h2",{className:"perfiles-titulos crear",children:[e("span",{className:"c-verde",children:"Crea"})," tu primer perfil de negocio"]}),e("div",{className:"container mt-4",children:e("div",{className:"tree_categorias tree_1",children:t("div",{className:"tree_categorias__busqueda mb-3 mb-md-4",children:[t("div",{className:"perfil-guias__indicador perfil-guias__indicador--activo",children:[e("i",{className:"icon-Paso-1-click"})," ",e("span",{children:"Actividad económica"})]}),t("div",{className:"mx-60 mt-30 d-flex",children:[e("button",{type:"button",className:"icon-Buscar-click"}),e("input",{type:"text",placeholder:"Busca por actividad económica o UNSPSC",autoComplete:"off",className:"form-control busqueda-input",onKeyDown:b}),t("h2",{className:"perfiles-titulos d-flex",children:[" ","Pais de contratación",e("img",{class:"bandera",src:"/public/images/banderas/listado_nombres/CHL.svg",alt:"Bandera Chile"})]})]}),e("br",{}),e("ul",{className:"tree-root",children:m.map(d=>e(z,{children:d.id_padre_sub_categoria==null&&t("li",{className:`tree-node has-child draggable ${$.includes(d.id)?"expanded":""}`,id:"sector_"+d.id,children:[t("div",{id:d.id,className:"tree-content mt-3 sector",children:[e("i",{className:`tree-arrow has-child ${d.childs.length>0?"bi bi-chevron-down":""}`}),e("input",{type:"checkbox",name:"actividad_economica",onChange:()=>i(d),checked:C.includes(d.id)?"checked":""}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",onClick:()=>U(d.id),children:e("span",{className:"tree-division__title my-auto",children:d.nombre})})})]},d.id),$.includes(d.id)&&e("ul",{className:"tree-children new-class",children:R.map((a,h)=>e(z,{children:d.id==a.id_padre_sub_categoria&&t("li",{className:`tree-node has-child draggable segmento ${y.includes(a.id)?"expanded":""}`,id:"segmento_"+a.id,children:[t("div",{className:"tree-content segmento",children:[e("i",{className:"tree-arrow has-child ltr"}),e("input",{type:"checkbox",name:"actividad_economica",onChange:()=>i(a),checked:C.includes(a.id)?"checked":""}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",onClick:()=>s(a.id),children:e(z,{children:h%2==0?e("span",{className:"tree-division__title my-auto",children:a.nombre}):e("span",{className:"tree-division__title-gray my-auto",children:a.nombre})})})})]}),y.includes(a.id)&&e("ul",{className:"tree-children actividad-economica",children:F.map((u,r)=>e(z,{children:a.id==u.id_padre_sub_categoria&&e("li",{className:"tree-node draggable",children:t("div",{className:"tree-content actividad-economica",onClick:()=>i(u),children:[e("input",{type:"checkbox",name:"actividad_economica",onChange:()=>i(u),checked:C.includes(u.id)?"checked":""}),e("span",{className:"tree-anchor children",children:e("span",{className:"tree-division tree-division1",children:e(z,{children:e("span",{className:"tree-division__title my-auto",children:u.nombre})})})})]})})}))})]})}))})]})}))})]})})}),e("div",{className:"perfil-bottons-footer position-relative text-center mt-4",children:e("button",{type:"button",className:"btn btnRadius btn-new-blue",children:"Siguiente"})})]})})})})};const he=({showBusquedaTiposCompras:S,handleCloseBusquedaTiposCompras:x})=>{n.exports.useEffect(()=>{fetch("/tiposcompras/json").then(s=>s.json()).then(s=>A(s)).catch(s=>console.log("Solicitud fallida",s))},[]),n.exports.useState(!1),n.exports.useState(""),n.exports.useState("");const[o,k]=n.exports.useState([]),[m,A]=n.exports.useState([]);n.exports.useState(!1),n.exports.useState(!1),n.exports.useState(0),n.exports.useState(0);const[I,w]=n.exports.useState([]),[$,j]=n.exports.useState([]);n.exports.useState({id:0,nombre:""});const[y,B]=n.exports.useState([]),[C,q]=n.exports.useState([]),[R,O]=n.exports.useState([]),F=s=>{var i=document.getElementById("sector_"+s);i.classList.toggle("expanded"),I.includes(s)?w(I.filter(a=>a!=s)):w([...I,s]);const b=new RegExp(s,"i");m.filter(function(a){if(b.test(a.id_padre_sub_categoria))return a}).forEach(a=>{if(!C.includes(a))C.push(a);else{const h=C.filter(u=>u.id_padre_sub_categoria!=s);q(h)}})},L=s=>{var i=[];y.forEach(a=>{i.push(a)});var b=o.filter(a=>a.id_padre_sub_categoria==s.id&&a.id_abuelo_sub_categoria==null);if(b.length>0){if(!i.includes(s.id))i.push(s.id);else{const a=i.indexOf(s.id);a>-1&&i.splice(a,1)}b.forEach(a=>{const h=o.filter(u=>u.id_padre_sub_categoria==a.id);if(!y.includes(a.id))i.push(a.id),h.forEach(u=>{if(!y.includes(u.id))i.push(u.id);else{const r=i.indexOf(u.id);r>-1&&i.splice(r,1)}});else{const u=i.indexOf(a.id);u>-1&&i.splice(u,1),h.forEach(r=>{const f=i.indexOf(r.id);f>-1&&i.splice(f,1)})}console.log(a),B(i)})}else{var d=o.filter(a=>a.id_padre_sub_categoria==s.id);if(d.length>0){if(!i.includes(s.id))i.push(s.id);else{const a=i.indexOf(s.id);a>-1&&i.splice(a,1)}d.forEach(a=>{if(!y.includes(a.id))i.push(a.id);else{const h=i.indexOf(a.id);h>-1&&i.splice(h,1)}B(i)})}else{if(!i.includes(s.id))i.push(s.id);else{const a=i.indexOf(s.id);a>-1&&i.splice(a,1)}B(i)}}},U=s=>{if(s.target.value==""){A(o),q([]),O([]),w([]),j([]);return}if(s.key==="Enter"){const f=new RegExp(s.target.value,"i"),_=o.filter(function(c){if(f.test(c.nombre))return c});var i=[],b=[],d=[],a=[],h=[];_.forEach(c=>{c.id_abuelo_sub_categoria!=null&&c.id_padre_sub_categoria!=null&&(d.push(c),a.push(c.id_padre_sub_categoria),b.push(o.filter(p=>p.id==c.id_padre_sub_categoria)[0]),h.push(c.id_abuelo_sub_categoria)),c.id_abuelo_sub_categoria==null&&c.id_padre_sub_categoria!=null&&(b.includes(c)||(b.push(c),b.push(c)),h.includes(c.id_padre_sub_categoria)||(h.push(c.id_padre_sub_categoria),b.push(c))),c.id_abuelo_sub_categoria==null&&c.id_padre_sub_categoria==null&&i.push(c)});var u=null,r=null;d.forEach(c=>{u=o.filter(p=>p.id==c.id_abuelo_sub_categoria)[0],r=o.filter(p=>p.id==c.id_padre_sub_categoria)[0],i.includes(u)||i.push(o.filter(p=>p.id==c.id_abuelo_sub_categoria)[0]),b.includes(r)||i.push(o.filter(p=>p.id==c.id_padre_sub_categoria)[0])}),A(i),q(b),O(d),w(h),j(a),i.forEach(c=>{var p=document.getElementById("sector_"+c.id);p.classList.add("expanded")}),b.forEach(c=>{console.log(c);var p=document.getElementById("segmento_"+c.id);console.log(p),p&&p.classList.add("expanded")})}};return n.exports.useEffect(()=>{},[m]),console.log("sectores:",m),e(T,{size:"xl",dialogClassName:"",contentClassName:"",backdropClassName:"",className:"",centered:!0,show:S,onHide:x,id:"BusquedaTiposCompras",children:e(z,{children:e("div",{className:"contenedor-planes",children:t("div",{className:"bg-white overflow-auto w-full text-center margen-superior custom-scroll",children:[e("h2",{className:"name_section_app",children:"Seleccione la ubicacion"}),e("div",{className:"container mt-4",children:e("div",{className:"tree_categorias tree_1",children:t("div",{className:"tree_categorias__busqueda mb-3 mb-md-4",children:[e("div",{className:"mx-60 mt-30 d-flex justify-content-center",children:e("input",{type:"text",placeholder:"Buscar por ubicacion",autoComplete:"off",className:"form-control busqueda-input",onKeyDown:U})}),e("br",{}),e("ul",{className:"tree-root",children:m.map(s=>e(z,{children:s.id_padre_sub_categoria==null&&t("li",{className:"tree-node has-child draggable",id:"sector_"+s.id,children:[t("div",{id:s.id,className:"tree-content mt-3 sector",children:[e("i",{className:`tree-arrow has-child ${s.childs.length>0?"bi bi-chevron-down":""}`}),e("input",{type:"checkbox",name:"actividad_economica",onChange:()=>L(s),checked:y.includes(s.id)?"checked":""}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",onClick:()=>F(s.id),children:e("span",{className:"tree-division__title my-auto",children:s.nombre})})})]},s.id),I.includes(s.id)&&e("ul",{className:"tree-children new-class",children:C.map((i,b)=>e(z,{children:s.id==i.id_padre_sub_categoria&&e("li",{className:"tree-node has-child draggable segmento",id:"segmento_"+i.id,children:t("div",{className:"tree-content segmento",children:[e("i",{className:"tree-arrow has-child ltr"}),e("input",{type:"checkbox",name:"actividad_economica",onChange:()=>L(i),checked:y.includes(i.id)?"checked":""}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",children:e(z,{children:b%2==0?e("span",{className:"tree-division__title my-auto",children:i.nombre}):e("span",{className:"tree-division__title-gray my-auto",children:i.nombre})})})})]})})}))})]})}))})]})})}),e("div",{className:"perfil-bottons-footer position-relative text-center mt-4",children:e("button",{type:"button",className:"btn btnRadius btn-new-blue",children:"Siguiente"})})]})})})})};const pe=({showBusquedaAvanzada:S,handleCloseBusquedaAvanzada:x})=>{const[o,k]=n.exports.useState({EntidadContratante:"",objeto:"",numeroContrato:"",modalidad:"",actividadEconomica:"",ubicacion:"",estado:"",portalOrigen:"",cuantiaDesde:"",cuantiaHasta:"",fechaDesde:"",fechaHasta:"",contratista:""}),m=_=>{const{name:c,value:p}=_.target;k({...o,[c]:p})},A=()=>{k({EntidadContratante:"",objeto:"",numeroContrato:"",modalidad:"",actividadEconomica:"",ubicacion:"",estado:"",portalOrigen:"",cuantiaDesde:"",cuantiaHasta:"",fechaDesde:"",fechaHasta:"",contratista:""})},I=_=>{_.preventDefault(),console.log(o)},w=n.exports.useRef(null),[$,j]=n.exports.useState("text"),y=()=>{j("date"),w.current.defaultValue=""},B=()=>{j("text")},[C,q]=n.exports.useState(!1),R=()=>q(!1),O=()=>q(!0),[F,L]=n.exports.useState(!1),U=()=>L(!1),s=()=>L(!0),[i,b]=n.exports.useState(!1),d=()=>b(!1),a=()=>b(!0),[h,u]=n.exports.useState(!1),r=()=>u(!1),f=()=>u(!0);return t(T,{size:"lg",dialogClassName:"",contentClassName:"",backdropClassName:"",className:"content-modal-busqueda-avanzada",centered:!0,show:S,onHide:x,id:"modalBusquedaAvanzada",children:[t(T.Header,{closeButton:!0,id:"header-modal-busqueda-avanzada",children:[e(J,{title:"Busqueda Avanzada"}),e("button",{className:"circulo",onClick:x,children:e("i",{class:"bi bi-arrow-left iconos"})}),e("div",{className:"titulo",children:e("span",{children:"Búsqueda avanzada"})})]}),e(T.Body,{className:"test",children:e("div",{id:"modal-busqueda-avanzada",children:t(E,{onSubmit:I,className:"form-container",children:[t("span",{children:[e("i",{class:"bi bi-bank iconos"}),"Entidad contratante:"]}),e("input",{type:"text",name:"EntidadContratante",value:o.EntidadContratante,onChange:m,placeholder:"Ingresa la entidad contratante"}),t("span",{children:[e("i",{class:"bi bi-list-nested iconos"}),"Objeto:"]}),e("input",{type:"text",name:"objeto",value:o.objeto,onChange:m,placeholder:"Ingresa palabras claves del objeto del proceso"}),t("div",{className:"pareja",children:[t("div",{className:"size",children:[t("span",{children:[e("i",{class:"bi bi-asterisk iconos"}),"Numero de contrato:"]}),e("input",{type:"text",name:"numeroContrato",value:o.numeroContrato,onChange:m,placeholder:"Ingresa el número del proceso"})]}),t("div",{className:"size",children:[t("span",{children:[e("i",{class:"bi bi-tag iconos"}),"Modalidad:"]}),e("input",{type:"text",name:"modalidad",value:o.modalidad,onChange:m,onClick:f,placeholder:"Ingresa la modalidad de contrato"}),e(he,{showBusquedaTiposCompras:h,handleCloseBusquedaTiposCompras:r})]})]}),t("span",{children:[e("i",{class:"bi bi-lightning-fill iconos"}),"Actividad económica:"]}),e("input",{type:"text",name:"actividadEconomica",value:o.actividadEconomica,onChange:m,onClick:a,placeholder:"Ingresa la(s) actividade(s) económica(s)"}),e(ue,{showBusquedaActividad:i,handleCloseBusquedaActividad:d}),t("span",{children:[e("i",{class:"bi bi-geo-alt-fill iconos"}),"Ubicación:"]}),e("input",{type:"text",name:"ubicacion",value:o.ubicacion,onChange:m,onClick:s,placeholder:"Ingresa la(s) ubicacióne(s)"}),e(le,{showBusquedaUbicacion:F,handleCloseBusquedaUbicacion:U}),t("div",{className:"pareja",children:[t("div",{className:"size",children:[t("span",{children:[e("i",{class:"bi bi-clipboard2-fill iconos"}),"Estados:"]}),e("input",{type:"text",onClick:O,placeholder:"Selecione los estados de proceso"}),e(re,{showBusquedaEstado:C,handleCloseBusquedaEstado:R})]}),t("div",{className:"size",children:[t("span",{children:[e("i",{class:"bi bi-globe iconos"}),"Portal de origen:"]}),e("input",{type:"text",name:"portalOrigen",value:o.portalOrigen,onChange:m,placeholder:"Ingresa el portal de origen"})]})]}),t("div",{className:"pareja",children:[t("div",{className:"size",children:[t("span",{children:[e("i",{class:"bi bi-cash-coin iconos"}),"Cuantía:"]}),e("input",{type:"text",name:"cuantiaDesde",value:o.cuantiaDesde,onChange:m,placeholder:"Desde"})]}),t("div",{className:"size",children:[e("span",{children:" "}),e("input",{type:"text",name:"cuantiaHasta",value:o.cuantiaHasta,onChange:m,placeholder:"Hasta"})]})]}),t("div",{className:"pareja",children:[t("div",{className:"size",children:[t("span",{children:[e("i",{class:"bi bi-calendar-date-fill iconos"}),"Fecha de publicación:"]}),e("input",{type:$,name:"fechaDesde",value:o.fechaDesde,onChange:m,placeholder:"Inicio",ref:w,onFocus:y,onBlur:B})]}),t("div",{className:"size",children:[e("span",{children:" "}),e("input",{type:$,name:"fechaHasta",value:o.fechaHasta,onChange:m,placeholder:"Fin",ref:w,onFocus:y,onBlur:B})]})]}),t("span",{children:[e("i",{class:"bi bi-person-fill iconos"}),"Contratista(s):"]}),e("input",{type:"text",name:"contratista",value:o.contratista,onChange:m,placeholder:"Ingresa el contratista"}),t("div",{className:"botones",children:[e("button",{className:"limpiar",type:"button",onClick:A,children:"Limpiar"}),e("button",{className:"buscar",type:"submit",children:"Buscar"})]})]})})})]})};const ze=({auth:S,contratos:x})=>{const[o,k]=n.exports.useState(x.data);D("th").click(function(){var l=D(this).parents("table").eq(0),N=l.find("tr:gt(0)").toArray().sort(m(D(this).index()));this.asc=!this.asc,this.asc||(N=N.reverse());for(var g=0;g<N.length;g++)l.append(N[g]);I(D(this),this.asc)});function m(l){return function(N,g){var H=A(N,l),M=A(g,l);return D.isNumeric(H)&&D.isNumeric(M)?H-M:H.localeCompare(M)}}function A(l,N){return D(l).children("td").eq(N).html()}function I(l,N){D("th").each(function(g){D(this).removeClass("sorting"),D(this).removeClass("asc"),D(this).removeClass("desc")}),l.addClass("sorting"),N?l.addClass("asc"):l.addClass("desc")}const[w,$]=n.exports.useState(!0),[j,y]=n.exports.useState(0),B=l=>{y(l.id)},C=()=>{y(0)},[q,R]=n.exports.useState(0),[O,F]=n.exports.useState(0);n.exports.useEffect(()=>{document.getElementById("div1");var l=document.getElementById("tabla");document.getElementById("wrapper1");var N=document.getElementById("scroll-table");l&&R(l.offsetWidth),N&&F(N.offsetWidth);var g=document.getElementById("wrapper1"),H=document.querySelector("#scroll-table");g&&(g.onscroll=function(){H.scrollLeft=g.scrollLeft}),H&&(H.onscroll=function(){g.scrollLeft=H.scrollLeft})});const[L,U]=n.exports.useState(x.to),[s,i]=n.exports.useState(x.from),[b,d]=n.exports.useState(x.total),[a,h]=n.exports.useState(x.next_page_url),[u,r]=n.exports.useState(x.prev_page_url),[f,_]=n.exports.useState(""),[c,p]=n.exports.useState(""),V=()=>{var l=document.getElementById("form_busqueda_rapida");let N=new FormData(l),g={};return N.forEach(function(M,Z){g[Z]=M}),v(g)},v=l=>{const N=[];for(let g in l)N.push(encodeURIComponent(g)+"="+encodeURIComponent(l[g]));return N.join("&")},P=l=>{if(l==null)return;const N=V();W(!0),fetch(l+"&"+N).then(g=>g.json()).then(g=>{G(g),W(!1)})},K=n.exports.useRef(0);n.exports.useEffect(()=>{K.current!=0&&K.current.addEventListener("keypress",function(l){if(l.key==="Enter"){l.preventDefault();const N=V();console.log(N),W(!0),fetch("/contratos/?"+N).then(g=>g.json()).then(g=>{G(g),W(!1)})}})},[]);const G=l=>{k(l.data),U(l.to),i(l.from),d(l.total),h(l.next_page_url),r(l.prev_page_url)};n.exports.useEffect(()=>{const l=window.location.search,N=new URLSearchParams(l),g=N.get("fecha_publicacion");g!=null&&p(g);const H=N.get("buscador_rapido");H!=null&&_(H)},[]);const[X,W]=n.exports.useState(!1),[Y,Q]=n.exports.useState(!1);return t(ee,{auth:S,children:[e("link",{rel:"shortcut icon",href:"#"}),t("div",{children:[t("div",{className:"contenedor-filtros",children:[t("div",{className:"",children:[t("form",{method:"get",name:"form_busqueda_rapida",id:"form_busqueda_rapida",children:[e("input",{ref:K,id:"buscador_rapido",className:"buscador_rapido",name:"buscador_rapido",type:"text",value:f,placeholder:"Búsqueda rápida",onChange:l=>_(l.target.value)}),e("input",{name:"fecha_publicacion",type:"hidden",value:c}),e("input",{name:"type",type:"hidden",value:"fetch"})]}),e("span",{className:"material-symbols-outlined posicion-lupa-contratos",children:"search"})]}),e("div",{className:"",children:t("span",{children:[t("button",{onClick:()=>Q(!0),className:"mb-2",children:[e("span",{className:"material-symbols-outlined text-btn-avanzado",children:"list"}),e("span",{className:"text-btn-avanzado",children:"Búsqueda avanzada"})]}),e(pe,{showBusquedaAvanzada:Y,handleCloseBusquedaAvanzada:()=>Q(!1)})]})}),t("div",{className:"input-filtro-estado",children:[e("span",{className:"input-filtro-estado-span",children:"Visualizar:"}),t("select",{className:"input-visualizar",children:[e("option",{value:"",children:"todos"}),e("option",{value:"",children:"Vistos recientemente"}),e("option",{value:"",children:"No Leidos"})]})]}),e("div",{children:e(ae,{nextHandler:()=>P(a),prevHandler:()=>P(u),currentPage:s,totalPaginas:L,totalElementos:b})})]}),e("div",{className:"contenedor-contratos",children:e("div",{className:"alto-tabla bg-white overflow-auto",id:"scroll-table",children:X?e(ie,{}):t(z,{children:[e("div",{id:"wrapper1",style:{width:O>0?O:0+"px"},children:e("div",{id:"div1",style:{width:q>0?q:0+"px"}})}),t("table",{id:"tabla",className:"w-full bg-white border tabla table-hover",children:[e("thead",{className:"cabecera-tabla",style:{backgroundColor:"#00a1c9"},children:t("tr",{className:"bg-paginador text-white uppercase leading-normal",children:[e("th",{style:{padding:"0px 0px"},children:"Acciones"}),e("th",{style:{padding:"0px 5px"},children:"Portal"}),e("th",{style:{padding:"0px 80px"},children:"Entidad"}),e("th",{style:{padding:"0px 80px"},children:"Objeto"}),e("th",{style:{padding:"0px 35px"},children:"Cuantía"}),e("th",{style:{padding:"0px 80px"},children:"Modalidad"}),e("th",{style:{padding:"0px 30px"},children:"Número"}),e("th",{style:{padding:"0px 0px"},children:"Estado"}),e("th",{style:{padding:"0px 35px"},children:"Publicada"}),e("th",{style:{padding:"0px 35px"},children:"Ubicación"}),e("th",{style:{padding:"0px 80px"},children:"Actividad económica"})]})}),e("tbody",{children:o.map(l=>t("tr",{className:"tr-users",children:[e("td",{className:"border border-gray-200 text-left mw-90",children:t("div",{className:"iconos-horizontal width-columna-acciones",children:[t("div",{children:[e(de,{}),e(ne,{url:l.link}),e(ce,{})]}),t("div",{className:"",children:[e(se,{}),e(te,{}),e(oe,{})]})]})}),e("td",{className:"border border-gray-200 text-left margen-textos",children:e("span",{className:"circulo",children:l.fuente.alias_portal})}),e("td",{className:"border border-gray-200 text-left margen-textos",children:e("span",{className:"data-text width-columna-menor",children:l.entidad_contratante})}),t("td",{className:"border border-gray-200 text-left margen-textos mw-200",children:[w&&e(z,{children:j!=l.id&&t("span",{className:"data-text",children:[l.objeto.substr(0,40),"..."," ",e("a",{className:"text-primary",onClick:()=>B(l),children:"Ver más"})]})}),j==l.id&&e("div",{className:"showmore",children:t("span",{className:"data-text",children:[l.objeto,e("a",{className:"text-primary",onClick:()=>C(),children:"Ver menos"})]})})]}),e("td",{className:"border border-gray-200 text-left margen-textos width-columna-menor",children:l.valor>0?"$"+l.valor.toLocaleString("ch-CH"):l.valor_texto}),e("td",{className:"border border-gray-200 text-left margen-textos mw-200",children:e("span",{className:"data-text ",children:l.modalidad})}),e("td",{className:"border border-gray-200 text-left margen-textos ",children:e("span",{className:"data-text ",children:l.codigo_proceso})}),e("td",{className:"border border-gray-200 text-left color-estado margen-textos width-columna-menor",children:e("span",{className:"data-text ",children:l.estado_proceso})}),e("td",{className:"border border-gray-200 text-left margen-textos",children:e("span",{className:"data-text width-columna-menor",children:l.fecha_publicacion})}),e("td",{className:"border border-gray-200 text-left margen-textos width-columna-menor",children:e("span",{className:"data-text ",children:l.ubicacion})}),e("td",{className:"border border-gray-200 text-left margen-textos",children:e("span",{className:"data-text ",children:l.actividad_economica})})]},l.id))})]}),o.length<=0&&e("div",{id:"mensajes-personalizado-busqueda",className:"container-fluid content_blank_interno",children:t("div",{className:"row justify-content-center align-items-center",children:[e("div",{className:"col-md-4 col-sm-4 offset-md-1 offset-sm-1",children:e("img",{src:"https://col.licitaciones.info/img/mensajes-personalisados/sin-resultados-busqueda.png",alt:"",className:"img-fluid mensaje-imagen"})}),e("div",{className:"col-md-5 col-sm-5 offset-sm-1 offset-md-1",children:t("div",{className:"estructura-mensaje-personalizado",children:[t("h4",{className:"text-center titulo-personalizado",children:[e("b",{className:"text-rojo",children:"No se encontró"})," ","el resultado."]}),t("div",{className:"position-relative",children:[e("span",{className:"icon-Bombillo mensaje-icono"}),e("p",{className:"mensaje-personalizado d-block text-left",children:"Prueba cambiando tus opciones de búsqueda e intentalo nuevamente."})]})]})})]})})]})})})]})]})};export{ze as default};
