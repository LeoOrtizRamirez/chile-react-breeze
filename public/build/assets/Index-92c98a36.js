import{r as o,j as c,a as e,H as W,F}from"./app-64dd4f04.js";import{A as X}from"./AuthenticatedLayout-a5b2ae84.js";import{A as Y}from"./MenuOpciones-90291e32.js";/* empty css                      */import{N as M,M as S}from"./Modal-2837e60c.js";import{T as Z,a as ee}from"./estilos-toast-ae6833eb.js";import"./font-unicolor-30ac5ed1.js";import"./estilos-capa-autentificacion-c48c534a.js";import"./ApplicationLogoLici-979f8411.js";import"./transition-b89faa7b.js";import"./createWithBsPrefix-bd09e636.js";import"./hasClass-7731e75d.js";import"./useTimeout-31f5c86d.js";const fe=({auth:$,tiposcompras:H})=>{const[D,p]=o.exports.useState(!1),[L,E]=o.exports.useState(""),[C,b]=o.exports.useState(""),[d,ie]=o.exports.useState(H),[k,I]=o.exports.useState(H);o.exports.useState(!1),o.exports.useState(!1),o.exports.useState(0);const[ae,q]=o.exports.useState(0),[f,_]=o.exports.useState([]),[v,N]=o.exports.useState([]),[u,R]=o.exports.useState({id:0,nombre:""}),[h,g]=o.exports.useState([]),[x,w]=o.exports.useState([]),[O,A]=o.exports.useState(!1),y=()=>A(!1),z=()=>{u.id!=0?A(!0):(E("Debes seleccionar uno"),b("icon-error"),p(!0))},G=()=>{u.id!=0?window.location.replace("/tiposcompras/"+u.id+"/edit"):(E("Debes seleccionar uno"),b("icon-error"),p(!0))},J=i=>{f.includes(i)?_(f.filter(s=>s!=i)):_([...f,i]);const t=new RegExp(i,"i");k.filter(function(s){if(t.test(s.id_padre_sub_categoria))return s}).forEach(s=>{if(!h.includes(s))h.push(s);else{const m=h.filter(l=>l.id_padre_sub_categoria!=i);g(m)}})},K=i=>{v.includes(i)?N(v.filter(s=>s!=i)):N([...v,i]);const t=new RegExp(i,"i");k.filter(function(s){if(t.test(s.id_padre_sub_categoria))return s}).forEach(s=>{if(!x.includes(s))x.push(s);else{const m=x.filter(l=>l.id_padre_sub_categoria!=i);w(m)}}),q(i)},T=i=>{R(i)},P=i=>{if(i.target.value==""){console.log("primer if"),I(d),g([]),w([]),_([]),N([]);return}if(i.key==="Enter"){console.log("enter");const U=new RegExp(i.target.value,"i"),V=d.filter(function(a){if(U.test(a.nombre))return a});var t=[],r=[],s=[],m=[],l=[];V.forEach(a=>{a.id_abuelo_sub_categoria!=null&&a.id_padre_sub_categoria!=null&&(s.push(a),m.push(a.id_padre_sub_categoria),r.push(d.filter(n=>n.id==a.id_padre_sub_categoria)[0]),l.push(a.id_abuelo_sub_categoria)),a.id_abuelo_sub_categoria==null&&a.id_padre_sub_categoria!=null&&(r.includes(a)||r.push(a),l.includes(a.id_padre_sub_categoria)||l.push(a.id_padre_sub_categoria)),a.id_abuelo_sub_categoria==null&&a.id_padre_sub_categoria==null&&t.push(a)});var j=null,B=null;s.forEach(a=>{j=d.filter(n=>n.id==a.id_abuelo_sub_categoria)[0],B=d.filter(n=>n.id==a.id_padre_sub_categoria)[0],t.includes(j)||t.push(d.filter(n=>n.id==a.id_abuelo_sub_categoria)[0]),r.includes(B)||t.push(d.filter(n=>n.id==a.id_padre_sub_categoria)[0])}),I(t),g(r),w(s),_(l),N(m)}else console.log("imprimiendo e.key"),console.log(i.key)},Q=()=>{fetch("/tiposcompras/"+u.id+"/delete").then(i=>i.json()).then(i=>{if(i.type=="Success"){b("icon-check");var t=h.filter(r=>r.id!=u.id);g(t),R({id:0,nombre:""})}else b("icon-error");E(i.message),p(!0),A(!1)})};return c(X,{auth:$,children:[e(W,{title:"Tipos Compras"}),e(Z,{position:"bottom-start",children:e(ee,{onClose:()=>p(!1),show:D,delay:3e3,autohide:!0,children:c("div",{className:`notification-toast ${C=="icon-error"?"error":"success"}`,children:[e("span",{className:`toast-icon ${C=="icon-error"?"toast-danger":"toast-success"}`,children:e("span",{className:C})}),e("p",{className:"title",children:L}),e("button",{type:"button",className:"icon-close m-auto",onClick:()=>p(!1)})]})})}),c("div",{className:"contenedor-planes",children:[e("div",{className:"posicion-opciones-planes",children:e(Y,{})}),c("div",{className:"bg-white overflow-auto w-full text-center margen-superior",children:[e("h2",{className:"name_section_app",children:"Tipos Compras"}),c("div",{className:"container mt-4",children:[e("div",{className:"tree_categorias tree_1",children:e("div",{className:"tree_categorias__busqueda mb-3 mb-md-4",children:c("div",{className:"mx-auto",children:[e("input",{type:"text",placeholder:"Buscar tipo compra",autoComplete:"off",className:"form-control m-auto",onChange:P}),e("i",{className:"icon-Cancelar"}),e("button",{type:"button",className:"icon-Buscar-click",children:e("i",{className:"bi bi-search"})}),e("br",{}),c("div",{className:"botones",children:[e(M.Link,{href:route("createTiposCompras"),className:"flex  ml-4 text-probar ",children:e("i",{className:"bi bi-plus-square-fill"})}),e(M.Link,{onClick:G,className:"flex  ml-4 text-probar ",children:e("i",{className:"bi bi-pencil-fill"})}),e(M.Link,{onClick:z,className:"flex  ml-4 text-probar ",children:e("i",{className:"bi bi-trash3"})})]}),k.map(i=>e(F,{children:i.id_padre_sub_categoria==null&&c(F,{children:[c("div",{className:"tree-content mt-3 sector ",onClick:()=>J(i.id),children:[e("i",{className:`tree-arrow has-child ${i.childs.length>0?"bi bi-chevron-down":""}`}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",children:e("span",{className:"tree-division__title my-auto",children:i.nombre})})})]},i.id),f.includes(i.id)&&e("ul",{className:"tree-children",children:h.map((t,r)=>c("li",{"data-id":"20504",className:"tree-node has-child expanded draggable",onClick:()=>T(t),children:[c("div",{className:"tree-content segmento",onClick:()=>K(t.id),children:[e("i",{className:"tree-arrow expanded has-child ltr"}),e("input",{type:"radio",name:"actividad_economica",onClick:()=>T(t),checked:t.id==u.id?"checked":""}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",children:e(F,{children:r%2==0?e("span",{className:"tree-division__title my-auto",children:t.nombre}):e("span",{className:"tree-division__title-gray my-auto",children:t.nombre})})})})]}),v.includes(t.id)&&e("ul",{className:"tree-children",children:x.map(s=>e("li",{className:"tree-node draggable",children:e("div",{className:"tree-content actividad-economica",onClick:()=>T(s),children:e("span",{className:"tree-anchor children",children:e("span",{className:"tree-division tree-division1",children:e("span",{className:"tree-division__title my-auto",children:s.nombre})})})})}))})]}))})]})}))]})})}),c(S,{show:O,onHide:y,id:"removeActividadEconomica",className:"modal-dialog-centered",children:[c(S.Header,{id:"removeActividadEconomicaHeader",children:[e("h5",{className:"modal-title",children:"Eliminar"}),e("button",{type:"button",className:"btn-close btn-close-white",onClick:y})]}),e(S.Body,{id:"removeActividadEconomicaBody",children:c("p",{children:["Desea eliminar la comuna"," ",u.nombre,"?"]})}),c(S.Footer,{children:[e("button",{type:"submit",className:"btn btnRadius btn-new-blue mr-2",onClick:y,children:"Cancelar"}),e("button",{onClick:Q,className:"btn btnRadius btn-new-red ml-2",children:"Eliminar"})]})]})]})]})]})]})};export{fe as default};
