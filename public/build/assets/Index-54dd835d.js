import{R as y,r as c,j as d,a as n,H as oe,F as P}from"./app-bfd4e63b.js";import{A as ie}from"./AuthenticatedLayout-a2207b25.js";import{A as se}from"./MenuOpciones-49fd0eda.js";/* empty css                      */import{M as N,N as C}from"./Modal-77610c28.js";import{T as re,a as ae}from"./estilos-toast-2bc45602.js";import"./font-unicolor-c4146afe.js";import"./estilos-capa-autentificacion-0995eccd.js";import"./ApplicationLogoLici-a335aa89.js";import"./transition-a46a08c7.js";import"./createWithBsPrefix-62019b8a.js";import"./hasClass-f894e519.js";import"./useTimeout-bfee4630.js";var M=function(r,s){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},M(r,s)};function le(r,s){M(r,s);function t(){this.constructor=r}r.prototype=s===null?Object.create(s):(t.prototype=s.prototype,new t)}var S=function(){return S=Object.assign||function(s){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s[a]=t[a])}return s},S.apply(this,arguments)};function ce(r,s,t,e){var o,a=!1,p=0;function w(){o&&clearTimeout(o)}function g(){w(),a=!0}typeof s!="boolean"&&(e=t,t=s,s=void 0);function E(){var T=this,u=Date.now()-p,L=arguments;if(a)return;function f(){p=Date.now(),t.apply(T,L)}function _(){o=void 0}e&&!o&&f(),w(),e===void 0&&u>r?f():s!==!0&&(o=setTimeout(e?_:f,e===void 0?r-u:r))}return E.cancel=g,E}var b={Pixel:"Pixel",Percent:"Percent"},H={unit:b.Percent,value:.8};function B(r){return typeof r=="number"?{unit:b.Percent,value:r*100}:typeof r=="string"?r.match(/^(\d*(\.\d+)?)px$/)?{unit:b.Pixel,value:parseFloat(r)}:r.match(/^(\d*(\.\d+)?)%$/)?{unit:b.Percent,value:parseFloat(r)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),H):(console.warn("scrollThreshold should be string or number"),H)}var de=function(r){le(s,r);function s(t){var e=r.call(this,t)||this;return e.lastScrollTop=0,e.actionTriggered=!1,e.startY=0,e.currentY=0,e.dragging=!1,e.maxPullDownDistance=0,e.getScrollableTarget=function(){return e.props.scrollableTarget instanceof HTMLElement?e.props.scrollableTarget:typeof e.props.scrollableTarget=="string"?document.getElementById(e.props.scrollableTarget):(e.props.scrollableTarget===null&&console.warn(`You are trying to pass scrollableTarget but it is null. This might
        happen because the element may not have been added to DOM yet.
        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.
      `),null)},e.onStart=function(o){e.lastScrollTop||(e.dragging=!0,o instanceof MouseEvent?e.startY=o.pageY:o instanceof TouchEvent&&(e.startY=o.touches[0].pageY),e.currentY=e.startY,e._infScroll&&(e._infScroll.style.willChange="transform",e._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},e.onMove=function(o){e.dragging&&(o instanceof MouseEvent?e.currentY=o.pageY:o instanceof TouchEvent&&(e.currentY=o.touches[0].pageY),!(e.currentY<e.startY)&&(e.currentY-e.startY>=Number(e.props.pullDownToRefreshThreshold)&&e.setState({pullToRefreshThresholdBreached:!0}),!(e.currentY-e.startY>e.maxPullDownDistance*1.5)&&e._infScroll&&(e._infScroll.style.overflow="visible",e._infScroll.style.transform="translate3d(0px, "+(e.currentY-e.startY)+"px, 0px)")))},e.onEnd=function(){e.startY=0,e.currentY=0,e.dragging=!1,e.state.pullToRefreshThresholdBreached&&(e.props.refreshFunction&&e.props.refreshFunction(),e.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame(function(){e._infScroll&&(e._infScroll.style.overflow="auto",e._infScroll.style.transform="none",e._infScroll.style.willChange="unset")})},e.onScrollListener=function(o){typeof e.props.onScroll=="function"&&setTimeout(function(){return e.props.onScroll&&e.props.onScroll(o)},0);var a=e.props.height||e._scrollableNode?o.target:document.documentElement.scrollTop?document.documentElement:document.body;if(!e.actionTriggered){var p=e.props.inverse?e.isElementAtTop(a,e.props.scrollThreshold):e.isElementAtBottom(a,e.props.scrollThreshold);p&&e.props.hasMore&&(e.actionTriggered=!0,e.setState({showLoader:!0}),e.props.next&&e.props.next()),e.lastScrollTop=a.scrollTop}},e.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:t.dataLength},e.throttledOnScrollListener=ce(150,e.onScrollListener).bind(e),e.onStart=e.onStart.bind(e),e.onMove=e.onMove.bind(e),e.onEnd=e.onEnd.bind(e),e}return s.prototype.componentDidMount=function(){if(typeof this.props.dataLength>"u")throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),typeof this.props.initialScrollY=="number"&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),typeof this.props.refreshFunction!="function"))throw new Error(`Mandatory prop "refreshFunction" missing.
          Pull Down To Refresh functionality will not work
          as expected. Check README.md for usage'`)},s.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},s.prototype.componentDidUpdate=function(t){this.props.dataLength!==t.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},s.getDerivedStateFromProps=function(t,e){var o=t.dataLength!==e.prevDataLength;return o?S(S({},e),{prevDataLength:t.dataLength}):null},s.prototype.isElementAtTop=function(t,e){e===void 0&&(e=.8);var o=t===document.body||t===document.documentElement?window.screen.availHeight:t.clientHeight,a=B(e);return a.unit===b.Pixel?t.scrollTop<=a.value+o-t.scrollHeight+1:t.scrollTop<=a.value/100+o-t.scrollHeight+1},s.prototype.isElementAtBottom=function(t,e){e===void 0&&(e=.8);var o=t===document.body||t===document.documentElement?window.screen.availHeight:t.clientHeight,a=B(e);return a.unit===b.Pixel?t.scrollTop+o>=t.scrollHeight-a.value:t.scrollTop+o>=a.value/100*t.scrollHeight},s.prototype.render=function(){var t=this,e=S({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),o=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),a=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return y.createElement("div",{style:a,className:"infinite-scroll-component__outerdiv"},y.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(p){return t._infScroll=p},style:e},this.props.pullDownToRefresh&&y.createElement("div",{style:{position:"relative"},ref:function(p){return t._pullDown=p}},y.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!o&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},s}(c.exports.Component);const Ne=({auth:r,actividades_economicas:s})=>{const[t,e]=c.exports.useState([]),[o,a]=c.exports.useState({count:"",pages:"",next:"",prev:""}),[p,w]=c.exports.useState(!0),g=i=>{console.log(i),i===null?w(!1):fetch(i).then(l=>l.json()).then(l=>{var h={},m="",x=/filter/;if(i.search(x)>=0){var te=i.indexOf("&"),ne=i.substring(te+1,i.length);h=l.data,m=l.next_page_url+"&"+ne}else h=t.concat(l.data),m=l.next_page_url;e(h),a({count:l.total,pages:l.to,next:m,prev:l.prev_page_url})})};c.exports.useEffect(()=>{g("/actividades-economicas/paginate/?page=1")},[]);const E=i=>{i.target.value==""?g("/actividades-economicas/paginate/?page=1"):g("/actividades-economicas/filter/paginate/?page=1&actividad_economica="+i.target.value)},[T,u]=c.exports.useState(!1),[L,f]=c.exports.useState(""),[_,he]=c.exports.useState(s);c.exports.useState(s);const[Y,F]=c.exports.useState(!1),[k,O]=c.exports.useState(!1),[j,I]=c.exports.useState(0),[U,$]=c.exports.useState(0),[v,q]=c.exports.useState({id:0,nombre:""}),[W,z]=c.exports.useState([]),[G,V]=c.exports.useState([]),[J,A]=c.exports.useState(!1),D=()=>A(!1),K=()=>{v.id!=0?A(!0):(f("Debes seleccionar una Actividad Ecónomica"),u(!0))},Q=()=>{v.id!=0?window.location.replace("/actividades-economicas/"+v.id+"/edit"):(f("Debes seleccionar una Actividad Ecónomica"),u(!0))},X=i=>{const l=i,h=new RegExp(l,"i"),m=_.filter(function(x){if(h.test(x.id_padre_sub_categoria))return x});z(m),F(!Y),I(i)},Z=i=>{const l=new RegExp(i,"i"),h=_.filter(function(m){if(l.test(m.id_padre_sub_categoria))return m});V(h),O(!k),$(i)},R=i=>{q(i)},ee=()=>{fetch("/actividades-economicas/"+v.id+"/delete").then(i=>i.json()).then(i=>{f(i.message),u(!0),A(!1)})};return d(ie,{auth:r,children:[n(oe,{title:"Actividades económicas"}),n(re,{position:"bottom-start",children:n(ae,{onClose:()=>u(!1),show:T,delay:3e3,autohide:!0,children:d("div",{className:"vue-notification-toast error",children:[n("span",{className:"toast-icon toast-danger",children:n("span",{className:"icon-error"})}),n("p",{className:"title",children:L}),n("button",{type:"button",className:"icon-close m-auto",onClick:()=>u(!1)})]})})}),d("div",{className:"contenedor-planes",children:[n("div",{className:"posicion-opciones-planes",children:n(se,{})}),d("div",{className:"bg-white overflow-auto w-full text-center margen-superior",children:[n("h2",{className:"name_section_app",children:"Actividad económica"}),d("div",{className:"container mt-4 infinite-scroll",id:"infiniteScroll",children:[o!==null?n(de,{dataLength:t.length,next:()=>{g(o.next)},hasMore:p,loader:n("h4",{children:"Loading..."}),scrollableTarget:"infiniteScroll",children:n("div",{className:"tree_categorias tree_1",children:n("div",{className:"tree_categorias__busqueda mb-3 mb-md-4",children:d("div",{className:"mx-auto",children:[n("input",{type:"text",placeholder:"Busca por actividad económica",autoComplete:"off",className:"form-control m-auto",onChange:E}),n("i",{className:"icon-Cancelar"}),n("button",{type:"button",className:"icon-Buscar-click",children:n("i",{className:"bi bi-search"})}),t.map(i=>n(P,{children:i.id_padre_sub_categoria==null&&d(P,{children:[d("div",{className:"tree-content mt-3 sector",onClick:()=>X(i.id),children:[n("i",{className:`tree-arrow has-child ${i.childs.length>0?"bi bi-chevron-down":""}`}),n("span",{className:"tree-anchor",children:n("span",{className:"tree-division tree-division1",children:n("span",{className:"tree-division__title my-auto",children:i.nombre})})})]},i.id),Y&&i.id==j&&n("ul",{className:"tree-children",children:W.map(l=>d("li",{"data-id":"20504",className:"tree-node has-child expanded draggable",children:[d("div",{className:"tree-content segmento",onClick:()=>Z(l.id),children:[n("i",{className:"tree-arrow expanded has-child ltr"}),n("span",{className:"tree-anchor",children:n("span",{className:"tree-division tree-division1",children:n("span",{className:"tree-division__title my-auto",children:l.nombre})})})]}),k&&U==l.id&&n("ul",{className:"tree-children",children:G.map(h=>n("li",{className:"tree-node draggable",children:d("div",{className:"tree-content actividad-economica",onClick:()=>R(h),children:[n("input",{type:"radio",name:"actividad_economica",onClick:()=>R(h),checked:h.id==v.id?"checked":""}),n("span",{className:"tree-anchor children",children:n("span",{className:"tree-division tree-division1",children:n("span",{className:"tree-division__title my-auto",children:h.nombre})})})]})}))})]}))})]})}))]})})})}):"",d(N,{show:J,onHide:D,id:"removeActividadEconomica",className:"modal-dialog-centered",children:[d(N.Header,{id:"removeActividadEconomicaHeader",children:[n("h5",{className:"modal-title",children:"Eliminar"}),n("button",{type:"button",className:"btn-close btn-close-white",onClick:D})]}),n(N.Body,{id:"removeActividadEconomicaBody",children:d("p",{children:["Desea eliminar la actividad económica (",v.id,") ",v.nombre,"?"]})}),d(N.Footer,{children:[n("button",{type:"submit",className:"btn btnRadius btn-new-blue mr-2",onClick:D,children:"Cancelar"}),n("button",{onClick:ee,className:"btn btnRadius btn-new-red ml-2",children:"Eliminar"})]})]}),d("div",{className:"botones",children:[n(C.Link,{href:route("actividades-economicas.create"),className:"flex  ml-4 text-probar ",children:n("i",{className:"bi bi-plus-square-fill"})}),n(C.Link,{onClick:Q,className:"flex  ml-4 text-probar ",children:n("i",{className:"bi bi-pencil-fill"})}),n(C.Link,{onClick:K,className:"flex  ml-4 text-probar ",children:n("i",{className:"bi bi-trash3"})})]})]})]})]})]})};export{Ne as default};
