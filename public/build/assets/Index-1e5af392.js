import{r as c,j as l,F as u,a as s}from"./app-f8957487.js";import"./AuthenticatedLayout-24a63e65.js";/* empty css                      */import{T as le,a as ue}from"./estilos-toast-aa50c478.js";/* empty css                      *//* empty css                 */import"./transition-ec0fe8d4.js";import"./createWithBsPrefix-8cd53e5f.js";import"./useTimeout-533af191.js";import"./CloseButton-fbfdd2c3.js";const Oe=({auth:pe,actividades_economicas:I,tiposcompras:L,localizacion:he})=>{c.exports.useRef([]);const[U,q]=c.exports.useState(!1),[G,me]=c.exports.useState(""),[y,fe]=c.exports.useState(""),[p,_e]=c.exports.useState(I),[A,z]=c.exports.useState(I);c.exports.useState(!1),c.exports.useState(!1),c.exports.useState(0);const[be,J]=c.exports.useState(0),[f,N]=c.exports.useState([]),[_,S]=c.exports.useState([]);c.exports.useState({id:0,nombre:""});const[k,Q]=c.exports.useState([]),[C,P]=c.exports.useState([]),[E,O]=c.exports.useState([]),W=i=>{var e=document.getElementById("sector_"+i);e.classList.toggle("expanded"),f.includes(i)?N(f.filter(a=>a!=i)):N([...f,i]);const d=new RegExp(i,"i");A.filter(function(a){if(d.test(a.id_padre_sub_categoria))return a}).forEach(a=>{if(!C.includes(a))C.push(a);else{const n=C.filter(r=>r.id_padre_sub_categoria!=i);P(n)}})},X=i=>{var e=document.getElementById("segmento_"+i);e.classList.toggle("expanded"),_.includes(i)?S(_.filter(a=>a!=i)):S([..._,i]);const d=new RegExp(i,"i");A.filter(function(a){if(d.test(a.id_padre_sub_categoria))return a}).forEach(a=>{if(!E.includes(a))E.push(a);else{const n=E.filter(r=>r.id_padre_sub_categoria!=i);O(n)}}),J(i)},T=i=>{var e=[];k.forEach(a=>{e.push(a)});var d=p.filter(a=>a.id_padre_sub_categoria==i.id&&a.id_abuelo_sub_categoria==null);if(d.length>0)e.includes(i.id)?(e=b(e,i),e=g(e,d,"segmento","remove")):(e.push(i.id),e=g(e,d,"segmento","remove"),e=g(e,d,"segmento","add"));else{var o=p.filter(a=>a.id_padre_sub_categoria==i.id);o.length>0?e.includes(i.id)?(e=b(e,i),e=g(e,o,"actividad_economica","remove")):(e.push(i.id),e=g(e,o,"actividad_economica","add")):e.includes(i.id)?e=b(e,i):e.push(i.id)}Q(e)},b=(i,e)=>{const d=i.indexOf(e.id);return d>-1&&i.splice(d,1),i},g=(i,e,d=null,o)=>(e.forEach(a=>{switch(o){case"add":i.push(a.id),d=="segmento"&&p.filter(r=>r.id_padre_sub_categoria==a.id).forEach(r=>{i.push(r.id)});break;case"remove":i=b(i,a),d=="segmento"&&p.filter(r=>r.id_padre_sub_categoria==a.id).forEach(r=>{i=b(i,r)});break}}),i),Y=i=>{if(i.target.value==""){z(p),P([]),O([]),N([]),S([]);return}if(i.key==="Enter"){const r=new RegExp(i.target.value,"i"),m=p.filter(function(t){if(r.test(t.nombre)||i.target.value==t.id)return t});var e=[],d=[],o=[],a=[],n=[];m.forEach(t=>{if(t.id_abuelo_sub_categoria!=null&&t.id_padre_sub_categoria!=null){o.push(t),a.push(t.id_padre_sub_categoria);var K=p.filter(R=>R.id==t.id_padre_sub_categoria)[0];d.includes(K)||d.push(K),a.includes(t.id_padre_sub_categoria)||a.push(t.id_padre_sub_categoria);var x=p.filter(R=>R.id==t.id_abuelo_sub_categoria)[0];e.includes(x)||e.push(x),n.includes(t.id_abuelo_sub_categoria)||n.push(t.id_abuelo_sub_categoria)}if(t.id_abuelo_sub_categoria==null&&t.id_padre_sub_categoria!=null){d.includes(t)||d.push(t),n.includes(t.id_padre_sub_categoria)||a.push(t.id);var x=p.filter(re=>re.id==t.id_padre_sub_categoria)[0];e.includes(x)||e.push(x),n.includes(t.id_padre_sub_categoria)||n.push(t.id_padre_sub_categoria)}t.id_abuelo_sub_categoria==null&&t.id_padre_sub_categoria==null&&(e.includes(t)||e.push(t),n.includes(t.id)||n.push(t.id))}),z(e),P(d),O(o),N(n),S(a)}},[F,ge]=c.exports.useState(L),[V,ve]=c.exports.useState(L);c.exports.useState(!1),c.exports.useState(!1),c.exports.useState(0),c.exports.useState(0);const[v,j]=c.exports.useState([]),[Z,xe]=c.exports.useState([]);c.exports.useState({id:0,nombre:""});const[h,ee]=c.exports.useState([]),[w,ie]=c.exports.useState([]);c.exports.useState([]),c.exports.useState(!1);const M=i=>{v.includes(i)?j(v.filter(o=>o!=i)):j([...v,i]);const e=new RegExp(i,"i");V.filter(function(o){if(e.test(o.id_padre_sub_categoria))return o}).forEach(o=>{if(!w.includes(o))w.push(o);else{const a=w.filter(n=>n.id_padre_sub_categoria!=i);ie(a)}})},D=i=>{var e=[];h.forEach(a=>{e.push(a)});var d=F.filter(a=>a.id_padre_sub_categoria==i.id&&a.id_abuelo_sub_categoria==null);if(d.length>0){if(!e.includes(i.id))e.push(i.id);else{const a=e.indexOf(i.id);a>-1&&e.splice(a,1)}d.forEach(a=>{const n=F.filter(r=>r.id_padre_sub_categoria==a.id);if(!h.includes(a.id))e.push(a.id),n.forEach(r=>{if(!h.includes(r.id))e.push(r.id);else{const m=e.indexOf(r.id);m>-1&&e.splice(m,1)}});else{const r=e.indexOf(a.id);r>-1&&e.splice(r,1),n.forEach(m=>{const t=e.indexOf(m.id);t>-1&&e.splice(t,1)})}ee(e)})}else{var o=F.filter(a=>a.id_padre_sub_categoria==i.id);if(o.length>0){if(!e.includes(i.id))e.push(i.id);else{const a=e.indexOf(i.id);a>-1&&e.splice(a,1)}o.forEach(a=>{if(!h.includes(a.id))e.push(a.id);else{const n=e.indexOf(a.id);n>-1&&e.splice(n,1)}setchecksTipoCompras(e)})}else{if(!e.includes(i.id))e.push(i.id);else{const a=e.indexOf(i.id);a>-1&&e.splice(a,1)}setchecksTipoCompras(e)}}},[se,H]=c.exports.useState(!0),[ae,$]=c.exports.useState(!1),[ce,B]=c.exports.useState(!1),[te,de]=c.exports.useState(!1);c.exports.useEffect(()=>{B(!1)},[]),c.exports.useEffect(()=>{$(!1)},[]),c.exports.useEffect(()=>{de(!1)},[]);const oe=()=>{H(!1),B(!0),$(!0)},ne=()=>{H(!0),B(!1),$(!1)};return l(u,{children:[s(le,{position:"bottom-start",children:s(ue,{onClose:()=>q(!1),show:U,delay:3e3,autohide:!0,children:l("div",{className:`notification-toast ${y=="icon-error"?"error":"success"}`,children:[s("span",{className:`toast-icon ${y=="icon-error"?"toast-danger":"toast-success"}`,children:s("span",{className:y})}),s("p",{className:"title",children:G}),s("button",{type:"button",className:"icon-close m-auto",onClick:()=>q(!1)})]})})}),s("div",{className:"contenedor-planes",children:l("div",{className:"bg-white overflow-auto w-full text-center margen-superior custom-scroll",children:[l("h2",{className:"perfiles-titulos crear",children:[s("span",{className:"c-verde",children:"Crea"})," tu primer perfil de negocio"]}),s("div",{className:"container mt-4",children:s("div",{className:"tree_categorias tree_1",children:l("div",{className:"tree_categorias__busqueda mb-3 mb-md-4",children:[l("div",{className:"perfil-guias__indicador perfil-guias__indicador--activo",children:[s("i",{className:"icon-Paso-1-click"})," ",s("span",{children:"Actividad económica"}),s("i",{className:"icon-Paso-2-click",id:"pleft2"})," ",s("span",{children:"Tipo de compra"}),s("i",{className:"icon-Paso-3-click",id:"pleft2"})," ",s("span",{children:"Localizaciones"})]}),l("div",{className:"mx-60 mt-30 d-flex",children:[s("button",{type:"button",className:"icon-Buscar-click"}),s("input",{type:"text",placeholder:"Busca por actividad económica o UNSPSC",autoComplete:"off",className:"form-control busqueda-input",onKeyDown:Y}),l("h2",{className:"perfiles-titulos d-flex",children:[" Pais de contratación",s("img",{className:"bandera",src:"/public/images/banderas/listado_nombres/CHL.svg",alt:"Bandera Chile"})]})]}),s("br",{}),s(u,{children:se&&s("ul",{className:"tree-root",children:A.map(i=>s(u,{children:i.id_padre_sub_categoria==null&&l("li",{className:`tree-node has-child draggable ${f.includes(i.id)?"expanded":""}`,id:"sector_"+i.id,children:[l("div",{id:i.id,className:"tree-content mt-3 sector",children:[s("i",{className:`tree-arrow has-child ${i.childs.length>0?"bi bi-chevron-down":""}`}),s("input",{type:"checkbox",name:"actividad_economica",onChange:()=>T(i),checked:k.includes(i.id)?"checked":""}),s("span",{className:"tree-anchor",children:s("span",{className:"tree-division tree-division1",onClick:()=>W(i.id),children:s("span",{className:"tree-division__title my-auto",children:i.nombre})})})]},i.id),f.includes(i.id)&&s("ul",{className:"tree-children new-class",children:C.map((e,d)=>s(u,{children:i.id==e.id_padre_sub_categoria&&l("li",{className:`tree-node has-child draggable segmento ${_.includes(e.id)?"expanded":""}`,id:"segmento_"+e.id,children:[l("div",{className:"tree-content segmento",children:[s("i",{className:"tree-arrow has-child ltr"}),s("input",{type:"checkbox",name:"actividad_economica",onChange:()=>T(e),checked:k.includes(e.id)?"checked":""}),s("span",{className:"tree-anchor",children:s("span",{className:"tree-division tree-division1",onClick:()=>X(e.id),children:s(u,{children:d%2==0?s("span",{className:"tree-division__title my-auto",children:e.nombre}):s("span",{className:"tree-division__title-gray my-auto",children:e.nombre})})})})]}),_.includes(e.id)&&s("ul",{className:"tree-children actividad-economica",children:E.map((o,a)=>s(u,{children:e.id==o.id_padre_sub_categoria&&s("li",{className:"tree-node draggable",children:l("div",{className:"tree-content actividad-economica",onClick:()=>T(o),children:[s("input",{type:"checkbox",name:"actividad_economica",onChange:()=>T(o),checked:k.includes(o.id)?"checked":""}),s("span",{className:"tree-anchor children",children:s("span",{className:"tree-division tree-division1",children:s(u,{children:s("span",{className:"tree-division__title my-auto",children:o.nombre})})})})]})})}))})]})}))})]})}))})}),s(u,{children:ce&&s("ul",{className:"tree-root",children:V.map(i=>s(u,{children:i.id_padre_sub_categoria==null&&l("li",{className:`tree-node has-child draggable ${v.includes(i.id)?"expanded":""}`,id:"sector_"+i.id,children:[l("div",{id:i.id,className:"tree-content mt-3 sector",children:[s("i",{className:`tree-arrow has-child ${i.childs.length>0?"bi bi-chevron-down":""}`}),s("input",{type:"checkbox",name:"tipo_compras",onChange:()=>D(i),checked:h.includes(i.id)?"checked":""}),s("span",{className:"tree-anchor",children:s("span",{className:"tree-division tree-division1",onClick:()=>M(i.id),children:s("span",{className:"tree-division__title my-auto",children:i.nombre})})})]},i.id),v.includes(i.id)&&s("ul",{className:"tree-children new-class",children:w.map((e,d)=>s(u,{children:i.id==e.id_padre_sub_categoria&&s("li",{className:`tree-node has-child draggable segmento ${Z.includes(e.id)?"expanded":""}`,id:"segmento_"+e.id,children:l("div",{className:"tree-content segmento",children:[s("i",{className:"tree-arrow has-child ltr"}),s("input",{type:"checkbox",name:"actividad_economica",onChange:()=>D(e),checked:h.includes(e.id)?"checked":""}),s("span",{className:"tree-anchor",children:s("span",{className:"tree-division tree-division1",onClick:()=>M(e.id),children:s(u,{children:d%2==0?s("span",{className:"tree-division__title my-auto",children:e.nombre}):s("span",{className:"tree-division__title-gray my-auto",children:e.nombre})})})})]})})}))})]})}))})}),s(u,{children:te&&s("ul",{className:"tree-root",children:s("p",{children:"Paso 3"})})})]})})}),l("div",{className:"perfil-bottons-footer position-relative text-center mt-4",children:[s("a",{onClick:oe,className:"btn btnRadius btn-new-blue",children:s("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Siguiente"})}),s(u,{children:ae&&s("a",{onClick:ne,className:"btn btnRadius btn-new-blue",children:s("span",{className:"bloque__info-header-cuenta-text--modifier",children:"Volver"})})})]})]})})]})};export{Oe as default};
