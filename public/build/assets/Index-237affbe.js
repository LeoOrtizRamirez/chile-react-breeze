import{r as t,j as c,a as e,F as w}from"./app-4700c01c.js";import{A as le}from"./AuthenticatedLayout-ee9cd46f.js";/* empty css                 */import{F as n,D as re,C as i}from"./primeicons-12610465.js";import"./OverlayTrigger-7615e3cc.js";import{A as _}from"./ActividadEconomica-48c3815b.js";/* empty css               */import{M as p}from"./Nav-d5de8bcf.js";import"./InputError-8db90897.js";import"./hasClass-5b0cea21.js";import"./mergeOptionsWithPopperConfig-75f4da10.js";import"./module-d1466a2a.js";import"./Button-f1c04e97.js";/* empty css                      */import"./useTimeout-8c714db7.js";const Ae=({auth:E,contratos:r})=>{t.exports.useState(""),t.exports.useState(r.data),t.exports.useState(!0),t.exports.useState(0);const[de,T]=t.exports.useState(0),[ue,P]=t.exports.useState(0);t.exports.useEffect(()=>{document.getElementById("div1");var a=document.getElementById("tabla");document.getElementById("wrapper1");var o=document.getElementById("scroll-table");a&&T(a.offsetWidth),o&&P(o.offsetWidth);var l=document.getElementById("wrapper1"),s=document.querySelector("#scroll-table");l&&(l.onscroll=function(){s.scrollLeft=l.scrollLeft}),s&&(s.onscroll=function(){l.scrollLeft=s.scrollLeft})}),t.exports.useState(r.to),t.exports.useState(r.from),t.exports.useState(r.total),t.exports.useState(r.next_page_url),t.exports.useState(r.prev_page_url);const[me,k]=t.exports.useState(""),[pe,M]=t.exports.useState("");t.exports.useRef(0),t.exports.useEffect(()=>{const a=window.location.search,o=new URLSearchParams(a),l=o.get("fecha_publicacion");l!=null&&M(l);const s=o.get("buscador_rapido");s!=null&&k(s)},[]);const[L,he]=t.exports.useState(!1);t.exports.useState(!1);const m=t.exports.useRef(null),B=()=>{m.current&&m.current.reset()},A=a=>[...a||[]].map(o=>(o.envio_alertas==1?o.envio_alertas="Si":o.envio_alertas="No",o)),[b,fe]=t.exports.useState(A(r.data)),[R,_e]=t.exports.useState({global:{value:null,matchMode:n.CONTAINS},"fuente.alias_portal":{value:null,matchMode:n.STARTS_WITH},entidad_contratante:{value:null,matchMode:n.STARTS_WITH},objeto:{value:null,matchMode:n.STARTS_WITH},valor:{value:null,matchMode:n.STARTS_WITH},modalidad:{value:null,matchMode:n.CONTAINS},codigo_proceso:{value:null,matchMode:n.EQUALS},estado_proceso:{value:null,matchMode:n.EQUALS},fecha_publicacion:{value:null,matchMode:n.EQUALS},ubicacion:{value:null,matchMode:n.EQUALS},actividad_economica:{value:null,matchMode:n.EQUALS}});t.exports.useState(["No","Si"]),t.exports.useState([{name:"editar",text:"Editar perfil",icon:"icon-Editar icon-pd-editar",modal:"modalEditarPerfil"},{name:"eliminar",text:"Eliminar perfil",icon:"icon-Eliminar icon-pd-eliminar",modal:"modalEliminarPerfil"},{name:"duplicar",text:"Duplicar perfil",icon:"icon-Duplicar icon-pd-duplicar",modal:"modalDuplicarPerfil"},{name:"leidos",text:"Marcar como leídos",icon:"icon-Leidos icon-pd-leidos",modal:"modalLeidosPerfil"},{name:"info",text:"Ver más información",icon:"icon-Informacin-click icon-pd-info",modal:"modalInformacionPerfil"}]);const j=a=>e(w,{children:e("div",{className:"VueTables__selecciones-filter-wrapper",children:e("span",{children:e("div",{className:"selecciones-nuevo-diseno",children:c("button",{id:"limpiar",type:"button",className:"icon-Limpiar-click borrador-grid",onClick:B,children:[e("span",{className:"path1"}),e("span",{className:"path2"}),e("span",{className:"path3"}),e("span",{className:"path4"}),e("span",{className:"path5"}),e("span",{className:"path6"}),e("span",{className:"path7"}),e("span",{className:"path8"})]})})})})}),[I,S]=t.exports.useState(null),g=t.exports.useRef(null),F=a=>{g.current.show({severity:"info",summary:"Product Expanded",detail:a.data.actividad_economica,life:3e3})},D=a=>{g.current.show({severity:"success",summary:"Product Collapsed",detail:a.data.actividad_economica,life:3e3})},W=()=>{let a={};b.forEach(o=>a[`${o.id}`]=!0),S(a)};t.exports.useEffect(()=>{W()},[]);const z=a=>c("span",{className:"div_iconos_functions_grid",children:[c("a",{className:"btnVerDocumentos d-inline-flex align-items-center",children:[e("i",{className:"icon-Ver-documentos"}),e("span",{children:"Ver documentos"}),e("i",{className:"icon-Siguiente1"})]}),c("div",{id:"iconos_functions_8103864",className:"iconos_functions_grid iconos_acciones_contratos",children:[e("button",{id:"btnContratosFavorito-8103864",type:"button",className:"icon-Favorito-click btn_contratos_favoritos"}),c("button",{id:"btnContratosSeguimiento-8103864",type:"button",className:"btn_contratos_seguimientos icon-Seguimientos",children:[e("span",{className:"path1"}),e("span",{className:"path2"}),e("span",{className:"path3"})]}),c("button",{id:"btnContratosCarpeta-8103864",type:"button",className:"icon-Mis-carpetas btn_contratos_carpeta d-inline-flex",children:[e("span",{className:"path1"}),e("span",{className:"path2"})]}),e("button",{id:"btnContratosExternal-8103864",className:"icon-Ir-a-la-fuente-click btn_contratos_external"}),e("button",{id:"btnContratosCompartir-8103864",className:"icon-Compartir-click btn_contratos_compartir"}),e("button",{id:"btnContratoNotas-8103864",className:"btn_contratos_notas",children:e("img",{src:"/images/notas/nota.svg",alt:"Nota",className:"without-notes"})})]}),c("button",{type:"button",className:"btnRadius ver-menos-detalle",style:{display:"none"},children:["Ver menos",e("i",{className:"icon-Desplegar-click"})]})]}),[U,H]=t.exports.useState(null),[V,be]=t.exports.useState(!0),O=a=>e(w,{children:e("span",{className:"icon_tipo_secop",children:e("i",{className:"icono_fuente__list",children:a.fuente.alias_portal})})}),Q=a=>e("div",{className:"content_ver_mas_grid entidad_grid",children:e("p",{className:"span_grid",children:a.entidad_contratante})}),q=a=>e("div",{className:"content_ver_mas_grid objeto_grid",children:e("p",{className:"objeto_grid_p",children:c("span",{className:"objeto_grid_span",children:[e("span",{className:"tt-uppercase",children:a.objeto}),c("a",{className:"vermas text-right mr-0 mt-0",children:["Ver más",e("i",{className:"icon-Desplegar"})]})]})})}),$=a=>c("span",{className:"valor_range--estandar d-flex justify-content-center",children:[e("i",{className:"valor_range__moneda sin-min-width",children:"$"}),a.valor]}),G=a=>e("span",{style:{fontFamily:"Nexa-bold",color:"rgb(115, 201, 20)"},children:a.estado_proceso}),K=a=>e("div",{className:"content_ver_mas_grid ubicaciones_grid",children:e("p",{className:"scroll_fit",children:e("span",{children:e("span",{children:a.ubicacion})})})}),h=a=>e("input",{type:"text",className:"p-inputtext p-component p-column-filter column_ver_mas columna_actividad rounded_right",placeholder:"Seleccionar",onClick:()=>Y(a.field),onInput:o=>{m.current.filter(o.target.value,"actividad_economica","contains")}}),[J,v]=t.exports.useState(!1),[d,X]=t.exports.useState(""),N=()=>v(!1),Y=a=>{X(a),v(!0)},[Z,ee]=t.exports.useState([]),[ae,te]=t.exports.useState([]),[oe,se]=t.exports.useState([]),[ce,x]=t.exports.useState([]),[ne,y]=t.exports.useState([]),[ie,C]=t.exports.useState([]);t.exports.useEffect(()=>{async function a(){try{const u=await(await fetch("/actividades-economicas/json")).json();ee(u)}catch(s){console.log("Solicitud fallida",s)}}a();async function o(){try{const u=await(await fetch("/localizacion/json")).json();se(u)}catch(s){console.log("Solicitud fallida",s)}}o();async function l(){try{const u=await(await fetch("/tiposcompras/json")).json();te(u)}catch(s){console.log("Solicitud fallida",s)}}l()},[]);const f=(a,o)=>{switch(o){case"ActividadEconomica":a.length>0?x(a):x([]);break;case"Localizaciones":a.length>0?y(a):y([]);break;case"TiposCompras":a.length>0?C(a):C([]);break}};return c(le,{auth:E,page:"contratos",children:[e("div",{className:"content_not_blank_interno",children:e("div",{id:"bodycontenido",className:"col contratos_row px-0",children:c(re,{ref:m,value:b,paginator:!0,rows:30,dataKey:"id",filters:R,filterDisplay:"row",loading:L,globalFilterFields:["name","representative.name","status"],emptyMessage:"No se encontraron registros",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink NextPageLink LastPageLink CurrentPageReport",currentPageReportTemplate:"{first} a {last} de {totalRecords}",expandedRows:I,onRowToggle:a=>S(a.data),onRowExpand:F,onRowCollapse:D,rowExpansionTemplate:z,selectionMode:V?null:"checkbox",selection:U,onSelectionChange:a=>H(a.value),children:[e(i,{selectionMode:"multiple",className:"columna_seleccion columna_pequena",filter:!0,filterElement:j}),e(i,{field:"fuente.alias_portal",header:"Portal",filter:!0,filterPlaceholder:"Todos",className:"rounded_left columna_tipo_secop",body:O}),e(i,{field:"entidad_contratante",header:"Entidad",filter:!0,filterPlaceholder:"Buscar",className:"columna_entidad columna_120",body:Q}),e(i,{field:"objeto",header:"Obejto",filter:!0,filterPlaceholder:"Buscar",className:"objeto_columna",body:q}),e(i,{field:"valor",header:"Cuantía",filter:!0,filterPlaceholder:"Buscar",className:"rangedropdown columna_120 columna_cuantia",body:$}),e(i,{field:"modalidad",header:"Modalidad",filter:!0,filterPlaceholder:"Seleccionar",className:"columna_100 columna_modalidad",filterElement:h}),e(i,{field:"codigo_proceso",header:"Número",filter:!0,filterPlaceholder:"Buscar",className:"columna_numero"}),e(i,{field:"estado_proceso",header:"Estado",filter:!0,filterPlaceholder:"Buscar",className:"columna_estado",body:G}),e(i,{field:"fecha_publicacion",header:"Publicada",filter:!0,filterPlaceholder:"Buscar",className:"columna_fecha"}),e(i,{field:"ubicacion",header:"Ubicación",filter:!0,filterPlaceholder:"Seleccionar",className:"columna_ubicacion",body:K,filterElement:h}),e(i,{field:"actividad_economica",header:"Actividad Económica",filter:!0,filterElement:h})]})})}),c(p,{show:J,onHide:N,id:"modal_actividades",children:[c(p.Header,{children:[d=="actividad_economica"&&e("h4",{class:"modal-title",children:"Selecciona la(s) actividad(es) económica(s) de tu interés."}),d=="modalidad"&&e("h4",{class:"modal-title",children:"Selecciona la modalidad."}),d=="ubicacion"&&e("h4",{class:"modal-title",children:"Selecciona la ubicación."}),e("button",{type:"button","aria-label":"Close",class:"close icon-Cerrar-modal",onClick:N})]}),c(p.Body,{children:[d=="actividad_economica"&&e(_,{subcategorias:Z,nameBuscador:"Busca por actividad económica o UNSPSC",onHandleSectores:f,tipo:"ActividadEconomica",checkeds:ce}),d=="modalidad"&&e(_,{subcategorias:ae,nameBuscador:"Buscar Tipo de Compra",onHandleSectores:f,tipo:"TiposCompras",checkeds:ie}),d=="ubicacion"&&e(_,{subcategorias:oe,nameBuscador:"Buscar Localización",onHandleSectores:f,tipo:"Localizaciones",checkeds:ne})]}),e(p.Footer,{children:e("button",{type:"button",class:"btnRadius btn-new-green",children:"Seleccionar"})})]})]})};export{Ae as default};
