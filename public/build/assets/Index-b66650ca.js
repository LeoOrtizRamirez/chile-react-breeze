import{r as s,j as t,a as e,H as J,F as h}from"./app-490f1d75.js";import{A as K}from"./AuthenticatedLayout-af6e1f18.js";import{A as P}from"./MenuOpciones-ea3361c5.js";/* empty css                      */import{N as S,M as N}from"./Modal-fbb5dce9.js";import{T as Q,a as U}from"./estilos-toast-5629aad9.js";import"./font-unicolor-b4865383.js";import"./estilos-capa-autentificacion-3a0e35ed.js";import"./ApplicationLogoLici-a51f90b8.js";import"./transition-8065b3e7.js";import"./createWithBsPrefix-f74592b8.js";import"./hasClass-b6f1d32d.js";import"./useTimeout-8e150c4a.js";const le=({auth:M,actividades_economicas:w})=>{const[T,l]=s.exports.useState(!1),[H,_]=s.exports.useState(""),[g,p]=s.exports.useState(""),[I,V]=s.exports.useState(w),[v,R]=s.exports.useState(w);s.exports.useState(!1);const[W,j]=s.exports.useState(!1);s.exports.useState(0),s.exports.useState(0);const[m,x]=s.exports.useState([]),[b,k]=s.exports.useState([]),[r,C]=s.exports.useState({id:0,nombre:""}),[f,B]=s.exports.useState([]),[d,y]=s.exports.useState([]),[$,E]=s.exports.useState(!1),A=()=>E(!1),D=()=>{r.id!=0?E(!0):(_("Debes seleccionar una Actividad Ecónomica"),p("icon-error"),l(!0))};console.log("Actividad economica"),console.log(r);const L=()=>{r.id!=0?console.log(r):(_("Debes seleccionar una Actividad Ecónomica"),p("icon-error"),l(!0))},q=i=>{m.includes(i)?x(m.filter(a=>a!=i)):x([...m,i]);const c=new RegExp(i,"i");v.filter(function(a){if(c.test(a.id_padre_sub_categoria))return a}).forEach(a=>{if(!f.includes(a))f.push(a);else{const n=f.filter(u=>u.id_padre_sub_categoria!=i);B(n)}})},O=i=>{b.includes(i)?k(b.filter(a=>a!=i)):k([...b,i]);const c=new RegExp(i,"i");v.filter(function(a){if(c.test(a.id_padre_sub_categoria))return a}).forEach(a=>{if(!d.includes(a))d.push(a);else{const n=d.filter(u=>u.id_padre_sub_categoria!=i);y(n)}}),console.log(d)},F=i=>{C(i)},z=i=>{const c=new RegExp(i.target.value,"i"),o=I.filter(function(n){if(c.test(n.nombre))return n});var a=[];o.forEach(n=>{x([...m,n.id_padre_sub_categoria]),n.id_abuelo_sub_categoria!=null&&a.push(v.filter(u=>u.id==n.id_abuelo_sub_categoria)[0])}),R(a),j(!0)},G=()=>{fetch("/actividades-economicas/"+r.id+"/delete").then(i=>i.json()).then(i=>{if(i.type=="Success"){p("icon-check");var c=d.filter(o=>o.id!=r.id);y(c),C({id:0,nombre:""})}else p("icon-error");_(i.message),l(!0),E(!1)})};return t(K,{auth:M,children:[e(J,{title:"Actividades económicas"}),e(Q,{position:"bottom-start",children:e(U,{onClose:()=>l(!1),show:T,delay:3e3,autohide:!0,children:t("div",{className:`notification-toast ${g=="icon-error"?"error":"success"}`,children:[e("span",{className:`toast-icon ${g=="icon-error"?"toast-danger":"toast-success"}`,children:e("span",{className:g})}),e("p",{className:"title",children:H}),e("button",{type:"button",className:"icon-close m-auto",onClick:()=>l(!1)})]})})}),t("div",{className:"contenedor-planes",children:[e("div",{className:"posicion-opciones-planes",children:e(P,{})}),t("div",{className:"bg-white overflow-auto w-full text-center margen-superior",children:[e("h2",{className:"name_section_app",children:"Actividad económica"}),t("div",{className:"container mt-4",children:[e("div",{className:"tree_categorias tree_1",children:e("div",{className:"tree_categorias__busqueda mb-3 mb-md-4",children:t("div",{className:"mx-auto",children:[e("input",{type:"text",placeholder:"Busca por actividad económica",autoComplete:"off",className:"form-control m-auto",onChange:z}),e("i",{className:"icon-Cancelar"}),e("button",{type:"button",className:"icon-Buscar-click",children:e("i",{className:"bi bi-search"})}),e("br",{}),t("div",{className:"botones",children:[e(S.Link,{href:route("actividades-economicas.create"),className:"flex  ml-4 text-probar ",children:e("i",{className:"bi bi-plus-square-fill"})}),e(S.Link,{onClick:L,className:"flex  ml-4 text-probar ",children:e("i",{className:"bi bi-pencil-fill"})}),e(S.Link,{onClick:D,className:"flex  ml-4 text-probar ",children:e("i",{className:"bi bi-trash3"})})]}),v.map(i=>e(h,{children:i.id_padre_sub_categoria==null&&t(h,{children:[t("div",{className:"tree-content mt-3 sector",onClick:()=>q(i.id),children:[e("i",{className:`tree-arrow has-child ${i.childs.length>0?"bi bi-chevron-down":""}`}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",children:e("span",{className:"tree-division__title my-auto",children:i.nombre})})})]},i.id),m.includes(i.id)&&e("ul",{className:"tree-children new-class",children:f.map(c=>e(h,{children:i.id==c.id_padre_sub_categoria&&t("li",{"data-id":"20504",className:"tree-node has-child expanded draggable",children:[t("div",{className:"tree-content segmento",onClick:()=>O(c.id),children:[e("i",{className:"tree-arrow expanded has-child ltr"}),e("span",{className:"tree-anchor",children:e("span",{className:"tree-division tree-division1",children:e("span",{className:"tree-division__title my-auto",children:c.nombre})})})]}),b.includes(c.id)&&e("ul",{className:"tree-children",children:d.map((o,a)=>e(h,{children:c.id==o.id_padre_sub_categoria&&e("li",{className:"tree-node draggable",children:t("div",{className:"tree-content actividad-economica",onClick:()=>F(o),children:[e("input",{type:"radio",name:"actividad_economica",onClick:()=>F(o),checked:o.id==r.id?"checked":""}),e("span",{className:"tree-anchor children",children:e("span",{className:"tree-division tree-division1",children:e(h,{children:a%2==0?e("span",{className:"tree-division__title my-auto",children:o.nombre}):e("span",{className:"tree-division__title-gray my-auto",children:o.nombre})})})})]})})}))})]})}))})]})}))]})})}),t(N,{show:$,onHide:A,id:"removeActividadEconomica",className:"modal-dialog-centered",children:[t(N.Header,{id:"removeActividadEconomicaHeader",children:[e("h5",{className:"modal-title",children:"Eliminar"}),e("button",{type:"button",className:"btn-close btn-close-white",onClick:A})]}),e(N.Body,{id:"removeActividadEconomicaBody",children:t("p",{children:["Desea eliminar la actividad económica (",r.id,") ",r.nombre,"?"]})}),t(N.Footer,{children:[e("button",{type:"submit",className:"btn btnRadius btn-new-blue mr-2",onClick:A,children:"Cancelar"}),e("button",{onClick:G,className:"btn btnRadius btn-new-red ml-2",children:"Eliminar"})]})]})]})]})]})]})};export{le as default};
