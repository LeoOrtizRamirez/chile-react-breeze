import{r as d,j as u,F as f,a}from"./app-2de138ff.js";import"./AuthenticatedLayout-fc3837dc.js";/* empty css                      */import{T as q,a as M}from"./estilos-toast-0d0e95bd.js";import"./font-unicolor-ed81bb80.js";/* empty css                 */import"./transition-d0f989e0.js";import"./createWithBsPrefix-81c955d0.js";import"./useTimeout-41fc9593.js";const ie=({auth:z,actividades_economicas:O})=>{d.exports.useRef([]),console.log("renderize");const[T,F]=d.exports.useState(!1),[B,D]=d.exports.useState(""),[y,K]=d.exports.useState(""),[p,U]=d.exports.useState(O),[_,I]=d.exports.useState(O);d.exports.useState(!1),d.exports.useState(!1),d.exports.useState(0);const[G,R]=d.exports.useState(0),[b,g]=d.exports.useState([]),[x,v]=d.exports.useState([]);d.exports.useState({id:0,nombre:""});const[h,w]=d.exports.useState([]),[N,C]=d.exports.useState([]),[E,A]=d.exports.useState([]),L=s=>{var e=document.getElementById("sector_"+s);e.classList.toggle("expanded"),b.includes(s)?g(b.filter(i=>i!=s)):g([...b,s]);const c=new RegExp(s,"i");_.filter(function(i){if(c.test(i.id_padre_sub_categoria))return i}).forEach(i=>{if(!N.includes(i))N.push(i);else{const l=N.filter(r=>r.id_padre_sub_categoria!=s);C(l)}})},$=s=>{var e=document.getElementById("segmento_"+s);e.classList.toggle("expanded"),x.includes(s)?v(x.filter(i=>i!=s)):v([...x,s]);const c=new RegExp(s,"i");_.filter(function(i){if(c.test(i.id_padre_sub_categoria))return i}).forEach(i=>{if(!E.includes(i))E.push(i);else{const l=E.filter(r=>r.id_padre_sub_categoria!=s);A(l)}}),R(s)},S=s=>{var e=[];h.forEach(i=>{e.push(i)});var c=p.filter(i=>i.id_padre_sub_categoria==s.id&&i.id_abuelo_sub_categoria==null);if(c.length>0){if(!e.includes(s.id))e.push(s.id);else{const i=e.indexOf(s.id);i>-1&&e.splice(i,1)}c.forEach(i=>{const l=p.filter(r=>r.id_padre_sub_categoria==i.id);if(!h.includes(i.id))e.push(i.id),l.forEach(r=>{if(!h.includes(r.id))e.push(r.id);else{const m=e.indexOf(r.id);m>-1&&e.splice(m,1)}});else{const r=e.indexOf(i.id);r>-1&&e.splice(r,1),l.forEach(m=>{const k=e.indexOf(m.id);k>-1&&e.splice(k,1)})}console.log(i),w(e)})}else{var o=p.filter(i=>i.id_padre_sub_categoria==s.id);if(o.length>0){if(!e.includes(s.id))e.push(s.id);else{const i=e.indexOf(s.id);i>-1&&e.splice(i,1)}o.forEach(i=>{if(!h.includes(i.id))e.push(i.id);else{const l=e.indexOf(i.id);l>-1&&e.splice(l,1)}w(e)})}else{if(!e.includes(s.id))e.push(s.id);else{const i=e.indexOf(s.id);i>-1&&e.splice(i,1)}w(e)}}},j=s=>{if(s.target.value==""){I(p),C([]),A([]),g([]),v([]);return}if(s.key==="Enter"){const k=new RegExp(s.target.value,"i"),P=p.filter(function(t){if(k.test(t.nombre))return t});var e=[],c=[],o=[],i=[],l=[];P.forEach(t=>{t.id_abuelo_sub_categoria!=null&&t.id_padre_sub_categoria!=null&&(o.push(t),i.push(t.id_padre_sub_categoria),c.push(p.filter(n=>n.id==t.id_padre_sub_categoria)[0]),l.push(t.id_abuelo_sub_categoria)),t.id_abuelo_sub_categoria==null&&t.id_padre_sub_categoria!=null&&(c.includes(t)||(c.push(t),c.push(t)),l.includes(t.id_padre_sub_categoria)||(l.push(t.id_padre_sub_categoria),c.push(t))),t.id_abuelo_sub_categoria==null&&t.id_padre_sub_categoria==null&&e.push(t)});var r=null,m=null;o.forEach(t=>{r=p.filter(n=>n.id==t.id_abuelo_sub_categoria)[0],m=p.filter(n=>n.id==t.id_padre_sub_categoria)[0],e.includes(r)||e.push(p.filter(n=>n.id==t.id_abuelo_sub_categoria)[0]),c.includes(m)||e.push(p.filter(n=>n.id==t.id_padre_sub_categoria)[0])}),I(e),C(c),A(o),g(l),v(i),e.forEach(t=>{var n=document.getElementById("sector_"+t.id);n.classList.add("expanded")}),c.forEach(t=>{console.log(t);var n=document.getElementById("segmento_"+t.id);console.log(n),n&&n.classList.add("expanded")})}};return d.exports.useEffect(()=>{},[_]),u(f,{children:[a(q,{position:"bottom-start",children:a(M,{onClose:()=>F(!1),show:T,delay:3e3,autohide:!0,children:u("div",{className:`notification-toast ${y=="icon-error"?"error":"success"}`,children:[a("span",{className:`toast-icon ${y=="icon-error"?"toast-danger":"toast-success"}`,children:a("span",{className:y})}),a("p",{className:"title",children:B}),a("button",{type:"button",className:"icon-close m-auto",onClick:()=>F(!1)})]})})}),a("div",{className:"contenedor-planes",children:u("div",{className:"bg-white overflow-auto w-full text-center margen-superior custom-scroll",children:[u("h2",{className:"perfiles-titulos crear",children:[a("span",{className:"c-verde",children:"Crea"})," tu primer perfil de negocio"]}),a("div",{className:"container mt-4",children:a("div",{className:"tree_categorias tree_1",children:u("div",{className:"tree_categorias__busqueda mb-3 mb-md-4",children:[u("div",{className:"perfil-guias__indicador perfil-guias__indicador--activo",children:[a("i",{className:"icon-Paso-1-click"})," ",a("span",{children:"Actividad económica"})]}),u("div",{className:"mx-60 mt-30 d-flex",children:[a("button",{type:"button",className:"icon-Buscar-click"}),a("input",{type:"text",placeholder:"Busca por actividad económica o UNSPSC",autoComplete:"off",className:"form-control busqueda-input",onKeyDown:j}),u("h2",{className:"perfiles-titulos",children:[" Pais de contratación ",a("span",{className:"c-verde",children:"Chile"})]})]}),a("br",{}),a("ul",{className:"tree-root",children:_.map(s=>a(f,{children:s.id_padre_sub_categoria==null&&u("li",{className:"tree-node has-child draggable",id:"sector_"+s.id,children:[u("div",{id:s.id,className:"tree-content mt-3 sector",children:[a("i",{className:`tree-arrow has-child ${s.childs.length>0?"bi bi-chevron-down":""}`}),a("input",{type:"checkbox",name:"actividad_economica",onChange:()=>S(s),checked:h.includes(s.id)?"checked":""}),a("span",{className:"tree-anchor",children:a("span",{className:"tree-division tree-division1",onClick:()=>L(s.id),children:a("span",{className:"tree-division__title my-auto",children:s.nombre})})})]},s.id),b.includes(s.id)&&a("ul",{className:"tree-children new-class",children:N.map((e,c)=>a(f,{children:s.id==e.id_padre_sub_categoria&&u("li",{className:"tree-node has-child draggable segmento",id:"segmento_"+e.id,children:[u("div",{className:"tree-content segmento",children:[a("i",{className:"tree-arrow has-child ltr"}),a("input",{type:"checkbox",name:"actividad_economica",onChange:()=>S(e),checked:h.includes(e.id)?"checked":""}),a("span",{className:"tree-anchor",children:a("span",{className:"tree-division tree-division1",onClick:()=>$(e.id),children:a(f,{children:c%2==0?a("span",{className:"tree-division__title my-auto",children:e.nombre}):a("span",{className:"tree-division__title-gray my-auto",children:e.nombre})})})})]}),x.includes(e.id)&&a("ul",{className:"tree-children actividad-economica",children:E.map((o,i)=>a(f,{children:e.id==o.id_padre_sub_categoria&&a("li",{className:"tree-node draggable",children:u("div",{className:"tree-content actividad-economica",onClick:()=>S(o),children:[a("input",{type:"checkbox",name:"actividad_economica",onChange:()=>S(o),checked:h.includes(o.id)?"checked":""}),a("span",{className:"tree-anchor children",children:a("span",{className:"tree-division tree-division1",children:a(f,{children:a("span",{className:"tree-division__title my-auto",children:o.nombre})})})})]})})}))})]})}))})]})}))})]})})}),a("div",{className:"perfil-bottons-footer position-relative text-center mt-4",children:a("button",{type:"button",className:"btn btnRadius btn-new-blue",children:"Siguiente"})})]})})]})};export{ie as default};
