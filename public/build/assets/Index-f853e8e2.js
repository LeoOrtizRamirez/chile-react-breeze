import{j as a,a as e,u as K,r as o,F as X}from"./app-18d429da.js";import{A as Y}from"./AuthenticatedLayout-528922ec.js";import{A as Z}from"./MenuOpciones-db29b58f.js";import{$ as m,P as ee}from"./jquery-904eb6b8.js";/* empty css              */import"./estilos-capa-autentificacion-04fbc91e.js";import"./ApplicationLogoLici-5e548e0c.js";import"./transition-b3a6f05b.js";function te({type:d="submit",className:i="",processing:n,children:c,onClick:u}){return a("button",{style:{backgroundColor:"#57C700"},type:d,onClick:u,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${n&&"opacity-25"} `+i,disabled:n,children:[c,e("i",{className:"bi bi-share text-gray-500 iconos-tamano-margen"})]})}function ae({type:d="submit",className:i="",processing:n,children:c,onClick:u}){return a("button",{style:{backgroundColor:"#57C700"},type:d,onClick:u,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${n&&"opacity-25"} `+i,disabled:n,children:[c,e("i",{className:"bi bi-folder-minus text-gray-500 iconos-tamano-margen"})]})}const se=d=>e("a",{href:d.url,target:"_blank",children:e("button",{style:{backgroundColor:"#57C700"},className:"boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ",children:e("i",{className:"bi bi-upload text-gray-500 iconos-tamano-margen"})})});function re({type:d="submit",className:i="",processing:n,children:c,onClick:u}){return a("button",{style:{backgroundColor:"#57C700"},type:d,onClick:u,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${n&&"opacity-25"} `+i,disabled:n,children:[c,e("i",{className:"bi bi-star text-gray-500 iconos-tamano-margen"})]})}function oe({type:d="submit",className:i="",processing:n,children:c,onClick:u}){return a("button",{style:{backgroundColor:"#57C700"},type:d,onClick:u,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${n&&"opacity-25"} `+i,disabled:n,children:[c,e("i",{className:"bi bi-filetype-pdf text-gray-500 iconos-tamano-margen"})]})}function ne({type:d="submit",className:i="",processing:n,children:c,onClick:u}){return a("button",{style:{backgroundColor:"#57C700"},type:d,onClick:u,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${n&&"opacity-25"} `+i,disabled:n,children:[c,e("i",{className:"bi bi-eye text-gray-500 iconos-tamano-margen"})]})}const Ce=({auth:d,contratos:i,totalContratos:n,pagina:c,numElementosPagina:u,totalElemetosPaginados:f})=>{const{data:ie,setData:ce,post:le,get:g,processing:de,reset:ue,errors:me}=K({}),[x,E]=o.exports.useState(i);m("th").click(function(){var t=m(this).parents("table").eq(0),s=t.find("tr:gt(0)").toArray().sort($(m(this).index()));this.asc=!this.asc,this.asc||(s=s.reverse());for(var r=0;r<s.length;r++)t.append(s[r]);q(m(this),this.asc)});function $(t){return function(s,r){var l=y(s,t),h=y(r,t);return m.isNumeric(l)&&m.isNumeric(h)?l-h:l.localeCompare(h)}}function y(t,s){return m(t).children("td").eq(s).html()}function q(t,s){m("th").each(function(r){m(this).removeClass("sorting"),m(this).removeClass("asc"),m(this).removeClass("desc")}),t.addClass("sorting"),s?t.addClass("asc"):t.addClass("desc")}const[F,he]=o.exports.useState(!0),[N,v]=o.exports.useState(0),L=t=>{v(t.id)},R=()=>{v(0)},[w,j]=o.exports.useState(0),[C,B]=o.exports.useState(0);o.exports.useEffect(()=>{document.getElementById("div1");var t=document.getElementById("tabla");document.getElementById("wrapper1");var s=document.getElementById("scroll-table");j(t.offsetWidth),B(s.offsetWidth);var r=document.getElementById("wrapper1"),l=document.querySelector("#scroll-table");r.onscroll=function(){l.scrollLeft=r.scrollLeft},l.onscroll=function(){r.scrollLeft=l.scrollLeft}});const A=t=>{console.log(t);const s=[];for(let r in t)s.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return s.join("&")},U=t=>{var s=document.getElementById("form_busqueda_rapida");let r=new FormData(s),l={};r.forEach(function(p,G){l[G]=p}),JSON.stringify(l),I(t.target.value);const h=A(l);console.log(h),fetch("/contratos/?"+h).then(p=>p.json()).then(p=>{E(p.contratos),D(p.totalContratos)})};o.exports.useState([]),o.exports.useState([]);const S=30,[_,D]=o.exports.useState(n),[W,z]=o.exports.useState(f),[V,H]=o.exports.useState(0),[M,T]=o.exports.useState(0),[k,P]=o.exports.useState(""),[b,I]=o.exports.useState(""),[O,pe]=o.exports.useState(""),J=()=>{if(!(c>=W)){var t=b?"&buscador_rapido="+b:"";g("/contratos/"+M+"/"+c+"/next?"+k+t)}},Q=()=>{if(c!=1){var t=b?"&buscador_rapido="+b:"";g("/contratos/"+V+"/"+c+"/prev?"+k+t)}};return o.exports.useEffect(()=>{const t=window.location.search,s=new URLSearchParams(t),r=s.get("fecha_publicacion");r!=null&&P("fecha_publicacion="+r);const l=s.get("buscador_rapido");l!=null&&I(l)},[]),o.exports.useEffect(()=>{i.length>0&&(T(i[i.length-1].id),H(i[0].id)),z(parseInt(_/S)+1);const t=window.location.search,r=new URLSearchParams(t).get("fecha_publicacion");r!=null&&P("fecha_publicacion="+r)},[x]),a(Y,{auth:d,children:[e("link",{rel:"shortcut icon",href:"#"}),a("div",{children:[a("div",{className:"contenedor-filtros",children:[a("div",{className:"",children:[a("form",{method:"get",name:"form_busqueda_rapida",id:"form_busqueda_rapida",children:[e("input",{className:"buscador_rapido",name:"buscador_rapido",type:"text",value:b,placeholder:"Búsqueda rápida",onChange:U}),e("input",{name:"fecha_publicacion",type:"hidden",value:O}),e("input",{name:"type",type:"hidden",value:"fetch"})]}),e("span",{className:"material-symbols-outlined posicion-color",children:"search"})]}),e("div",{className:"",children:a("button",{className:"buscador_avanzado mb-3",children:[e("span",{className:"material-symbols-outlined",children:"list"}),e("span",{className:"color-texto",children:"Búsqueda avanzada"})]})}),a("div",{className:"input-filtro-estado",children:[e("span",{className:"input-filtro-estado-span",children:"Visualizar:"}),a("select",{className:"input-visualizar",children:[e("option",{value:"",children:"todos"}),e("option",{value:"",children:"Vistos recientemente"}),e("option",{value:"",children:"No Leidos"})]})]}),e("div",{children:e(ee,{nextHandler:J,prevHandler:Q,currentPage:f,itemsPagina:S,totalElementos:_,totalPaginas:u})})]}),a("div",{className:"contenedor-contratos",children:[e("div",{className:"contenedor-opciones-usuarios",children:e(Z,{})}),a("div",{className:"alto-tabla bg-white overflow-auto ",id:"scroll-table",children:[e("div",{id:"wrapper1",style:{width:C>0?C:0+"px"},children:e("div",{id:"div1",style:{width:w>0?w:0+"px"}})}),a("table",{id:"tabla",className:"w-full bg-white border tabla table-hover",children:[e("thead",{className:"cabecera-tabla",style:{backgroundColor:"#00a1c9"},children:a("tr",{className:"bg-paginador text-white uppercase leading-normal",children:[e("th",{children:"Acciones"}),e("th",{children:"Portal"}),e("th",{children:"Entidad"}),e("th",{children:"Objeto"}),e("th",{children:"Cuantía"}),e("th",{children:"Modalidad"}),e("th",{children:"Número"}),e("th",{children:"Estado"}),e("th",{children:"Publicada"}),e("th",{children:"Ubicación"}),e("th",{children:"Contratista"}),e("th",{children:"Actividad económica"})]})}),e("tbody",{children:x.map(t=>a("tr",{className:"tr-users",children:[e("td",{className:"border border-gray-200 text-left mw-90",children:a("div",{className:"iconos-horizontal width-columna-acciones",children:[a("div",{children:[e(oe,{}),e(se,{url:t.link}),e(re,{})]}),a("div",{className:"",children:[e(te,{}),e(ae,{}),e(ne,{})]})]})}),e("td",{className:"border border-gray-200 text-left margen-textos",children:e("span",{className:"circulo",children:t.fuente.alias_portal})}),e("td",{className:"border border-gray-200 text-left margen-textos",children:e("span",{className:"data-text width-columna-menor",children:t.entidad_contratante})}),a("td",{className:"border border-gray-200 text-left margen-textos mw-200",children:[F&&e(X,{children:N!=t.id&&a("span",{className:"data-text",children:[t.objeto.substr(0,40),"..."," ",e("a",{className:"text-primary",onClick:()=>L(t),children:"Ver más"})]})}),N==t.id&&e("div",{className:"showmore",children:a("span",{className:"data-text",children:[t.objeto,e("a",{className:"text-primary",onClick:()=>R(),children:"Ver menos"})]})})]}),e("td",{className:"border border-gray-200 text-left margen-textos width-columna-menor",children:t.valor>0?"$"+t.valor.toLocaleString("ch-CH"):t.valor_texto}),e("td",{className:"border border-gray-200 text-left margen-textos mw-200",children:e("span",{className:"data-text ",children:t.modalidad})}),e("td",{className:"border border-gray-200 text-left margen-textos ",children:e("span",{className:"data-text ",children:t.codigo_proceso})}),e("td",{className:"border border-gray-200 text-left color-estado margen-textos width-columna-menor",children:e("span",{className:"data-text ",children:t.estado_proceso})}),e("td",{className:"border border-gray-200 text-left margen-textos",children:e("span",{className:"data-text width-columna-menor",children:t.fecha_publicacion})}),e("td",{className:"border border-gray-200 text-left margen-textos width-columna-menor",children:e("span",{className:"data-text ",children:t.ubicacion})}),e("td",{className:"border border-gray-200 text-left margen-textos mw-200",children:e("span",{className:"data-text ",children:t.contratista})}),e("td",{className:"border border-gray-200 text-left margen-textos",children:e("span",{className:"data-text ",children:t.actividad_economica})})]},t.id))})]})]})]})]})]})};export{Ce as default};
