import{j as a,a as e,r as o,F as k}from"./app-ab91dd71.js";import{A as G}from"./AuthenticatedLayout-15cd2a90.js";import{A as J}from"./MenuOpciones-2b247f07.js";import{$ as m,P as K}from"./jquery-6dd868f1.js";/* empty css              *//* empty css                      */import"./estilos-capa-autentificacion-5163b58a.js";import"./ApplicationLogoLici-6d2fc1d4.js";import"./transition-d348aeb1.js";function X({type:c="submit",className:i="",processing:n,children:d,onClick:u}){return a("button",{style:{backgroundColor:"#57C700"},type:c,onClick:u,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${n&&"opacity-25"} `+i,disabled:n,children:[d,e("i",{className:"bi bi-share text-gray-500 iconos-tamano-margen"})]})}function Y({type:c="submit",className:i="",processing:n,children:d,onClick:u}){return a("button",{style:{backgroundColor:"#57C700"},type:c,onClick:u,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${n&&"opacity-25"} `+i,disabled:n,children:[d,e("i",{className:"bi bi-folder-minus text-gray-500 iconos-tamano-margen"})]})}const Z=c=>e("a",{href:c.url,target:"_blank",children:e("button",{style:{backgroundColor:"#57C700"},className:"boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ",children:e("i",{className:"bi bi-upload text-gray-500 iconos-tamano-margen"})})});function ee({type:c="submit",className:i="",processing:n,children:d,onClick:u}){return a("button",{style:{backgroundColor:"#57C700"},type:c,onClick:u,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${n&&"opacity-25"} `+i,disabled:n,children:[d,e("i",{className:"bi bi-star text-gray-500 iconos-tamano-margen"})]})}function te({type:c="submit",className:i="",processing:n,children:d,onClick:u}){return a("button",{style:{backgroundColor:"#57C700"},type:c,onClick:u,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${n&&"opacity-25"} `+i,disabled:n,children:[d,e("i",{className:"bi bi-filetype-pdf text-gray-500 iconos-tamano-margen"})]})}function ae({type:c="submit",className:i="",processing:n,children:d,onClick:u}){return a("button",{style:{backgroundColor:"#57C700"},type:c,onClick:u,className:`boton items-center px-1 py-1 bg-white rounded-md font-semibold text-xs text-gray-500 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:#00a1c9 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150 ${n&&"opacity-25"} `+i,disabled:n,children:[d,e("i",{className:"bi bi-eye text-gray-500 iconos-tamano-margen"})]})}const se=()=>e("div",{class:"cargando_tables",children:a("div",{class:"col",children:[e("img",{src:"https://col.licitaciones.info/img/loading.gif",class:"img-col"}),e("p",{children:"Cargando"})]})}),he=({auth:c,contratos:i})=>{const[n,d]=o.exports.useState(i.data);m("th").click(function(){var t=m(this).parents("table").eq(0),r=t.find("tr:gt(0)").toArray().sort(u(m(this).index()));this.asc=!this.asc,this.asc||(r=r.reverse());for(var s=0;s<r.length;s++)t.append(r[s]);S(m(this),this.asc)});function u(t){return function(r,s){var l=f(r,t),p=f(s,t);return m.isNumeric(l)&&m.isNumeric(p)?l-p:l.localeCompare(p)}}function f(t,r){return m(t).children("td").eq(r).html()}function S(t,r){m("th").each(function(s){m(this).removeClass("sorting"),m(this).removeClass("asc"),m(this).removeClass("desc")}),t.addClass("sorting"),r?t.addClass("asc"):t.addClass("desc")}const[P,re]=o.exports.useState(!0),[g,b]=o.exports.useState(0),j=t=>{b(t.id)},E=()=>{b(0)},[x,q]=o.exports.useState(0),[y,I]=o.exports.useState(0);o.exports.useEffect(()=>{document.getElementById("div1");var t=document.getElementById("tabla");document.getElementById("wrapper1");var r=document.getElementById("scroll-table");t&&q(t.offsetWidth),r&&I(r.offsetWidth);var s=document.getElementById("wrapper1"),l=document.querySelector("#scroll-table");s&&(s.onscroll=function(){l.scrollLeft=s.scrollLeft}),l&&(l.onscroll=function(){s.scrollLeft=l.scrollLeft})});const[L,$]=o.exports.useState(i.to),[B,z]=o.exports.useState(i.from),[A,F]=o.exports.useState(i.total),[W,D]=o.exports.useState(i.next_page_url),[R,U]=o.exports.useState(i.prev_page_url),[V,v]=o.exports.useState(""),[H,M]=o.exports.useState(""),N=()=>{var t=document.getElementById("form_busqueda_rapida");let r=new FormData(t),s={};return r.forEach(function(p,Q){s[Q]=p}),T(s)},T=t=>{const r=[];for(let s in t)r.push(encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return r.join("&")},w=t=>{if(t==null)return;const r=N();fetch(t+"&"+r).then(s=>s.json()).then(s=>{C(s)})},h=o.exports.useRef(0);o.exports.useEffect(()=>{h.current!=0&&(console.log(h),h.current.addEventListener("keypress",function(t){if(t.key==="Enter"){t.preventDefault();const r=N();_(!0),fetch("/contratos/?"+r).then(s=>s.json()).then(s=>{C(s),_(!1)})}}))},[]);const C=t=>{d(t.data),$(t.to),z(t.from),F(t.total),D(t.next_page_url),U(t.prev_page_url)};o.exports.useEffect(()=>{const t=window.location.search,r=new URLSearchParams(t),s=r.get("fecha_publicacion");s!=null&&M(s);const l=r.get("buscador_rapido");l!=null&&v(l)},[]);const[O,_]=o.exports.useState(!1);return a(G,{auth:c,children:[e("link",{rel:"shortcut icon",href:"#"}),a("div",{children:[a("div",{className:"contenedor-filtros",children:[a("div",{className:"",children:[a("form",{method:"get",name:"form_busqueda_rapida",id:"form_busqueda_rapida",children:[e("input",{ref:h,id:"buscador_rapido",className:"buscador_rapido",name:"buscador_rapido",type:"text",value:V,placeholder:"Búsqueda rápida",onChange:t=>v(t.target.value)}),e("input",{name:"fecha_publicacion",type:"hidden",value:H}),e("input",{name:"type",type:"hidden",value:"fetch"})]}),e("span",{className:"material-symbols-outlined posicion-lupa-contratos",children:"search"})]}),e("div",{className:"",children:a("button",{className:"buscador_avanzado mb-3",children:[e("span",{className:"material-symbols-outlined",children:"list"}),e("span",{className:"color-texto",children:"Búsqueda avanzada"})]})}),a("div",{className:"input-filtro-estado",children:[e("span",{className:"input-filtro-estado-span",children:"Visualizar:"}),a("select",{className:"input-visualizar",children:[e("option",{value:"",children:"todos"}),e("option",{value:"",children:"Vistos recientemente"}),e("option",{value:"",children:"No Leidos"})]})]}),e("div",{children:e(K,{nextHandler:()=>w(W),prevHandler:()=>w(R),currentPage:B,totalPaginas:L,totalElementos:A})})]}),a("div",{className:"contenedor-contratos",children:[e("div",{className:"contenedor-opciones-usuarios",children:e(J,{})}),e("div",{className:"alto-tabla bg-white overflow-auto ",id:"scroll-table",children:O?e(se,{}):a(k,{children:[e("div",{id:"wrapper1",style:{width:y>0?y:0+"px"},children:e("div",{id:"div1",style:{width:x>0?x:0+"px"}})}),a("table",{id:"tabla",className:"w-full bg-white border tabla table-hover",children:[e("thead",{className:"cabecera-tabla",style:{backgroundColor:"#00a1c9"},children:a("tr",{className:"bg-paginador text-white uppercase leading-normal",children:[e("th",{style:{padding:"0px 0px"},children:"Acciones"}),e("th",{style:{padding:"0px 5px"},children:"Portal"}),e("th",{style:{padding:"0px 80px"},children:"Entidad"}),e("th",{style:{padding:"0px 80px"},children:"Objeto"}),e("th",{style:{padding:"0px 35px"},children:"Cuantía"}),e("th",{style:{padding:"0px 80px"},children:"Modalidad"}),e("th",{style:{padding:"0px 30px"},children:"Número"}),e("th",{style:{padding:"0px 0px"},children:"Estado"}),e("th",{style:{padding:"0px 35px"},children:"Publicada"}),e("th",{style:{padding:"0px 35px"},children:"Ubicación"}),e("th",{style:{padding:"0px 80px"},children:"Contratista"}),e("th",{style:{padding:"0px 80px"},children:"Actividad económica"})]})}),e("tbody",{children:n.map(t=>a("tr",{className:"tr-users",children:[e("td",{className:"border border-gray-200 text-left mw-90",children:a("div",{className:"iconos-horizontal width-columna-acciones",children:[a("div",{children:[e(te,{}),e(Z,{url:t.link}),e(ee,{})]}),a("div",{className:"",children:[e(X,{}),e(Y,{}),e(ae,{})]})]})}),e("td",{className:"border border-gray-200 text-left margen-textos",children:e("span",{className:"circulo",children:t.fuente.alias_portal})}),e("td",{className:"border border-gray-200 text-left margen-textos",children:e("span",{className:"data-text width-columna-menor",children:t.entidad_contratante})}),a("td",{className:"border border-gray-200 text-left margen-textos mw-200",children:[P&&e(k,{children:g!=t.id&&a("span",{className:"data-text",children:[t.objeto.substr(0,40),"..."," ",e("a",{className:"text-primary",onClick:()=>j(t),children:"Ver más"})]})}),g==t.id&&e("div",{className:"showmore",children:a("span",{className:"data-text",children:[t.objeto,e("a",{className:"text-primary",onClick:()=>E(),children:"Ver menos"})]})})]}),e("td",{className:"border border-gray-200 text-left margen-textos width-columna-menor",children:t.valor>0?"$"+t.valor.toLocaleString("ch-CH"):t.valor_texto}),e("td",{className:"border border-gray-200 text-left margen-textos mw-200",children:e("span",{className:"data-text ",children:t.modalidad})}),e("td",{className:"border border-gray-200 text-left margen-textos ",children:e("span",{className:"data-text ",children:t.codigo_proceso})}),e("td",{className:"border border-gray-200 text-left color-estado margen-textos width-columna-menor",children:e("span",{className:"data-text ",children:t.estado_proceso})}),e("td",{className:"border border-gray-200 text-left margen-textos",children:e("span",{className:"data-text width-columna-menor",children:t.fecha_publicacion})}),e("td",{className:"border border-gray-200 text-left margen-textos width-columna-menor",children:e("span",{className:"data-text ",children:t.ubicacion})}),e("td",{className:"border border-gray-200 text-left margen-textos mw-200",children:e("span",{className:"data-text ",children:t.contratista})}),e("td",{className:"border border-gray-200 text-left margen-textos",children:e("span",{className:"data-text ",children:t.actividad_economica})})]},t.id))})]}),n.length<=0&&e("div",{id:"mensajes-personalizado-busqueda",class:"container-fluid content_blank_interno",children:a("div",{class:"row justify-content-center align-items-center",children:[e("div",{class:"col-md-4 col-sm-4 offset-md-1 offset-sm-1",children:e("img",{src:"https://col.licitaciones.info/img/mensajes-personalisados/sin-resultados-busqueda.png",alt:"",class:"img-fluid mensaje-imagen"})}),e("div",{class:"col-md-5 col-sm-5 offset-sm-1 offset-md-1",children:a("div",{class:"estructura-mensaje-personalizado",children:[a("h4",{class:"text-center titulo-personalizado",children:[e("b",{class:"text-rojo",children:"No se encontró"})," el resultado."]}),a("div",{class:"position-relative",children:[e("span",{class:"icon-Bombillo mensaje-icono"}),e("p",{class:"mensaje-personalizado d-block text-left",children:"Prueba cambiando tus opciones de búsqueda e intentalo nuevamente."})]})]})})]})})]})})]})]})]})};export{he as default};
